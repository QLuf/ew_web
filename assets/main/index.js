window.__require=function t(e,o,n){function i(a,r){if(!o[a]){if(!e[a]){var s=a.split("/");if(s=s[s.length-1],!e[s]){var l="function"==typeof __require&&__require;if(!r&&l)return l(s,!0);if(c)return c(s,!0);throw new Error("Cannot find module '"+a+"'")}a=s}var p=o[a]={exports:{}};e[a][0].call(p.exports,function(t){return i(e[a][1][t]||t)},p,p.exports,t,e,o,n)}return o[a].exports}for(var c="function"==typeof __require&&__require,a=0;a<n.length;a++)i(n[a]);return i}({AdManager:[function(t,e){"use strict";cc._RF.push(e,"30051oXO4dBFq2W2/44VWNY","AdManager"),cc.Class({extends:cc.Component,properties:{androidLink:{default:""},iosLink:{default:""},defaultLink:{default:""}},openAdUrl:function(){window.androidLink=this.androidLink,window.iosLink=this.iosLink,window.defaultLink=this.defaultLink,window.openAdUrl?window.openAdUrl():window.open()}}),cc._RF.pop()},{}],AdService:[function(t,e,o){"use strict";cc._RF.push(e,"412efVY1KxO/pZZiQqhp+2I","AdService"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(){this.endgameCount=0,this.startTime=0,this.videoTime=600,this.interstitialTime=240,this.startTime=Date.now()}return t.prototype.canShowWebAd=function(){return!cc.sys.isNative&&!cc.Global.instant},t.prototype.preloadAds=function(){cc.Global.instant&&(this.preloadVideo(),this.preloadInterstitial())},t.prototype.preloadInterstitial=function(){var t=this;this.preloadedInterstitial=null,FBInstant.getInterstitialAdAsync("832330236966450_844338219098985").then(function(e){return t.preloadedInterstitial=e,t.preloadedInterstitial.loadAsync()}).then(function(){console.log("Interstitial preloaded")}).catch(function(t){console.error("Interstitial failed to preload: "+t.message)})},t.prototype.preloadVideo=function(){var t=this;this.preloadedRewardedVideo=null,FBInstant.getRewardedVideoAsync("832330236966450_844342755765198").then(function(e){return t.preloadedRewardedVideo=e,t.preloadedRewardedVideo.loadAsync()}).then(function(){console.log("Rewarded video preloaded")}).catch(function(t){console.error("Rewarded video failed to preload: "+t.message)})},t.prototype.showInterstitialAds=function(){var t=this;cc.Global.instant&&this.preloadedInterstitial&&this.preloadedInterstitial.showAsync().then(function(){console.log("Interstitial ad finished successfully"),t.preloadInterstitial()}).catch(function(e){t.preloadInterstitial(),console.error(e.message)})},t.prototype.showVideoAds=function(t){var e=this;cc.Global.instant&&this.preloadedRewardedVideo&&this.preloadedRewardedVideo.showAsync().then(function(){t&&t(),e.preloadVideo()}).catch(function(t){e.preloadVideo(),console.error(t.message)})},t.prototype.showEndgameAds=function(){this.endgameCount++;var t=(Date.now()-this.startTime)/1e3;if(this.preloadedRewardedVideo&&(this.endgameCount>=6||t>=this.videoTime))return this.videoTime+=400,this.endgameCount=0,this.startTime=t,void this.showVideoAds();this.preloadedInterstitial&&(3==this.endgameCount||t>=this.interstitialTime)&&(this.interstitialTime+=400,this.showInterstitialAds())},t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t}();o.AdService=n,cc._RF.pop()},{}],Archer1:[function(t,e,o){"use strict";cc._RF.push(e,"0754dkxZLlANopd5JwjK/Ka","Archer1");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../Constant_1_1"),r=t("../../Tower"),s=t("../../TowerData"),l=cc._decorator,p=l.ccclass,u=l.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.anim1=null,e.anim2=null,e.frontLayout=null,e.isFirstAttack=!0,e}return i(e,t),e.prototype.onLoad=function(){this.frontLayout.zIndex=a.Constant.TOWER_FRONT_STONE_ZINDEX,this.setData(s.LIST_TOWER.ARCHER_1),this.maxEnergy=150},e.prototype.checkNextAttack=function(){this.switchArcher(),this.idle(this.isFront),this.checkAttack()},e.prototype.switchArcher=function(){this.anim1.node.zIndex=this.anim2.node.zIndex=2,this.anim.node.name==this.anim1.node.name?(this.anim=this.anim2,this.anim2.node.zIndex=4):(this.anim=this.anim1,this.anim.node.zIndex=1)},e.prototype.setAnimPos=function(t){var e=this.anim.node,o=cc.v3();if(e.name==this.anim1.node.name)if(e.scaleX>0)switch(t){case this.data.frontIdle:case this.data.frontAttack:o=cc.v3(11,57);break;case this.data.backIdle:case this.data.backAttack:o=cc.v3(20,60)}else switch(t){case this.data.frontIdle:case this.data.frontAttack:o=cc.v3(22.5,57);break;case this.data.backIdle:case this.data.backAttack:o=cc.v3(14,60)}else if(e.name==this.anim2.node.name)if(e.scaleX>0)switch(t){case this.data.frontIdle:case this.data.frontAttack:o=cc.v3(-20,44.5);break;case this.data.backIdle:case this.data.backAttack:o=cc.v3(-11.5,48)}else switch(t){case this.data.frontIdle:case this.data.frontAttack:o=cc.v3(-9,44.5);break;case this.data.backIdle:case this.data.backAttack:o=cc.v3(-17,48)}e.setPosition(o)},c([u(cc.Animation)],e.prototype,"anim1",void 0),c([u(cc.Animation)],e.prototype,"anim2",void 0),c([u(cc.Node)],e.prototype,"frontLayout",void 0),c([p],e)}(r.default);o.default=d,cc._RF.pop()},{"../../Constant_1_1":"Constant_1_1","../../Tower":"Tower","../../TowerData":"TowerData"}],ArcherBullet:[function(t,e,o){"use strict";cc._RF.push(e,"dc7c6efrsRHfLDECkISbCFO","ArcherBullet");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../Constant_1_1"),r=t("../../tower/Bullet"),s=cc._decorator,l=s.ccclass,p=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.start=function(){},e.prototype.shootCustom=function(t,e){cc.Canvas.instance.node.emit(a.Constant.EVENT.ARCHER_SHOOT),this.node.zIndex=a.Constant.TOWER_FRONT_BULLET_ZINDEX,this.node.setPosition(this.getStartPos(e)),this.node.zIndex=e.isFront?4:0;var o=t.node,n=o.parent.convertToWorldSpaceAR(o.position),i=this.node.parent.convertToNodeSpaceAR(n),c=cc.v2(this.node.position.x,this.node.position.y),r=(i.x-this.node.position.x)/2,s=this.node.parent.x<o.x?1:-1;this.node.angle=this.node.parent.x<o.x?50:130,this.getRotateAngle(t,e),this.node.runAction(cc.sequence(cc.spawn(cc.bezierTo(.6,[c,c.add(cc.v2(r,this.getShootHeight(t,e))),i.add(cc.v3(0,30))]),cc.rotateBy(.6,this.getRotateAngle(t,e)*s)),cc.callFunc(function(){t.isValid&&t.attacked(this.data.attackDamage,this.data.attackType),this.node.destroy()}.bind(this))))},e.prototype.getShootHeight=function(t,e){var o=t.node.position,n=e.node.position,i=Math.abs(Math.abs(o.x)-Math.abs(n.x));return i<30?10:i<50?30:i<100?60:i<150?80:100},e.prototype.getRotateAngle=function(t,e){var o=t.node.position,n=e.node.position,i=Math.abs(Math.abs(o.x)-Math.abs(n.x));return e.isFront?i<50?140:i<100?130:i<150?120:60:50},e.prototype.getDistance=function(t){return t.sub(this.node.position).mag()},e.prototype.getStartPos=function(t){var e=t.anim.node,o=t.anim2.node,n=cc.v3();return n=e.name==o.name?cc.v3(-4,59):cc.v3(26,64),this.node.position.add(n)},c([l],e)}(r.default));o.default=p,cc._RF.pop()},{"../../Constant_1_1":"Constant_1_1","../../tower/Bullet":"Bullet"}],ArrynBullet:[function(t,e,o){"use strict";cc._RF.push(e,"4a1983xvn1O7IhQj6ceteKE","ArrynBullet");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../tower/Bullet"),r=cc._decorator,s=r.ccclass,l=(r.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.start=function(){},e.prototype.shootCustom=function(t,e){var o=t.node,n=o.parent.convertToWorldSpaceAR(o.position),i=this.node.parent.convertToNodeSpaceAR(n);this.node.angle=e.node.scaleX<0?60:120;var c=cc.v2(this.node.position.x,this.node.position.y),a=(i.x-this.node.position.x)/2,r=this.node.x<o.x?-1:1;this.node.runAction(cc.sequence(cc.spawn(cc.bezierTo(.7,[c,c.add(cc.v2(a,100)),i.add(cc.v3(0,30))]),cc.rotateBy(.7,-60*r)),cc.callFunc(function(){t.isValid&&t.attacked(this.data.attackDamage,this.data.attackType),this.node.destroy()}.bind(this))))},c([s],e)}(a.default));o.default=l,cc._RF.pop()},{"../../tower/Bullet":"Bullet"}],Arryn:[function(t,e,o){"use strict";cc._RF.push(e,"81023sF1odIQ6GFnetM2njt","Arryn");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../Minion_1_1"),r=t("../../MinionData"),s=t("../../Constant_1_1"),l=t("../../common/Utils"),p=t("../../tower/Bullet"),u=t("../../Effect"),d=cc._decorator,h=d.ccclass,f=d.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.body=null,e.bulletPrefab=null,e.effectPrefab=null,e.aura=null,e.isTouch=!1,e.bulletSchedule=null,e}return i(e,t),e.prototype.onLoad=function(){this.setData(r.LIST_MINION.ARRYN),this.body.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this)},e.prototype.onTouchStart=function(){this.isTouch=!this.isTouch,this.aura.active=this.isTouch,this.isTouch&&cc.Canvas.instance.node.emit(s.Constant.EVENT.CLICK)},e.prototype.onTouchEnd=function(){this.isTouch},e.prototype.onMove=function(t){if(this.isTouch){cc.Canvas.instance.node.emit(s.Constant.EVENT.CLICK),cc.Canvas.instance.node.emit(s.Constant.EVENT.HAND_HIDE_DEFAULT),cc.Canvas.instance.node.off(cc.Node.EventType.TOUCH_START,this.onMove,this),this.aura.active=!1,this.isTouch=!1,this.isAttack=!0;var e=cc.Canvas.instance.node.convertToNodeSpaceAR(t.getLocation()).add(cc.v3(0,cc.Global.CAMERA_POS_Y));this.node.stopAllActions(),l.default.prototype.playAnimation(this.anim,this.data.walk),this.setDirection(e),this.node.runAction(cc.sequence(cc.moveTo(this.getWalkTime(e),e),cc.callFunc(function(){this.checkAttack()}.bind(this))))}},e.prototype.checkAttack=function(){this.clearEnemyTargetArr(),0!=this.enemyTargetArr.length?this.attack():this.idle()},e.prototype.attack=function(){this.isAttack=!0,this.enemyTarget=this.enemyTargetArr[0],this.enemyTarget&&this.enemyTarget.isValid?(this.setDirection(this.enemyTarget.node.position),this.getDistance(this.enemyTarget.node.position)<this.range.radius/2?this.walk():this.rangeAttack()):this.idle()},e.prototype.walk=function(){l.default.prototype.playAnimation(this.anim,this.data.walk),this.enemyTarget.minionTarget(this);var t=this.node.x<this.enemyTarget.node.x?-1:1,e=this.enemyTarget.node.position.add(cc.v3(50*t,-10));this.node.runAction(cc.sequence(cc.moveTo(this.getWalkTime(e),e),cc.callFunc(function(){this.meleeAttack(),this.enemyTarget&&this.enemyTarget.isValid&&this.enemyTarget.attack()}.bind(this))))},e.prototype.rangeAttack=function(){l.default.prototype.playAnimation(this.anim,this.data.rangeAttack),this.bulletSchedule&&this.unschedule(this.bulletSchedule),this.bulletSchedule=this.scheduleOnce(function(){if(this.enemyTarget&&this.enemyTarget.isValid){this.showEffect(this.data.effect,s.Constant.EFFECT_UP_ZINDEX);var t=cc.instantiate(this.bulletPrefab);cc.Canvas.instance.node.addChild(t),t.setPosition(this.node.position.add(cc.v3(0,60))),t.zIndex=s.Constant.SKILL_ZINDEX,t.getComponent(p.default).shoot(this.enemyTarget,this)}}.bind(this),.6)},e.prototype.meleeAttack=function(){var t=this.data.attack;l.default.prototype.playAnimation(this.anim,t),this.enemyTarget.attacked(this.data.attackDamage,s.ATTACK_TYPE.DEFAULT)},e.prototype.showEffect=function(t,e,o,n){void 0===o&&(o=!1),void 0===n&&(n=0);var i=cc.instantiate(this.effectPrefab);this.node.addChild(i,e),i.setPosition(i.position.add(cc.v3(-10,55))),i.getComponent(u.default).setData(t,this.data,o,n)},c([f(cc.Node)],e.prototype,"body",void 0),c([f(cc.Prefab)],e.prototype,"bulletPrefab",void 0),c([f(cc.Prefab)],e.prototype,"effectPrefab",void 0),c([f(cc.Node)],e.prototype,"aura",void 0),c([h],e)}(a.default);o.default=y,cc._RF.pop()},{"../../Constant_1_1":"Constant_1_1","../../Effect":"Effect","../../MinionData":"MinionData","../../Minion_1_1":"Minion_1_1","../../common/Utils":"Utils","../../tower/Bullet":"Bullet"}],Asura:[function(t,e,o){"use strict";cc._RF.push(e,"a3c16z58Z9BGaJ6luLVPoUL","Asura");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../EW_1_1/Constant_1_1"),r=t("../MinionWK"),s=t("../MinionWKData"),l=cc._decorator,p=l.ccclass,u=l.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bloodLabel=null,e.body=null,e.aura=null,e.atkAudio=null,e.atk3Audio=null,e.ultiAudio=null,e.eff1=null,e.effSkillCollider=null,e.atkAudioSchedule=null,e.ultiAudioSchedule=null,e.isTouch=!1,e.bulletSchedule=null,e.moveDir=null,e.directionX=null,e}return i(e,t),e.prototype.onLoad=function(){this.setData(s.LIST_MINION.ASURA),cc.Canvas.instance.node.on(a.Constant.EVENT.PLAYER_RUN,this.walk,this),cc.Canvas.instance.node.on(a.Constant.EVENT.PLAYER_IDLE,this.idle,this),cc.Canvas.instance.node.on(a.Constant.EVENT.PLAYER_ATTACK,this.checkAttack,this),cc.Canvas.instance.node.on(a.Constant.EVENT.PLAYER_SKILL,this.playskill,this)},e.prototype.setBlood=function(t){var e=t>0?t:0;this.bloodLabel.string=String(10*e)},e.prototype.offEff=function(){},e.prototype.playskill=function(t){var e=this;if(console.log(t),!(this.isAttack||this.isDie||this.isSkill))switch(this.isSkill=!0,t){case"1":this.anim.setAnimation(0,this.data.ultimate,!1),this.showEffect(this.data.ultimate),this.changeAnimSpine(),this.playSoundSkill(),this.anim.scheduleOnce(function(){e.effSkillCollider.enabled=!0},this.anim.findAnimation(this.data.ultimate).duration/2),this.anim.scheduleOnce(function(){e.effSkillCollider.enabled=!1},this.anim.findAnimation(this.data.ultimate).duration)}},e.prototype.walk=function(){this.isDie||this.isAttack||this.isDie||this.isSkill||this.isRun||(this.anim.setAnimation(0,this.data.walk,!0),this.isRun=!0)},e.prototype.playSoundAtk=function(t){var e=this;switch(t){case 3:this.atkAudioSchedule=this.scheduleOnce(function(){cc.audioEngine.play(e.atk3Audio,!1,.8)},.5);break;default:this.atkAudioSchedule=this.scheduleOnce(function(){cc.audioEngine.play(e.atkAudio,!1,.8)},.5)}},e.prototype.playSoundSkill=function(){var t=this;this.ultiAudioSchedule&&this.unschedule(this.ultiAudioSchedule),this.ultiAudioSchedule=this.scheduleOnce(function(){cc.audioEngine.play(t.ultiAudio,!1,1.2)},.2)},e.prototype.checkIndex=function(){var t=cc.Canvas.instance.node.getComponent("WK_3").golemAbyss,e=cc.Canvas.instance.node.getComponent("WK_3").golemCeles,o=cc.Canvas.instance.node.getComponent("WK_3").mageMystic;this.node.position.y>e.position.y?this.node.zIndex=t.zIndex-1:this.node.position.y<e.position.y-150&&Math.abs(o.position.x-this.node.position.x)>150?this.node.zIndex=o.zIndex-1:this.node.position.y<o.position.y&&Math.abs(o.position.x-this.node.position.x)<150?this.node.zIndex=o.zIndex+2:this.node.position.y<e.position.y&&this.node.position.y>o.position.y&&Math.abs(t.position.x-this.node.position.x)>150?this.node.zIndex=o.zIndex-1:this.node.position.y>t.position.y&&Math.abs(t.position.x-this.node.position.x)<150&&(this.node.zIndex=t.zIndex-1)},e.prototype.update=function(){if(this.checkIndex(),this.moveDir&&this.directionX)if(!this.isRun||this.isDie||this.isAttack||this.isSkill)t=this.node.position.add(this.moveDir.mul(0)),this.node.setPosition(t.clampf(cc.v3(-820,320),cc.v3(800,-360)));else{var t=this.node.position.add(this.moveDir.mul(250/60));this.node.setPosition(t.clampf(cc.v3(-820,320),cc.v3(800,-360))),console.log(this.node.scaleX),this.node.scaleX=1.2*-this.directionX,this.node.getChildByName("blood").scaleX=.9*-this.directionX}},c([u(cc.Label)],e.prototype,"bloodLabel",void 0),c([u(cc.Node)],e.prototype,"body",void 0),c([u(cc.Node)],e.prototype,"aura",void 0),c([u(cc.AudioClip)],e.prototype,"atkAudio",void 0),c([u(cc.AudioClip)],e.prototype,"atk3Audio",void 0),c([u(cc.AudioClip)],e.prototype,"ultiAudio",void 0),c([u(sp.Skeleton)],e.prototype,"eff1",void 0),c([u(cc.BoxCollider)],e.prototype,"effSkillCollider",void 0),c([p],e)}(r.default);o.default=d,cc._RF.pop()},{"../../EW_1_1/Constant_1_1":"Constant_1_1","../MinionWK":"MinionWK","../MinionWKData":"MinionWKData"}],Barduk:[function(t,e,o){"use strict";cc._RF.push(e,"5284ck+RUBNDLUEV0ioM4B1","Barduk");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../EnemyWK"),r=t("../EnemyWKData"),s=cc._decorator,l=s.ccclass,p=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.effSkill=null,e.atkAudio=null,e.atk2Audio=null,e.skillAudio=null,e.bloodLabel=null,e.atkAudioSchedule=null,e.skillAudioSchedule=null,e}return i(e,t),e.prototype.onLoad=function(){this.setData(r.LIST_ENEMY.BARDUK)},e.prototype.playSoundAtk=function(t){var e=this;switch(t){case 2:this.atkAudioSchedule=this.scheduleOnce(function(){cc.audioEngine.play(e.atk2Audio,!1,.7)},.25);break;default:this.atkAudioSchedule=this.scheduleOnce(function(){cc.audioEngine.play(e.atkAudio,!1,.7)},.25)}},e.prototype.playSoundSkill=function(){var t=this;this.skillAudioSchedule&&this.unschedule(this.skillAudioSchedule),this.skillAudioSchedule=this.scheduleOnce(function(){cc.audioEngine.play(t.skillAudio,!1,1)},.8)},e.prototype.showEffSkill=function(t){switch(t){case 1:this.effSkill.setAnimation(0,this.data.attack,!1);break;case 2:this.effSkill.setAnimation(0,this.data.attack2,!1);break;case 3:this.effSkill.setAnimation(0,this.data.attack3,!1);break;case 4:this.effSkill.setAnimation(0,this.data.skill,!1)}},e.prototype.setBlood=function(t){var e=t>0?t:0;this.bloodLabel.string=String(10*e)},e.prototype.setAnimPos=function(t){var e=cc.v3(0,32);switch(t){case this.data.attack:e=cc.v3(-5,52);break;case this.data.die:e=cc.v3(-28,29)}this.icon.setPosition(e)},c([p(sp.Skeleton)],e.prototype,"effSkill",void 0),c([p(cc.AudioClip)],e.prototype,"atkAudio",void 0),c([p(cc.AudioClip)],e.prototype,"atk2Audio",void 0),c([p(cc.AudioClip)],e.prototype,"skillAudio",void 0),c([p(cc.Label)],e.prototype,"bloodLabel",void 0),c([l],e)}(a.default);o.default=u,cc._RF.pop()},{"../EnemyWK":"EnemyWK","../EnemyWKData":"EnemyWKData"}],Barrack1:[function(t,e,o){"use strict";cc._RF.push(e,"a268dbVtTVC5YAefvENYC5e","Barrack1");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../Constant_1_1"),r=t("../../Tower"),s=t("../../TowerData"),l=t("../../Minion_1_1"),p=cc._decorator,u=p.ccclass,d=p.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.minionPrefab=null,e.minionArr=[],e.startPos=cc.v2(),e}return i(e,t),e.prototype.onLoad=function(){this.setData(s.LIST_TOWER.BARRACK_1);var t=cc.v2(0,-100);switch(this.pointId){case 0:t=cc.v2(0,-70);break;case 1:t=cc.v2(-80,-50);break;case 2:t=cc.v2(200,50)}this.startPos=cc.v2(this.node.position.x,this.node.position.y).add(t),this.isTest||(this.createListMinion(),this.showEffectSummon(a.Constant.ANIMATION_SPEED,1,cc.v3(0,0)))},e.prototype.createListMinion=function(){for(var t=[cc.v2(50),cc.v2(-50),cc.v2(0,-50)],e=0;e<3;e++){var o=this.createMinion();o.getComponent(l.default).walkTo(this.startPos.add(t[e])),this.minionArr.push(o)}},e.prototype.createMinion=function(){var t=cc.Global.GAME.game,e=cc.instantiate(this.minionPrefab);return t.addChild(e),e.setPosition(this.node.position.add(cc.v3(0,20))),e},e.prototype.onDestroy=function(){for(var t=0;t<this.minionArr.length;t++){var e=this.minionArr[t];e&&e.isValid&&e.destroy()}},c([d(cc.Prefab)],e.prototype,"minionPrefab",void 0),c([u],e)}(r.default);o.default=h,cc._RF.pop()},{"../../Constant_1_1":"Constant_1_1","../../Minion_1_1":"Minion_1_1","../../Tower":"Tower","../../TowerData":"TowerData"}],Bullet_WK:[function(t,e,o){"use strict";cc._RF.push(e,"f4e9f+aOMpJZJ3lK0SAv1uX","Bullet_WK");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,r=a.ccclass,s=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.effectPrefab=null,e.data=null,e}return i(e,t),e.prototype.shoot=function(t,e){this.data=e.data,this.shootCustom(t,e)},e.prototype.shootCustom=function(){},e.prototype.showEffect=function(t,e,o,n){void 0===o&&(o=!1),void 0===n&&(n=0);var i=cc.instantiate(this.effectPrefab);cc.Canvas.instance.node.addChild(i,e);var c=this.node.parent.convertToWorldSpaceAR(this.node.position),a=cc.Canvas.instance.node.convertToNodeSpaceAR(c);i.setPosition(a)},c([s(cc.Prefab)],e.prototype,"effectPrefab",void 0),c([r],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],Bullet:[function(t,e,o){"use strict";cc._RF.push(e,"7d1ccsmtitHD6dxQxpAqV73","Bullet");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../Effect"),r=cc._decorator,s=r.ccclass,l=r.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.effectPrefab=null,e.data=null,e}return i(e,t),e.prototype.shoot=function(t,e){this.data=e.data,this.shootCustom(t,e)},e.prototype.shootCustom=function(){},e.prototype.showEffect=function(t,e,o,n){void 0===o&&(o=!1),void 0===n&&(n=0);var i=cc.instantiate(this.effectPrefab);cc.Canvas.instance.node.addChild(i,e),i.getComponent(a.default).setData(t,this.data,o,n);var c=this.node.parent.convertToWorldSpaceAR(this.node.position),r=cc.Canvas.instance.node.convertToNodeSpaceAR(c);i.setPosition(r)},c([l(cc.Prefab)],e.prototype,"effectPrefab",void 0),c([s],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../Effect":"Effect"}],ButtonController:[function(t,e,o){"use strict";cc._RF.push(e,"8a66f2mO6dHerbABmbNMsDW","ButtonController");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../services/DialogService"),r=cc._decorator,s=r.ccclass,l=r.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.settingMenu=null,e.checkIn=null,e.shopMenu=null,e.selectHero=null,e.listLevel=null,e.listLevelPrefabs=[],e}return i(e,t),e.prototype.start=function(){for(var t=this,e=function(e){o.listLevel.children[e].on("click",function(){t.openLevel(),a.default.getInstance().chooseLevelNum(e),t.unscheduleAllCallbacks()},o)},o=this,n=0;n<this.listLevel.childrenCount;n++)e(n)},e.prototype.onCheckIn=function(){cc.Global.isDialog||(cc.Global.isDialog=!0,a.default.getInstance().onDialog(this.checkIn))},e.prototype.onSetting=function(){cc.Global.isDialog||(cc.Global.isDialog=!0,a.default.getInstance().onDialog(this.settingMenu))},e.prototype.onShop=function(){cc.Global.isDialog||(cc.Global.isDialog=!0,a.default.getInstance().onDialog(this.shopMenu))},e.prototype.openLevel=function(){cc.Global.isDialog||(cc.Global.isDialog=!0,a.default.getInstance().onDialog(this.selectHero))},c([l(cc.Prefab)],e.prototype,"settingMenu",void 0),c([l(cc.Prefab)],e.prototype,"checkIn",void 0),c([l(cc.Prefab)],e.prototype,"shopMenu",void 0),c([l(cc.Prefab)],e.prototype,"selectHero",void 0),c([l(cc.Node)],e.prototype,"listLevel",void 0),c([l(cc.Prefab)],e.prototype,"listLevelPrefabs",void 0),c([s],e)}(cc.Component);o.ButtonController=p,cc._RF.pop()},{"../services/DialogService":"DialogService"}],CameraManager:[function(t,e,o){"use strict";cc._RF.push(e,"e7714Vf0wZL04bHcWGUKuM+","CameraManager");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../EW_1_1/Constant_1_1"),r=cc._decorator,s=r.ccclass,l=r.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cameraNode=null,e.camera=null,e.bg=null,e.ui=null,e}return i(e,t),e.prototype.onLoad=function(){cc.Canvas.instance.node.on(a.Constant.EVENT.CAMERA_SHAKE,this.onCameraShake,this),cc.Canvas.instance.node.on(a.Constant.EVENT.CAMERA_MOVE,this.onCameraMove,this)},e.prototype.start=function(){},e.prototype.onCameraMove=function(t){var e=cc.tween;t.setPos&&this.cameraNode.setPosition(t.setPos),t.movePos&&e(this.cameraNode).by(t.moveTime,{position:t.movePos}).start(),t.setZoom&&(this.camera.zoomRatio=t.setZoom),t.moveZoom&&e(this.camera).to(t.moveTime,{zoomRatio:t.moveZoom}).start()},e.prototype.onCameraShake=function(t){void 0===t&&(t=1),cc.tween(this.cameraNode).repeat(t,cc.tween(this.cameraNode).by(.1,{position:cc.v2(0,20)}).by(.1,{position:cc.v2(0,-40)}).by(.1,{position:cc.v2(0,20)})).start()},e.prototype.onTouch=function(t){cc.Canvas.instance.node.emit(a.Constant.EVENT.OFF_CHOOSE_TOWER),cc.Canvas.instance.node.emit(a.Constant.EVENT.SET_WARNING);var e=this.bg.height;if(cc.winSize.height<e){var o=e-cc.winSize.height,n=o/2,i=-o/2,c=this.cameraNode.y-t.getDeltaY();c>n?(this.cameraNode.y=n,this.ui.y=n):c<i?(this.cameraNode.y=i,this.ui.y=i):(this.cameraNode.y=c,this.ui.y=c),cc.Global.CAMERA_POS_Y=this.cameraNode.y}},c([l(cc.Node)],e.prototype,"cameraNode",void 0),c([l(cc.Camera)],e.prototype,"camera",void 0),c([l(cc.Node)],e.prototype,"bg",void 0),c([l(cc.Node)],e.prototype,"ui",void 0),c([s],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../EW_1_1/Constant_1_1":"Constant_1_1"}],CardButton:[function(t,e,o){"use strict";cc._RF.push(e,"99c5bjyumpEALRF5YiWNt47","CardButton");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../EW_1_1/Constant_1_1"),r=cc._decorator,s=r.ccclass,l=r.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.reload=null,e.moneyLabel=null,e.card_id=0,e.price=0,e.reload_time=.5,e.money=0,e.isReloading=!1,e}return i(e,t),e.prototype.onLoad=function(){cc.Canvas.instance.node.on(a.Constant.EVENT.CHECK_VALID_CARD,this.onCheckValidCard,this)},e.prototype.start=function(){this.moneyLabel.string=String(this.price),this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this)},e.prototype.onCheckValidCard=function(t){this.money=t,this.isReloading||(this.price>t?(this.reload.node.active=!0,this.reload.fillRange=1):this.reload.node.active=!1)},e.prototype.onTouchStart=function(){var t=this;cc.Canvas.instance.node.emit(a.Constant.EVENT.CLICK),this.money-=this.price,cc.Canvas.instance.node.emit(a.Constant.EVENT.CHECK_VALID_CARD,this.money),cc.Canvas.instance.node.emit(a.Constant.EVENT.SUMMON_MINION,this.card_id,this.price),this.reload.node.active=!0,this.isReloading=!0,cc.tween(this.reload).set({fillRange:0}).to(this.reload_time,{fillRange:1}).call(function(){t.isReloading=!1,t.onCheckValidCard(t.money)}).start()},c([l(cc.Sprite)],e.prototype,"reload",void 0),c([l(cc.Label)],e.prototype,"moneyLabel",void 0),c([l],e.prototype,"card_id",void 0),c([l],e.prototype,"price",void 0),c([l],e.prototype,"reload_time",void 0),c([s],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../EW_1_1/Constant_1_1":"Constant_1_1"}],CheckIn:[function(t,e,o){"use strict";cc._RF.push(e,"31f19EWjwZHNqwoITExoXwD","CheckIn");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../services/DialogService"),r=cc._decorator,s=r.ccclass,l=r.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rewardDialog=null,e.dayList=null,e.currDay=0,e.currWeek=0,e.weekList=[],e.tabNum=0,e}return i(e,t),e.prototype.start=function(){},e.prototype.swtichWeek=function(t,e){switch(e){case"0":this.tabNum=0;break;case"1":this.tabNum=1;break;case"2":this.tabNum=2;break;case"3":this.tabNum=3}for(var o=0;o<this.weekList.length;o++)this.weekList[o].setSiblingIndex(10),this.weekList[o].getChildByName("week").color=cc.Color.GRAY;this.weekList[this.tabNum].setSiblingIndex(100),this.weekList[this.tabNum].getChildByName("week").color=cc.Color.WHITE},e.prototype.onGift=function(t,e){e==this.currDay&&a.default.getInstance().onDialog(this.rewardDialog)},e.prototype.closeReward=function(){cc.Global.isDialog=!1,a.default.getInstance().offDialog(this.node)},c([l(cc.Prefab)],e.prototype,"rewardDialog",void 0),c([l(cc.Node)],e.prototype,"weekList",void 0),c([s],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../services/DialogService":"DialogService"}],ChooseTower_5:[function(t,e,o){"use strict";cc._RF.push(e,"a2fbdmu8LBCeroEa8tKQNSL","ChooseTower_5");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../EW_1_1/Constant_1_1"),r=t("../EW_1_1/Tower"),s=t("../EW_1_1/TowerData"),l=cc._decorator,p=l.ccclass,u=l.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.towerNode=null,e.listBtnTower=null,e.btnUp=null,e.btnSell=null,e.archer=null,e.barrack=null,e.archerLabel=null,e.barrackLabel=null,e.target=null,e.listGolemTower=[],e.listMageTower=[],e.listArcherTower=[],e.listBarrackTower=[],e.towerPos=cc.v3(0,-30),e.fixTowerPos=cc.v3(0,20),e.towerIndexInList=0,e.currTowerList=[],e}return i(e,t),e.prototype.onLoad=function(){cc.Canvas.instance.node.on(a.Constant.EVENT.OFF_CHOOSE_TOWER,this.offChooseTower,this),this.listGolemTower=[s.LIST_TOWER.GOLEM_1,s.LIST_TOWER.GOLEM_2,s.LIST_TOWER.GOLEM_3,s.LIST_TOWER.ANCIENT_OF_FIRE],this.listMageTower=[s.LIST_TOWER.ICE_PRIESTESS],this.listArcherTower=[s.LIST_TOWER.ARCHER_1],this.listBarrackTower=[s.LIST_TOWER.BARRACK_1]},e.prototype.start=function(){this.showGuideHand()},e.prototype.onEnable=function(){this.archerLabel.active=!1,this.barrackLabel.active=!1},e.prototype.showGuideHand=function(){this.archerLabel.active=!0,this.barrackLabel.active=!0;var t=cc.Global.GAME.hand,e=cc.Global.GAME.hand2,o=this.archer.parent.convertToWorldSpaceAR(this.archer.position),n=this.barrack.parent.convertToWorldSpaceAR(this.barrack.position),i=cc.Canvas.instance.node.convertToNodeSpaceAR(o),c=cc.Canvas.instance.node.convertToNodeSpaceAR(n),a=cc.callFunc(function(){t.getComponent("Hand").showCircle()}.bind(this)),r=cc.sequence(cc.callFunc(function(){t.setPosition(i.add(cc.v3(0,-10)))}.bind(this)),cc.scaleTo(.5,.9),a,cc.scaleTo(.5,1),cc.scaleTo(.5,.9),a,cc.scaleTo(.5,1));t.runAction(cc.repeatForever(r));var s=cc.callFunc(function(){e.getComponent("Hand").showCircle()}.bind(this)),l=cc.sequence(cc.callFunc(function(){e.setPosition(c.add(cc.v3(0,-10)))}.bind(this)),cc.scaleTo(.5,.9),s,cc.scaleTo(.5,1),cc.scaleTo(.5,.9),s,cc.scaleTo(.5,1));e.runAction(cc.repeatForever(l))},e.prototype.setUp=function(){var t=cc.v3();switch(this.target.type){case a.TYPE.TOWER:t=this.fixTowerPos,this.setUpBtnClickTower();break;case a.TYPE.POINT:t=cc.v3(0,-40),this.setUpBtnClickPoint()}this.setPos(t)},e.prototype.setUpBtnClickTower=function(){this.btnUp.active=!0,this.btnSell.active=!0,this.listBtnTower.active=!1,this.setRangeTower(!0),this.setPrice(this.btnSell,this.target.data.price),this.checkUpTower()},e.prototype.setUpBtnClickPoint=function(){this.btnUp.active=!1,this.btnSell.active=!1,this.listBtnTower.active=!0;for(var t=this.listBtnTower.children,e=0;e<t.length;e++){var o=t[e];switch(o.name){case"mage":this.setPrice(o,this.listMageTower[0].price);break;case"golem":this.setPrice(o,this.listGolemTower[0].price);break;case"archer":this.setPrice(o,this.listArcherTower[0].price);break;case"barrack":this.setPrice(o,this.listBarrackTower[0].price)}}},e.prototype.offChooseTower=function(){this.towerNode.removeAllChildren(),this.node.active=!1,this.setRangeTower(!1)},e.prototype.setPrice=function(t,e){t.getChildByName("price").getComponent(cc.Label).string=String(e)},e.prototype.checkCanUp=function(){},e.prototype.setPos=function(t){this.node.setPosition(this.target.node.position.add(t))},e.prototype.setRangeTower=function(t){this.target&&this.target.isValid&&this.target.type==a.TYPE.TOWER&&this.target.setRangeSprite(t)},e.prototype.testTower=function(t){this.towerNode.removeAllChildren();var e=cc.instantiate(t);this.towerNode.addChild(e),e.getComponent(r.default).isTest=!0,e.setPosition(this.towerPos)},e.prototype.getTowerPos=function(){var t=this.node.convertToWorldSpaceAR(this.towerPos);return cc.Canvas.instance.node.convertToNodeSpaceAR(t)},e.prototype.checkUpTower=function(){for(var t=[this.listGolemTower,this.listMageTower],e=0;e<t.length;e++){var o=t[e],n=o.indexOf(this.target.data);if(-1!==n){this.currTowerList=o,this.towerIndexInList=n,n+1<o.length?this.setPrice(this.btnUp,o[n+1].price):this.btnUp.active=!1;break}}},e.prototype.onBtnTower=function(t){var e;switch(cc.Canvas.instance.node.emit(a.Constant.EVENT.TOWER_BUILD),t.node.name){case"mage":e=this.listMageTower[0];break;case"golem":e=this.listGolemTower[0];break;case"barrack":e=this.listBarrackTower[0];break;case"archer":e=this.listArcherTower[0]}var o=cc.Global.GAME.getPrefabByObj(e);cc.Canvas.instance.node.emit(a.Constant.EVENT.OFF_CHOOSE_TOWER),cc.Canvas.instance.node.emit(a.Constant.EVENT.SET_MONEY,-e.price),cc.Global.GAME.createTower2(o,this.getTowerPos(),this.target.pointId),this.target.node.destroy()},e.prototype.onBtnSell=function(){cc.Canvas.instance.node.emit(a.Constant.EVENT.OFF_CHOOSE_TOWER),cc.Canvas.instance.node.emit(a.Constant.EVENT.SET_MONEY,this.target.data.price),cc.Global.GAME.createPoint(this.getTowerPos().add(cc.v3(0,20))),this.target.node.destroy()},e.prototype.onBtnUp=function(){var t=this.currTowerList[this.towerIndexInList+1];cc.Canvas.instance.node.emit(a.Constant.EVENT.OFF_CHOOSE_TOWER),cc.Canvas.instance.node.emit(a.Constant.EVENT.SET_MONEY,-t.price);var e=cc.Global.GAME.getPrefabByObj(t);cc.Global.GAME.createTower(e,this.getTowerPos().add(cc.v3(0,-20))),this.target.node.destroy()},c([u(cc.Node)],e.prototype,"towerNode",void 0),c([u(cc.Node)],e.prototype,"listBtnTower",void 0),c([u(cc.Node)],e.prototype,"btnUp",void 0),c([u(cc.Node)],e.prototype,"btnSell",void 0),c([u(cc.Node)],e.prototype,"archer",void 0),c([u(cc.Node)],e.prototype,"barrack",void 0),c([u(cc.Node)],e.prototype,"archerLabel",void 0),c([u(cc.Node)],e.prototype,"barrackLabel",void 0),c([p],e)}(cc.Component);o.default=d,cc._RF.pop()},{"../EW_1_1/Constant_1_1":"Constant_1_1","../EW_1_1/Tower":"Tower","../EW_1_1/TowerData":"TowerData"}],ChooseTower:[function(t,e,o){"use strict";cc._RF.push(e,"8c8c1BSem5E7JlZZ52TWk/5","ChooseTower");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../EW_1_1/Constant_1_1"),r=t("../EW_1_1/Tower"),s=t("../EW_1_1/TowerData"),l=t("./MapData"),p=cc._decorator,u=p.ccclass,d=p.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.towerNode=null,e.listBtnTower=null,e.btnUp=null,e.btnSell=null,e.btnUpFrameArr=[],e.target=null,e.listGolemTower=[],e.listMageTower=[],e.listArcherTower=[],e.listBarrackTower=[],e.towerPos=cc.v3(0,0),e.fixTowerPos=cc.v3(0,20),e.towerIndexInList=0,e.currTowerList=[],e}return i(e,t),e.prototype.onLoad=function(){cc.Canvas.instance.node.on(a.Constant.EVENT.CHOOSE_TOWER_SET_ACTIVE_BUTTON,this.setActiveBtnTower,this),cc.Canvas.instance.node.on(a.Constant.EVENT.OFF_CHOOSE_TOWER,this.offChooseTower,this),this.listGolemTower=[s.LIST_TOWER.GOLEM_1,s.LIST_TOWER.GOLEM_2,s.LIST_TOWER.GOLEM_3,s.LIST_TOWER.ANCIENT_OF_FIRE],this.listMageTower=[s.LIST_TOWER.MAGE_1],this.listArcherTower=[s.LIST_TOWER.ARCHER_1],this.listBarrackTower=[s.LIST_TOWER.BARRACK_1]},e.prototype.start=function(){},e.prototype.setUp=function(){this.towerNode.removeAllChildren(),this.resetListToggle();var t=cc.v3();switch(this.target.type){case a.TYPE.TOWER:t=this.fixTowerPos,this.setUpBtnClickTower();break;case a.TYPE.POINT:t=cc.v3(0,-40),this.setUpBtnClickPoint(),this.setActiveBtnTower()}this.setPos(t)},e.prototype.resetListToggle=function(){for(var t=this.listBtnTower.children,e=0;e<t.length;e++)t[e].getComponent(cc.Toggle).isChecked=!1},e.prototype.setUpBtnClickTower=function(){this.btnSell.active=!0,this.listBtnTower.active=!1,this.setRangeTower(!0),this.setPrice(this.btnSell,this.target.data.price),this.checkUpTower(),this.setActiveBtnTower(),this.checkBtnUp()},e.prototype.setUpBtnClickPoint=function(){this.btnUp.active=!1,this.btnSell.active=!1,this.listBtnTower.active=!0;for(var t=this.listBtnTower.children,e=0;e<t.length;e++){var o=t[e];switch(o.name){case"mage":this.setPrice(o,this.listMageTower[0].price);break;case"golem":this.setPrice(o,this.listGolemTower[0].price);break;case"barrack":this.setPrice(o,this.listBarrackTower[0].price);break;case"archer":this.setPrice(o,this.listArcherTower[0].price)}}},e.prototype.setActiveBtnTower=function(){switch(this.target.type){case a.TYPE.TOWER:this.btnUp.getComponent(cc.Button).interactable=this.target.data.price<=cc.Global.GAME.money,this.btnUp.getChildByName("off").active=!(this.target.data.price<=cc.Global.GAME.money),this.btnUp.getChildByName("price").color=this.target.data.price<=cc.Global.GAME.money?cc.Color.YELLOW:cc.Color.GRAY;break;case a.TYPE.POINT:for(var t=this.listBtnTower.children,e=0;e<t.length;e++){var o=t[e];switch(o.name){case"mage":o.getChildByName("off").active=!(this.listMageTower[0].price<=cc.Global.GAME.money),o.getChildByName("price").color=this.listMageTower[0].price<=cc.Global.GAME.money?cc.Color.YELLOW:cc.Color.GRAY,o.getComponent(cc.Toggle).interactable=this.listMageTower[0].price<=cc.Global.GAME.money;break;case"golem":o.getChildByName("off").active=!(this.listGolemTower[0].price<=cc.Global.GAME.money),o.getChildByName("price").color=this.listGolemTower[0].price<=cc.Global.GAME.money?cc.Color.YELLOW:cc.Color.GRAY,o.getComponent(cc.Toggle).interactable=this.listGolemTower[0].price<=cc.Global.GAME.money;break;case"barrack":o.getChildByName("off").active=!(this.listBarrackTower[0].price<=cc.Global.GAME.money),o.getChildByName("price").color=this.listBarrackTower[0].price<=cc.Global.GAME.money?cc.Color.YELLOW:cc.Color.GRAY,o.getComponent(cc.Toggle).interactable=this.listBarrackTower[0].price<=cc.Global.GAME.money;break;case"archer":o.getChildByName("off").active=!(this.listArcherTower[0].price<=cc.Global.GAME.money),o.getChildByName("price").color=this.listArcherTower[0].price<=cc.Global.GAME.money?cc.Color.YELLOW:cc.Color.GRAY,o.getComponent(cc.Toggle).interactable=this.listArcherTower[0].price<=cc.Global.GAME.money}}}},e.prototype.checkBtnUp=function(){this.btnUp.active=!0;var t=this.btnUp.getComponent(cc.Sprite),e=this.btnUp.getComponent(cc.Button);cc.Global.GAME.map==l.LIST_MAP.MAP_1?(this.btnUp.getChildByName("off").active=!1,t.spriteFrame=this.btnUpFrameArr[1],e.interactable=!1,this.setPrice(this.btnUp,"---")):(t.spriteFrame=this.btnUpFrameArr[0],e.interactable=!0)},e.prototype.offChooseTower=function(){cc.Canvas.instance.node.emit(a.Constant.EVENT.HIDE_INFOR),this.towerNode.removeAllChildren(),this.node.active=!1,this.setRangeTower(!1)},e.prototype.setPrice=function(t,e){t.getChildByName("price").getComponent(cc.Label).string=String(e)},e.prototype.checkCanUp=function(){},e.prototype.setPos=function(t){this.node.setPosition(this.target.node.position.add(t))},e.prototype.setRangeTower=function(t){this.target&&this.target.isValid&&this.target.type==a.TYPE.TOWER&&this.target.setRangeSprite(t)},e.prototype.testTower=function(t){this.towerNode.removeAllChildren();var e=cc.instantiate(t);e.getComponent(r.default).isTest=!0,this.towerNode.addChild(e),e.setPosition(this.towerPos)},e.prototype.getTowerPos=function(){var t=this.node.convertToWorldSpaceAR(this.towerPos);return cc.Canvas.instance.node.convertToNodeSpaceAR(t)},e.prototype.checkUpTower=function(){for(var t=[this.listGolemTower,this.listMageTower,this.listArcherTower,this.listBarrackTower],e=0;e<t.length;e++){var o=t[e],n=o.indexOf(this.target.data);if(-1!==n){this.currTowerList=o,this.towerIndexInList=n,n+1<o.length?this.setPrice(this.btnUp,o[n+1].price):this.btnUp.active=!1;break}}},e.prototype.onBtnTower=function(t){var e;switch(t.node.name){case"mage":e=this.listMageTower[0];break;case"golem":e=this.listGolemTower[0];break;case"barrack":e=this.listBarrackTower[0];break;case"archer":e=this.listArcherTower[0]}var o=cc.Global.GAME.getPrefabByObj(e);t.isChecked?(cc.Canvas.instance.node.emit(a.Constant.EVENT.SHOW_INFOR,e),this.testTower(o)):(cc.Canvas.instance.node.emit(a.Constant.EVENT.OFF_CHOOSE_TOWER),cc.Canvas.instance.node.emit(a.Constant.EVENT.SET_MONEY,-e.price),cc.Global.GAME.createTower(o,this.getTowerPos()),this.target.node.destroy(),cc.Canvas.instance.node.emit(a.Constant.EVENT.HIDE_INFOR))},e.prototype.onBtnSell=function(){cc.Canvas.instance.node.emit(a.Constant.EVENT.OFF_CHOOSE_TOWER),cc.Canvas.instance.node.emit(a.Constant.EVENT.SET_MONEY,this.target.data.price),cc.Global.GAME.createPoint(this.getTowerPos().add(cc.v3(0,20))),this.target.node.destroy()},e.prototype.onBtnUp=function(){var t=this.currTowerList[this.towerIndexInList+1];cc.Canvas.instance.node.emit(a.Constant.EVENT.OFF_CHOOSE_TOWER),cc.Canvas.instance.node.emit(a.Constant.EVENT.SET_MONEY,-t.price);var e=cc.Global.GAME.getPrefabByObj(t);cc.Global.GAME.createTower(e,this.getTowerPos().add(cc.v3(0,-20))),this.target.node.destroy()},c([d(cc.Node)],e.prototype,"towerNode",void 0),c([d(cc.Node)],e.prototype,"listBtnTower",void 0),c([d(cc.Node)],e.prototype,"btnUp",void 0),c([d(cc.Node)],e.prototype,"btnSell",void 0),c([d(cc.SpriteFrame)],e.prototype,"btnUpFrameArr",void 0),c([u],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../EW_1_1/Constant_1_1":"Constant_1_1","../EW_1_1/Tower":"Tower","../EW_1_1/TowerData":"TowerData","./MapData":"MapData"}],Circle:[function(t,e,o){"use strict";cc._RF.push(e,"72ac7N7lJtE1L0Rt1l83rJ7","Circle");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,r=a.ccclass,s=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.start=function(){},e.prototype.finish=function(){this.node.destroy()},c([r],e)}(cc.Component));o.default=s,cc._RF.pop()},{}],Constant_1_1:[function(t,e,o){"use strict";cc._RF.push(e,"4d914u+mj9MnoM1+HISjPJp","Constant_1_1"),Object.defineProperty(o,"__esModule",{value:!0}),o.CAMERA_DATA=o.CAMERA_ACTION=o.ATTACK_TYPE=o.TYPE=o.DIRECTION=o.Constant=void 0,o.Constant={EVENT:{HAND_GUIDE_HERO_MOVE_TO_BOSS:"HAND_GUIDE_HERO_MOVE_TO_BOSS",HAND_HIDE_DEFAULT:"HAND_HIDE_DEFAULT",END_GAME:"END_GAME",ENEMY_DIE:"ENEMY_DIE",CLICK:"CLICK",GOLEM_IMPACT:"GOLEM_IMPACT",ARCHER_SHOOT:"ARCHER_SHOOT",TOWER_BUILD:"TOWER_BUILD",ON_CHOOSE_TOWER:"ON_CHOOSE_TOWER",OFF_CHOOSE_TOWER:"OFF_CHOOSE_TOWER",SET_MONEY:"SET_MONEY",IMPACT_CAMERA:"IMPACT_CAMERA",SHOW_INFOR:"SHOW_INFOR",HIDE_INFOR:"HIDE_INFOR",SET_WARNING:"SET_WARNING",START_WAY:"START_WAY",ENEMY_FINISH:"ENEMY_FINISH",CHOOSE_TOWER_SET_ACTIVE_BUTTON:"CHOOSE_TOWER_SET_ACTIVE_BUTTON",ENABLE_RANGE:"ENABLE_RANGE",PAUSE_ENEMY_ANIM_WAY:"PAUSE_ENEMY_ANIM_WAY",SUMMON_MINION:"SUMMON_MINION",ENEMY_ESCAPE:"ENEMY_ESCAPE",CHECK_VALID_CARD:"CHECK_VALID_CARD",CAMERA_SHAKE:"CAMERA_SHAKE",CAMERA_MOVE:"CAMERA_MOVE",PLAYER_RUN:"PLAYER_RUN",PLAYER_IDLE:"PLAYER_IDLE",PLAYER_ATTACK:"PLAYER_ATTACK",PLAYER_SKILL:"PLAYER_SKILL"},ANIMATION_SPEED:.2,LIST_ENEMY_ZINDEX:10,GAME_ZINDEX:17,LIST_TOWER_ZINDEX:21,SHADOW_ZINDEX:20,UI_ZINDEX:cc.macro.MAX_ZINDEX-1,EFFECT_DOWN_ZINDEX:9,EFFECT_UP_ZINDEX:23,SKILL_ZINDEX:22,CHOOSE_TOWER_ZINDEX:24,TOWER_FRONT_STONE_ZINDEX:cc.macro.MAX_ZINDEX-1,TOWER_ZINDEX:cc.macro.MAX_ZINDEX-2,TOWER_FRONT_BULLET_ZINDEX:cc.macro.MAX_ZINDEX,TOWER_BACK_BULLET_ZINDEX:cc.macro.MAX_ZINDEX-3},function(t){t[t.LEFT=0]="LEFT",t[t.RIGHT=1]="RIGHT",t[t.TOP=2]="TOP",t[t.BOTTOM=3]="BOTTOM"}(o.DIRECTION||(o.DIRECTION={})),function(t){t[t.DEFAULT=0]="DEFAULT",t[t.ENEMY=1]="ENEMY",t[t.TOWER=2]="TOWER",t[t.BULLET=3]="BULLET",t[t.BULLET_EFFECT=4]="BULLET_EFFECT",t[t.MINION=5]="MINION",t[t.POINT=6]="POINT"}(o.TYPE||(o.TYPE={})),function(t){t[t.DEFAULT=0]="DEFAULT",t[t.SLOW=1]="SLOW",t[t.FREEZE=2]="FREEZE"}(o.ATTACK_TYPE||(o.ATTACK_TYPE={})),function(t){t[t.TYPE_0=0]="TYPE_0",t[t.TYPE_1=1]="TYPE_1",t[t.TYPE_2=2]="TYPE_2",t[t.TYPE_3=3]="TYPE_3",t[t.TYPE_4=4]="TYPE_4",t[t.TYPE_5=5]="TYPE_5",t[t.TYPE_6=6]="TYPE_6"}(o.CAMERA_ACTION||(o.CAMERA_ACTION={}));o.CAMERA_DATA=function(t,e,o,n,i){this.setPos=cc.v3(),this.setZoom=1,this.movePos=cc.v3(),this.moveZoom=1,this.moveTime=0,this.setPos=t,this.setZoom=e,this.movePos=o,this.moveZoom=n,this.moveTime=i},cc._RF.pop()},{}],Controller:[function(t,e,o){"use strict";cc._RF.push(e,"39313XqvtdG2oiPtodBJE7N","Controller");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./EW_1_1/Constant_1_1"),r=cc._decorator,s=r.ccclass,l=r.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.Joystick=null,e.guide=null,e.Max_r=100,e.isStop=!1,e.startJoystickPos=null,e.direction=null,e}return i(e,t),e.prototype.start=function(){this.startJoystickPos=this.node.parent.convertToWorldSpaceAR(this.node.position),this.Joystick.x=0,this.Joystick.y=0,this.dir=cc.v2(0,0),this.Joystick.on(cc.Node.EventType.TOUCH_START,function(t){var e=t.getLocation(),o=e.x>Math.abs(this.startJoystickPos.x)?1:-1,n=e.y>Math.abs(this.startJoystickPos.y)?1:-1;console.log(e.y);var i=e.add(cc.v2(1e3*o,1e3*n)),c=this.node.convertToNodeSpaceAR(i),r=c.mag();this.dir.x=c.x/r,this.dir.y=c.y/r,r>this.Max_r&&(c.x=this.Max_r*c.x/r+30*o,c.y=this.Max_r*c.y/r+30*n),this.Joystick.setPosition(c),cc.Canvas.instance.node.emit(a.Constant.EVENT.PLAYER_RUN)},this),this.Joystick.on(cc.Node.EventType.TOUCH_MOVE,function(t){var e=t.getLocation(),o=e.x>Math.abs(this.startJoystickPos.x)?1:-1,n=e.x>Math.abs(this.startJoystickPos.y)?1:-1,i=e.add(cc.v2(1e3*o,1e3*n)),c=this.node.convertToNodeSpaceAR(i),a=c.mag();this.dir.x=c.x/a,this.dir.y=c.y/a,a>this.Max_r&&(c.x=this.Max_r*c.x/a+30*o,c.y=this.Max_r*c.y/a+30*n),this.Joystick.setPosition(c)},this),this.Joystick.on(cc.Node.EventType.TOUCH_END,function(){this.Joystick.setPosition(cc.v2(0,0)),this.dir=cc.v2(0,0),cc.Canvas.instance.node.emit(a.Constant.EVENT.PLAYER_IDLE)},this),this.Joystick.on(cc.Node.EventType.TOUCH_CANCEL,function(){this.Joystick.setPosition(cc.v2(0,0)),this.dir=cc.v2(0,0),cc.Canvas.instance.node.emit(a.Constant.EVENT.PLAYER_IDLE)},this)},c([l(cc.Node)],e.prototype,"Joystick",void 0),c([l(cc.Node)],e.prototype,"guide",void 0),c([l()],e.prototype,"Max_r",void 0),c([s],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./EW_1_1/Constant_1_1":"Constant_1_1"}],DataService:[function(t,e,o){"use strict";cc._RF.push(e,"a22c5ygSj1PXYhU5iTNBgI+","DataService"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(){}return t.prototype.getValue=function(t){if(!cc.Global.instant)return new Promise(function(e){e(cc.sys.localStorage.getItem(t))});FBInstant.player.getDataAsync([t]).then(function(e){return e[t]})},t.prototype.saveUser=function(t){cc.Global.instant?FBInstant.player.setDataAsync({user:JSON.stringify(t)}).then(function(){cc.log("data is set")}):cc.sys.localStorage.setItem("user",JSON.stringify(t))},t.prototype.getUser=function(){return cc.Global.instant?FBInstant.player.getDataAsync(["user"]).then(function(t){return t.user?JSON.parse(t.user):{}}):new Promise(function(t){t(JSON.parse(cc.sys.localStorage.getItem("user")||"{}"))})},t.prototype.getValues=function(t){return cc.Global.instant?FBInstant.player.getDataAsync(t).then(function(t){return t}):new Promise(function(e){for(var o=[],n=0,i=t;n<i.length;n++){var c=i[n];o[c]=cc.sys.localStorage.getItem(c)}e(o)})},t.prototype.setValue=function(t,e){cc.Global.instant?FBInstant.player.setDataAsync({key:e}).then(function(){cc.log("data is set")}):cc.sys.localStorage.setItem(t,e)},t.prototype.setValues=function(t){if(cc.Global.instant)FBInstant.player.setDataAsync(t).then(function(){cc.log("data is set")});else for(var e=0,o=Object.keys(t);e<o.length;e++){var n=o[e];cc.sys.localStorage.setItem(n,t[n])}},t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t}();o.DataService=n,cc._RF.pop()},{}],DestinationListener:[function(t,e,o){"use strict";cc._RF.push(e,"f7e16gBgzdMtJGXJIFFeKhe","DestinationListener");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./Constant_1_1"),r=t("./EnemyListener"),s=cc._decorator,l=s.ccclass,p=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.className=null,e}return i(e,t),e.prototype.start=function(){this.className=this.__classname__},e.prototype.onCollisionEnter=function(t,e){this.enemyFinish(t,e)},e.prototype.onCollisionExit=function(){},e.prototype.enemyFinish=function(t){var e=t.node.getComponent(r.default);e&&e.enemy.type==a.TYPE.ENEMY&&(e.enemy.node.active=!1,cc.Canvas.instance.node.emit(a.Constant.EVENT.ENEMY_FINISH))},c([l],e)}(cc.Component));o.default=p,cc._RF.pop()},{"./Constant_1_1":"Constant_1_1","./EnemyListener":"EnemyListener"}],DestinationWKListener:[function(t,e,o){"use strict";cc._RF.push(e,"b73e8shLlNFnrq8vMMHhuBr","DestinationWKListener");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../EW_1_1/Constant_1_1"),r=t("../EW_1_1/EnemyListener"),s=t("../EW_1_1/Enemy"),l=cc._decorator,p=l.ccclass,u=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.className=null,e.countHp=3,e}return i(e,t),e.prototype.start=function(){this.className=this.__classname__},e.prototype.onCollisionEnter=function(t,e){this.enemyFinish(t,e)},e.prototype.onCollisionExit=function(){},e.prototype.enemyFinish=function(t){var e=t.node.getComponent(r.default);if(e&&e.enemy.getComponent(s.default).type==a.TYPE.ENEMY){e.enemy.getComponent(s.default).isBoss&&cc.Canvas.instance.node.emit(a.Constant.EVENT.END_GAME,!1);var o=e.enemy.getComponent(s.default).node;cc.Canvas.instance.node.emit(a.Constant.EVENT.ENEMY_DIE),o.destroy(),this.countHp--,this.countHp<=0&&cc.Canvas.instance.node.emit(a.Constant.EVENT.END_GAME,!1)}},c([p],e)}(cc.Component));o.default=u,cc._RF.pop()},{"../EW_1_1/Constant_1_1":"Constant_1_1","../EW_1_1/Enemy":"Enemy","../EW_1_1/EnemyListener":"EnemyListener"}],DialogService:[function(t,e,o){"use strict";cc._RF.push(e,"fa608R0BG5H8K8HhfOJ8ekY","DialogService");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,r=a.ccclass,s=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.levelNum=-1,e}var o;return i(e,t),o=e,e.prototype.spawn=function(t){var e=cc.instantiate(t);return e.parent=cc.Canvas.instance.node,e.x=0,e.y=0,e},e.prototype.onDialog=function(t){this.dialogNode=this.spawn(t),this.dialogNode.runAction(cc.spawn(cc.fadeIn(.5),cc.scaleTo(.5,1)))},e.prototype.offDialog=function(){var t=this;this.dialogNode.runAction(cc.sequence(cc.spawn(cc.fadeOut(.3),cc.scaleTo(.3,0)),cc.callFunc(function(){t.dialogNode.destroy()})))},e.prototype.chooseLevelNum=function(t){this.levelNum=t},e.prototype.resultLevelNum=function(){return this.levelNum},e.getInstance=function(){return o.instance||(o.instance=new o),o.instance},o=c([r],e)}(cc.Component));o.default=s,cc._RF.pop()},{}],EW_1_1:[function(t,e,o){"use strict";cc._RF.push(e,"271e2DjO5xFVKxb2SwdNUND","EW_1_1");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./Constant_1_1"),r=t("./Enemy"),s=t("./Tower"),l=cc._decorator,p=l.ccclass,u=l.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.game=null,e.ui=null,e.enemyPrefab=null,e.bossPrefab=null,e.golemPrefab=null,e.magePrefab=null,e.galioPrefab=null,e.federycPrefab=null,e.summonToggle=null,e.hand=null,e.endGame=null,e.warning=null,e.popup=null,e.logo=null,e.moneyLabel=null,e.bg=null,e.click=null,e.golem_impact=null,e.boss=null,e.federyc=null,e.isEndGame=!1,e.totalEnemy=0,e.countEnemy=0,e.money=240,e}return i(e,t),e.prototype.onLoad=function(){cc.director.getCollisionManager().enabled=!0,this.endGame.active=!1,this.setZIndex(),cc.Canvas.instance.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),cc.Canvas.instance.node.on(a.Constant.EVENT.HAND_GUIDE_HERO_MOVE_TO_BOSS,this.onHandGuideHeroMoveToBoss,this),cc.Canvas.instance.node.on(a.Constant.EVENT.HAND_HIDE_DEFAULT,this.onHandHideDefault,this),cc.Canvas.instance.node.on(a.Constant.EVENT.END_GAME,this.onEndGame,this),cc.Canvas.instance.node.on(a.Constant.EVENT.CLICK,this.onClick,this),cc.Canvas.instance.node.on(a.Constant.EVENT.ENEMY_DIE,this.onEnemyDie,this),cc.Canvas.instance.node.on(a.Constant.EVENT.GOLEM_IMPACT,this.onGolemImpact,this),this.onBackground(),this.schedule(function(){this.sortZIndex()}.bind(this),.1)},e.prototype.start=function(){this.createTower(this.magePrefab,cc.v3(-291,140)),this.createTower(this.magePrefab,cc.v3(171,171)),this.createTower(this.golemPrefab,cc.v3(290,-67)),this.createTower(this.golemPrefab,cc.v3(-270,-110)),this.createTower(this.magePrefab,cc.v3(4,-135)),this.createMinion(this.federycPrefab,cc.v3(0,71));for(var t=0;t<8;t++)this.scheduleOnce(function(){this.createEnemy(this.enemyPrefab,"way")}.bind(this),1.3*t);for(t=0;t<8;t++)this.scheduleOnce(function(){this.createEnemy(this.enemyPrefab,"way1")}.bind(this),1.3*t);for(t=0;t<8;t++)this.scheduleOnce(function(){this.createEnemy(this.enemyPrefab,"way2")}.bind(this),1.3*t);for(t=0;t<8;t++)this.scheduleOnce(function(){this.createEnemy(this.enemyPrefab,"way")}.bind(this),1.3*t+10);for(t=0;t<8;t++)this.scheduleOnce(function(){this.createEnemy(this.enemyPrefab,"way1")}.bind(this),1.3*t+10);for(t=0;t<8;t++)this.scheduleOnce(function(){this.createEnemy(this.enemyPrefab,"way1")}.bind(this),1.3*t+20);for(t=0;t<8;t++)this.scheduleOnce(function(){this.createEnemy(this.enemyPrefab,"way2")}.bind(this),1.3*t+10);this.scheduleOnce(function(){this.createEnemy(this.bossPrefab,"way"),this.federyc&&this.federyc.isValid&&this.showHand(this.federyc.position.add(cc.v3(0,30)))}.bind(this),6),this.totalEnemy=57,this.scheduleOnce(function(){this.warning.runAction(cc.fadeOut(.5))}.bind(this),3)},e.prototype.setMoney=function(){this.money+=120,this.moneyLabel.string=String(this.money)},e.prototype.onEnemyDie=function(){this.countEnemy++,this.setMoney(),!this.isEndGame&&this.countEnemy>=this.totalEnemy&&(this.isEndGame=!0,this.onEndGame())},e.prototype.onBackground=function(){cc.audioEngine.play(this.bg,!0,.9)},e.prototype.onClick=function(){cc.audioEngine.play(this.click,!1,1)},e.prototype.onGolemImpact=function(){cc.audioEngine.play(this.golem_impact,!1,1)},e.prototype.onTouchStart=function(t){if(this.summonToggle.isChecked){cc.Canvas.instance.node.emit(a.Constant.EVENT.CLICK),this.summonToggle.uncheck();var e=cc.Canvas.instance.node.convertToNodeSpaceAR(t.getLocation());this.createMinion(this.galioPrefab,e),this.showHand(cc.v3(9999,9999))}},e.prototype.setZIndex=function(){this.game.zIndex=a.Constant.GAME_ZINDEX,this.ui.zIndex=a.Constant.UI_ZINDEX,this.hand.zIndex=cc.macro.MAX_ZINDEX-2,this.endGame.zIndex=cc.macro.MAX_ZINDEX-1,this.logo.zIndex=cc.macro.MAX_ZINDEX},e.prototype.createEnemy=function(t,e){void 0===e&&(e="way");var o=cc.instantiate(t);this.game.addChild(o),o.setPosition(cc.v3(9999,9999)),o.getComponent(r.default).setWay(e),t==this.bossPrefab&&(this.boss=o)},e.prototype.createTower=function(t,e){var o=cc.instantiate(t);o.setPosition(e),this.game.addChild(o),o.getComponent(s.default)},e.prototype.createMinion=function(t,e){var o=cc.instantiate(t);this.game.addChild(o),o.setPosition(e),t==this.federycPrefab&&(this.federyc=o)},e.prototype.onEndGame=function(){this.endGame.active=!0,this.endGame.opacity=0,this.endGame.runAction(cc.fadeIn(.5));var t=cc.v2(this.popup.position.x,this.popup.position.y);this.popup.setPosition(this.popup.position.add(cc.v3(0,400))),this.popup.runAction(cc.moveTo(.8,t))},e.prototype.onClickSummon=function(){cc.Canvas.instance.node.emit(a.Constant.EVENT.CLICK),this.boss&&this.boss.isValid&&this.showHand(this.boss.position.add(cc.v3(0,30)))},e.prototype.onHandGuideHeroMoveToBoss=function(){this.showHand(cc.v3(150,-200))},e.prototype.onHandHideDefault=function(){this.showHand(cc.v3(9999,9999)),this.scheduleOnce(function(){this.showHand(this.summonToggle.node.position)}.bind(this),3)},e.prototype.showHand=function(t){this.hand.position=t},e.prototype.sortZIndex=function(){var t=this.game.children;t=t.filter(function(t){return t.isValid});var e=this.quickSort(t);e=e.reverse();for(var o=0;o<e.length;o++)e[o].zIndex=o},e.prototype.quickSort=function(t){if(t.length<2)return t;for(var e=t.length-1,o=t[e].y,n=[],i=[],c=0;c<e;c++)t[c].y<o?n.push(t[c]):i.push(t[c]);return this.quickSort(n).concat([t[e]],this.quickSort(i))},c([u(cc.Node)],e.prototype,"game",void 0),c([u(cc.Node)],e.prototype,"ui",void 0),c([u(cc.Prefab)],e.prototype,"enemyPrefab",void 0),c([u(cc.Prefab)],e.prototype,"bossPrefab",void 0),c([u(cc.Prefab)],e.prototype,"golemPrefab",void 0),c([u(cc.Prefab)],e.prototype,"magePrefab",void 0),c([u(cc.Prefab)],e.prototype,"galioPrefab",void 0),c([u(cc.Prefab)],e.prototype,"federycPrefab",void 0),c([u(cc.Toggle)],e.prototype,"summonToggle",void 0),c([u(cc.Node)],e.prototype,"hand",void 0),c([u(cc.Node)],e.prototype,"endGame",void 0),c([u(cc.Node)],e.prototype,"warning",void 0),c([u(cc.Node)],e.prototype,"popup",void 0),c([u(cc.Node)],e.prototype,"logo",void 0),c([u(cc.Label)],e.prototype,"moneyLabel",void 0),c([u({type:cc.AudioClip})],e.prototype,"bg",void 0),c([u({type:cc.AudioClip})],e.prototype,"click",void 0),c([u({type:cc.AudioClip})],e.prototype,"golem_impact",void 0),c([p],e)}(cc.Component);o.default=d,cc._RF.pop()},{"./Constant_1_1":"Constant_1_1","./Enemy":"Enemy","./Tower":"Tower"}],EW_1:[function(t,e,o){"use strict";cc._RF.push(e,"faf8aNtE2hBqaNw3tZLVSqx","EW_1");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../EW_1_1/Constant_1_1"),r=t("../EW_1_1/Enemy"),s=t("../EW_1_1/Tower"),l=cc._decorator,p=l.ccclass,u=l.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.game=null,e.ui=null,e.enemyPrefab=null,e.swordManPrefab=null,e.bossPrefab=null,e.golemPrefab=null,e.magePrefab=null,e.federycPrefab=null,e.arrynPrefab=null,e.hand=null,e.endGame=null,e.warning=null,e.popup=null,e.logo=null,e.moneyLabel=null,e.bg=null,e.click=null,e.golem_impact=null,e.boss=null,e.federyc=null,e.arryn=null,e.isEndGame=!1,e.totalEnemy=0,e.countEnemy=0,e.money=240,e.countHand=0,e}return i(e,t),e.prototype.onLoad=function(){cc.director.getCollisionManager().enabled=!0,this.endGame.active=!1,this.setZIndex(),cc.Canvas.instance.node.on(a.Constant.EVENT.HAND_GUIDE_HERO_MOVE_TO_BOSS,this.onHandGuideHeroMoveToBoss,this),cc.Canvas.instance.node.on(a.Constant.EVENT.HAND_HIDE_DEFAULT,this.onHandHideDefault,this),cc.Canvas.instance.node.on(a.Constant.EVENT.END_GAME,this.onEndGame,this),cc.Canvas.instance.node.on(a.Constant.EVENT.CLICK,this.onClick,this),cc.Canvas.instance.node.on(a.Constant.EVENT.ENEMY_DIE,this.onEnemyDie,this),cc.Canvas.instance.node.on(a.Constant.EVENT.GOLEM_IMPACT,this.onGolemImpact,this),this.onBackground(),this.schedule(function(){this.sortZIndex()}.bind(this),.1)},e.prototype.start=function(){this.createTower(this.magePrefab,cc.v3(-291,140)),this.createTower(this.magePrefab,cc.v3(350,-30)),this.createTower(this.golemPrefab,cc.v3(230,140)),this.createTower(this.golemPrefab,cc.v3(-300,-110)),this.createTower(this.magePrefab,cc.v3(4,-135)),this.createMinion(this.federycPrefab,cc.v3(0,0)),this.createMinion(this.arrynPrefab,cc.v3(0,120));for(var t=0;t<8;t++)this.scheduleOnce(function(){this.createEnemy(this.swordManPrefab,"way")}.bind(this),1.3*t);for(t=0;t<8;t++)this.scheduleOnce(function(){this.createEnemy(this.swordManPrefab,"way1")}.bind(this),1.3*t);for(t=0;t<8;t++)this.scheduleOnce(function(){this.createEnemy(this.swordManPrefab,"way2")}.bind(this),1.3*t);for(t=0;t<8;t++)this.scheduleOnce(function(){this.createEnemy(this.enemyPrefab,"way")}.bind(this),1.3*t+10);for(t=0;t<8;t++)this.scheduleOnce(function(){this.createEnemy(this.enemyPrefab,"way1")}.bind(this),1.3*t+10);for(t=0;t<8;t++)this.scheduleOnce(function(){this.createEnemy(this.enemyPrefab,"way1")}.bind(this),1.3*t+20);for(t=0;t<8;t++)this.scheduleOnce(function(){this.createEnemy(this.enemyPrefab,"way2")}.bind(this),1.3*t+10);this.scheduleOnce(function(){this.createEnemy(this.bossPrefab,"way"),this.federyc&&this.federyc.isValid&&this.showHand(this.federyc.position.add(cc.v3(0,30)))}.bind(this),6),this.totalEnemy=57,this.scheduleOnce(function(){this.warning.runAction(cc.fadeOut(.5))}.bind(this),3)},e.prototype.setMoney=function(){this.money+=120,this.moneyLabel.string=String(this.money)},e.prototype.onEnemyDie=function(){this.countEnemy++,this.setMoney(),!this.isEndGame&&this.countEnemy>=this.totalEnemy&&(this.isEndGame=!0,this.onEndGame())},e.prototype.onBackground=function(){cc.audioEngine.play(this.bg,!0,.9)},e.prototype.onClick=function(){cc.audioEngine.play(this.click,!1,1)},e.prototype.onGolemImpact=function(){cc.audioEngine.play(this.golem_impact,!1,1)},e.prototype.setZIndex=function(){this.game.zIndex=a.Constant.GAME_ZINDEX,this.ui.zIndex=a.Constant.UI_ZINDEX,this.hand.zIndex=cc.macro.MAX_ZINDEX-2,this.endGame.zIndex=cc.macro.MAX_ZINDEX-1,this.logo.zIndex=cc.macro.MAX_ZINDEX},e.prototype.createEnemy=function(t,e){void 0===e&&(e="way");var o=cc.instantiate(t);this.game.addChild(o),o.setPosition(cc.v3(9999,9999)),o.getComponent(r.default).setWay(e),t==this.bossPrefab&&(this.boss=o)},e.prototype.createTower=function(t,e){var o=cc.instantiate(t);o.setPosition(e),this.game.addChild(o),o.getComponent(s.default)},e.prototype.createMinion=function(t,e){var o=cc.instantiate(t);this.game.addChild(o),o.setPosition(e),t==this.federycPrefab&&(this.federyc=o),t==this.arrynPrefab&&(this.arryn=o)},e.prototype.onEndGame=function(){this.endGame.active=!0,this.endGame.opacity=0,this.endGame.runAction(cc.fadeIn(.5));var t=cc.v2(this.popup.position.x,this.popup.position.y);this.popup.setPosition(this.popup.position.add(cc.v3(0,400))),this.popup.runAction(cc.moveTo(.8,t))},e.prototype.onHandGuideHeroMoveToBoss=function(){this.countHand++,this.countHand>2?this.showHand(cc.v3(9999,9999)):this.showHand(cc.v3(270,-130))},e.prototype.onHandHideDefault=function(){this.showHand(cc.v3(9999,9999)),this.scheduleOnce(function(){this.countHand>1?this.showHand(cc.v3(9999,9999)):this.arryn&&this.arryn.isValid&&this.showHand(this.arryn.position.add(cc.v3(0,30)))}.bind(this),3)},e.prototype.showHand=function(t){this.hand.position=t},e.prototype.sortZIndex=function(){var t=this.game.children;t=t.filter(function(t){return t.isValid});var e=this.quickSort(t);e=e.reverse();for(var o=0;o<e.length;o++)e[o].zIndex=o},e.prototype.quickSort=function(t){if(t.length<2)return t;for(var e=t.length-1,o=t[e].y,n=[],i=[],c=0;c<e;c++)t[c].y<o?n.push(t[c]):i.push(t[c]);return this.quickSort(n).concat([t[e]],this.quickSort(i))},c([u(cc.Node)],e.prototype,"game",void 0),c([u(cc.Node)],e.prototype,"ui",void 0),c([u(cc.Prefab)],e.prototype,"enemyPrefab",void 0),c([u(cc.Prefab)],e.prototype,"swordManPrefab",void 0),c([u(cc.Prefab)],e.prototype,"bossPrefab",void 0),c([u(cc.Prefab)],e.prototype,"golemPrefab",void 0),c([u(cc.Prefab)],e.prototype,"magePrefab",void 0),c([u(cc.Prefab)],e.prototype,"federycPrefab",void 0),c([u(cc.Prefab)],e.prototype,"arrynPrefab",void 0),c([u(cc.Node)],e.prototype,"hand",void 0),c([u(cc.Node)],e.prototype,"endGame",void 0),c([u(cc.Node)],e.prototype,"warning",void 0),c([u(cc.Node)],e.prototype,"popup",void 0),c([u(cc.Node)],e.prototype,"logo",void 0),c([u(cc.Label)],e.prototype,"moneyLabel",void 0),c([u({type:cc.AudioClip})],e.prototype,"bg",void 0),c([u({type:cc.AudioClip})],e.prototype,"click",void 0),c([u({type:cc.AudioClip})],e.prototype,"golem_impact",void 0),c([p],e)}(cc.Component);o.default=d,cc._RF.pop()},{"../EW_1_1/Constant_1_1":"Constant_1_1","../EW_1_1/Enemy":"Enemy","../EW_1_1/Tower":"Tower"}],EW_3:[function(t,e,o){"use strict";cc._RF.push(e,"c55ccaH6oRGH6OsJdP/TSfA","EW_3");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../EW_1_1/Constant_1_1"),r=t("../EW_1_1/Enemy"),s=t("../EW_1_1/TowerData"),l=t("../FB_INSTANT/ChooseTower"),p=cc._decorator,u=p.ccclass,d=p.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.game=null,e.ui=null,e.enemyPrefab=null,e.iceTrollThrowerPrefab=null,e.marakkPrefab=null,e.bossPrefab=null,e.golemPrefab=null,e.golemBluePrefab=null,e.golem1Prefab=null,e.golem2Prefab=null,e.golem3Prefab=null,e.magePrefab=null,e.galioPrefab=null,e.federycPrefab=null,e.minion5Prefab=null,e.summonToggle=null,e.hand=null,e.endGame=null,e.warning=null,e.popup=null,e.logo=null,e.moneyLabel=null,e.bg=null,e.click=null,e.victory=null,e.golem_impact=null,e.pointPrefab=null,e.chooseTowerPrefab=null,e.camera=null,e.btnUpdate=null,e.shadow=null,e.guide=null,e.win=null,e.lose=null,e.boss=null,e.federyc=null,e.isEndGame=!1,e.totalEnemy=0,e.countEnemy=0,e.money=240,e.towerTarget=null,e.countTower=0,e.towerTargetPos=cc.v3(-80,210),e}return i(e,t),e.prototype.onLoad=function(){cc.Global.GAME=this,cc.director.getCollisionManager().enabled=!0,this.endGame.active=!1,this.setZIndex(),cc.Canvas.instance.node.on(a.Constant.EVENT.END_GAME,this.onEndGame,this),cc.Canvas.instance.node.on(a.Constant.EVENT.CLICK,this.onClick,this),cc.Canvas.instance.node.on(a.Constant.EVENT.ENEMY_DIE,this.onEnemyDie,this),cc.Canvas.instance.node.on(a.Constant.EVENT.GOLEM_IMPACT,this.onGolemImpact,this),cc.Canvas.instance.node.on(a.Constant.EVENT.SET_MONEY,this.setMoney,this),cc.Canvas.instance.node.on(a.Constant.EVENT.IMPACT_CAMERA,this.onImpactCamera,this),this.onBackground(),this.schedule(function(){this.sortZIndex()}.bind(this),.1),this.guide.opacity=0,this.showBtnUpdate(!0),this.scheduleOnce(function(){this.guide.runAction(cc.fadeOut(1))}.bind(this),10)},e.prototype.start=function(){this.towerTarget=this.createTowerEW3(this.golem1Prefab),this.createTower2(this.golem1Prefab,cc.v3(-330,85)),this.createTower2(this.golem1Prefab,cc.v3(168,90)),this.createMinion(this.minion5Prefab,cc.v3(-130,345)),this.createMinion(this.minion5Prefab,cc.v3(-221,338)),this.createMinion(this.minion5Prefab,cc.v3(-170,293)),this.createEnemyWay(),this.scheduleOnce(function(){this.warning.runAction(cc.fadeOut(.5))}.bind(this),3)},e.prototype.showBtnUpdate=function(t){var e=t?1:-1,o=t?150:0,n=t?255:0;this.btnUpdate.runAction(cc.moveBy(.7,cc.v2(0,180*e))),this.shadow.zIndex=a.Constant.SHADOW_ZINDEX,this.shadow.runAction(cc.fadeTo(1,o)),this.guide.runAction(cc.fadeTo(1,n))},e.prototype.onChooseTower=function(t){var e=cc.Canvas.instance.node.getChildByName(this.chooseTowerPrefab.name);e?(e.active=!0,e.getComponent(l.default).setRangeTower(!1),e.getComponent(l.default).target=t):((e=cc.instantiate(this.chooseTowerPrefab)).getComponent(l.default).target=t,cc.Canvas.instance.node.addChild(e),e.zIndex=a.Constant.CHOOSE_TOWER_ZINDEX),e.getComponent(l.default).setUp()},e.prototype.createEnemyWay=function(){for(var t=0;t<3;t++)this.scheduleOnce(function(){this.createEnemy(this.iceTrollThrowerPrefab,"way")}.bind(this),2*t);this.scheduleOnce(function(){this.createEnemy(this.marakkPrefab,"way"),this.federyc&&this.federyc.isValid&&this.showHand(this.federyc.position.add(cc.v3(0,30)))}.bind(this),6),this.totalEnemy=4},e.prototype.onImpactCamera=function(){this.camera.runAction(cc.sequence(cc.moveBy(.1,cc.v2(0,20)),cc.moveBy(.2,cc.v2(0,-40)),cc.moveBy(.1,cc.v2(0,20))))},e.prototype.setMoney=function(t){void 0===t&&(t=0),this.money+=t},e.prototype.onEnemyDie=function(){this.countEnemy++,this.setMoney(10),!this.isEndGame&&this.countEnemy>=this.totalEnemy&&this.onEndGame(!0)},e.prototype.onBackground=function(){cc.audioEngine.play(this.bg,!0,.9)},e.prototype.onClick=function(){cc.Canvas.instance.node.emit(a.Constant.EVENT.OFF_CHOOSE_TOWER),cc.audioEngine.play(this.click,!1,1.4)},e.prototype.onGolemImpact=function(){cc.audioEngine.play(this.golem_impact,!1,1)},e.prototype.onTouchStart=function(t){if(this.summonToggle.isChecked){cc.Canvas.instance.node.emit(a.Constant.EVENT.CLICK),this.summonToggle.uncheck();var e=cc.Canvas.instance.node.convertToNodeSpaceAR(t.getLocation()).add(cc.v3(0,cc.Global.CAMERA_POS_Y));this.createMinion(this.galioPrefab,e),this.showHand(cc.v3(9999,9999))}},e.prototype.setZIndex=function(){this.game.zIndex=a.Constant.GAME_ZINDEX,this.ui.zIndex=a.Constant.UI_ZINDEX,this.hand.zIndex=cc.macro.MAX_ZINDEX-2,this.endGame.zIndex=cc.macro.MAX_ZINDEX-1,this.logo.zIndex=cc.macro.MAX_ZINDEX},e.prototype.createPoint=function(t){void 0===t&&(t=cc.v3());var e=cc.instantiate(this.pointPrefab);this.game.addChild(e),e.setPosition(t)},e.prototype.createEnemy=function(t,e){void 0===e&&(e="way");var o=cc.instantiate(t);t==this.marakkPrefab&&(o.getComponent(r.default).isBoss=!0),this.game.addChild(o),o.setPosition(cc.v3(9999,9999)),o.getComponent(r.default).setWay(e)},e.prototype.createTowerEW3=function(t){var e=cc.instantiate(t);return this.node.addChild(e,a.Constant.LIST_TOWER_ZINDEX),e.setPosition(this.towerTargetPos),this.countTower++,e},e.prototype.onBtnUpdate=function(){if(cc.Canvas.instance.node.emit(a.Constant.EVENT.CLICK),this.towerTarget)switch(this.towerTarget.destroy(),this.countTower){case 1:this.towerTarget=this.createTowerEW3(this.golem2Prefab);break;case 2:this.towerTarget=this.createTowerEW3(this.golemBluePrefab),this.btnUpdate.getComponent(cc.Button).interactable=!1,this.showBtnUpdate(!1)}},e.prototype.createTower=function(t,e){var o=cc.instantiate(t);return o.setPosition(e),this.game.addChild(o),o},e.prototype.createTower2=function(t,e){var o=cc.instantiate(t);return o.setPosition(e),o.zIndex=a.Constant.SHADOW_ZINDEX-1,this.node.addChild(o),o},e.prototype.createMinion=function(t,e){var o=cc.instantiate(t);this.game.addChild(o),o.setPosition(e),t==this.federycPrefab&&(this.federyc=o)},e.prototype.onEndGame=function(t){if(void 0===t&&(t=!1),!this.isEndGame){cc.audioEngine.play(this.victory,!1,1),this.win.active=t,this.lose.active=!t,this.isEndGame=!0,this.endGame.active=!0,this.endGame.opacity=0,this.endGame.runAction(cc.fadeIn(.5));var e=cc.v2(this.popup.position.x,this.popup.position.y);this.popup.setPosition(this.popup.position.add(cc.v3(0,400))),this.popup.runAction(cc.moveTo(.8,e))}},e.prototype.onClickSummon=function(){cc.Canvas.instance.node.emit(a.Constant.EVENT.CLICK),this.boss&&this.boss.isValid&&this.showHand(this.boss.position.add(cc.v3(0,30)))},e.prototype.onHandGuideHeroMoveToBoss=function(){this.showHand(cc.v3(150,-200))},e.prototype.onHandHideDefault=function(){this.showHand(cc.v3(9999,9999)),this.scheduleOnce(function(){this.showHand(this.summonToggle.node.position)}.bind(this),3)},e.prototype.showHand=function(){},e.prototype.getPrefabByObj=function(t){switch(t){case s.LIST_TOWER.GOLEM_1:return this.golem1Prefab;case s.LIST_TOWER.GOLEM_2:return this.golem2Prefab;case s.LIST_TOWER.GOLEM_3:return this.golem3Prefab;case s.LIST_TOWER.ANCIENT_OF_FIRE:return this.golemPrefab;case s.LIST_TOWER.ICE_PRIESTESS:return this.magePrefab}},e.prototype.sortZIndex=function(){var t=this.game.children;t=t.filter(function(t){return t.isValid});var e=this.quickSort(t);e=e.reverse();for(var o=0;o<e.length;o++)e[o].zIndex=o},e.prototype.quickSort=function(t){if(t.length<2)return t;for(var e=t.length-1,o=t[e].y,n=[],i=[],c=0;c<e;c++)t[c].y<o?n.push(t[c]):i.push(t[c]);return this.quickSort(n).concat([t[e]],this.quickSort(i))},c([d(cc.Node)],e.prototype,"game",void 0),c([d(cc.Node)],e.prototype,"ui",void 0),c([d(cc.Prefab)],e.prototype,"enemyPrefab",void 0),c([d(cc.Prefab)],e.prototype,"iceTrollThrowerPrefab",void 0),c([d(cc.Prefab)],e.prototype,"marakkPrefab",void 0),c([d(cc.Prefab)],e.prototype,"bossPrefab",void 0),c([d(cc.Prefab)],e.prototype,"golemPrefab",void 0),c([d(cc.Prefab)],e.prototype,"golemBluePrefab",void 0),c([d(cc.Prefab)],e.prototype,"golem1Prefab",void 0),c([d(cc.Prefab)],e.prototype,"golem2Prefab",void 0),c([d(cc.Prefab)],e.prototype,"golem3Prefab",void 0),c([d(cc.Prefab)],e.prototype,"magePrefab",void 0),c([d(cc.Prefab)],e.prototype,"galioPrefab",void 0),c([d(cc.Prefab)],e.prototype,"federycPrefab",void 0),c([d(cc.Prefab)],e.prototype,"minion5Prefab",void 0),c([d(cc.Toggle)],e.prototype,"summonToggle",void 0),c([d(cc.Node)],e.prototype,"hand",void 0),c([d(cc.Node)],e.prototype,"endGame",void 0),c([d(cc.Node)],e.prototype,"warning",void 0),c([d(cc.Node)],e.prototype,"popup",void 0),c([d(cc.Node)],e.prototype,"logo",void 0),c([d(cc.Label)],e.prototype,"moneyLabel",void 0),c([d({type:cc.AudioClip})],e.prototype,"bg",void 0),c([d({type:cc.AudioClip})],e.prototype,"click",void 0),c([d({type:cc.AudioClip})],e.prototype,"victory",void 0),c([d({type:cc.AudioClip})],e.prototype,"golem_impact",void 0),c([d(cc.Prefab)],e.prototype,"pointPrefab",void 0),c([d(cc.Prefab)],e.prototype,"chooseTowerPrefab",void 0),c([d(cc.Node)],e.prototype,"camera",void 0),c([d(cc.Node)],e.prototype,"btnUpdate",void 0),c([d(cc.Node)],e.prototype,"shadow",void 0),c([d(cc.Node)],e.prototype,"guide",void 0),c([d(cc.Node)],e.prototype,"win",void 0),c([d(cc.Node)],e.prototype,"lose",void 0),c([u],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../EW_1_1/Constant_1_1":"Constant_1_1","../EW_1_1/Enemy":"Enemy","../EW_1_1/TowerData":"TowerData","../FB_INSTANT/ChooseTower":"ChooseTower"}],EW_5:[function(t,e,o){"use strict";cc._RF.push(e,"ae48dqTM01CD7Mv+SBi44nH","EW_5");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../EW_1_1/Constant_1_1"),r=t("../EW_1_1/Enemy"),s=t("../EW_1_1/Tower"),l=t("../EW_1_1/TowerData"),p=t("../EW_5/ChooseTower_5"),u=t("../FB_INSTANT/Point"),d=cc._decorator,h=d.ccclass,f=d.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.game=null,e.ui=null,e.enemyPrefab=null,e.iceTrollThrowerPrefab=null,e.orcPrefab=null,e.marakkPrefab=null,e.bossPrefab=null,e.golemPrefab=null,e.golemBluePrefab=null,e.golem1Prefab=null,e.golem2Prefab=null,e.golem3Prefab=null,e.magePrefab=null,e.barrack1Prefab=null,e.archer1Prefab=null,e.galioPrefab=null,e.federycPrefab=null,e.minion1Prefab=null,e.minion5Prefab=null,e.summonToggle=null,e.hand=null,e.hand2=null,e.endGame=null,e.warning=null,e.popup=null,e.logo=null,e.moneyLabel=null,e.bg=null,e.click=null,e.victory=null,e.golem_impact=null,e.tower_build=null,e.archer_shoot=null,e.pointPrefab=null,e.chooseTowerPrefab=null,e.camera=null,e.btnUpdate=null,e.shadow=null,e.guide=null,e.win=null,e.lose=null,e.notiText=null,e.listPoint=null,e.boss=null,e.federyc=null,e.isEndGame=!1,e.totalEnemy=0,e.countEnemy=0,e.money=240,e.towerTarget=null,e.countTower=0,e.towerTargetPos=cc.v3(-80,210),e.isHideShadow=!1,e}return i(e,t),e.prototype.onLoad=function(){cc.Global.GAME=this,cc.director.getCollisionManager().enabled=!0,this.endGame.active=!1,this.setZIndex(),cc.Canvas.instance.node.on(a.Constant.EVENT.END_GAME,this.onEndGame,this),cc.Canvas.instance.node.on(a.Constant.EVENT.CLICK,this.onClick,this),cc.Canvas.instance.node.on(a.Constant.EVENT.ENEMY_DIE,this.onEnemyDie,this),cc.Canvas.instance.node.on(a.Constant.EVENT.GOLEM_IMPACT,this.onGolemImpact,this),cc.Canvas.instance.node.on(a.Constant.EVENT.ARCHER_SHOOT,this.onArcherShoot,this),cc.Canvas.instance.node.on(a.Constant.EVENT.TOWER_BUILD,this.onTowerBuild,this),cc.Canvas.instance.node.on(a.Constant.EVENT.SET_MONEY,this.setMoney,this),cc.Canvas.instance.node.on(a.Constant.EVENT.IMPACT_CAMERA,this.onImpactCamera,this),cc.Canvas.instance.node.on(a.Constant.EVENT.ON_CHOOSE_TOWER,this.onChooseTower,this),this.onBackground(),this.schedule(function(){this.sortZIndex()}.bind(this),.1),this.notiText.opacity=0,this.showShadow(!0)},e.prototype.start=function(){var t=this.createPoint(cc.v3(-10,-14),0,0);this.onChooseTower(t),this.createPoint(cc.v3(-165,65),0,1),this.createPoint(cc.v3(-370,-116),0,2)},e.prototype.showShadow=function(t){this.shadow.zIndex=a.Constant.SHADOW_ZINDEX,t?this.shadow.runAction(cc.fadeTo(1,150)):this.shadow.runAction(cc.sequence(cc.fadeTo(1,0),cc.callFunc(function(){this.shadow.active=!1}.bind(this))))},e.prototype.onChooseTower=function(t){var e=cc.Canvas.instance.node.getChildByName(this.chooseTowerPrefab.name);e?(this.hand.active=!1,this.hand2.active=!1,e.active=!0,e.getComponent(p.default).setRangeTower(!1),e.getComponent(p.default).target=t):((e=cc.instantiate(this.chooseTowerPrefab)).getComponent(p.default).target=t,cc.Canvas.instance.node.addChild(e),e.zIndex=a.Constant.CHOOSE_TOWER_ZINDEX),e.getComponent(p.default).setUp()},e.prototype.createEnemyWay=function(){for(var t=0;t<5;t++)this.scheduleOnce(function(){this.createEnemy(this.orcPrefab,"way")}.bind(this),2*t);this.scheduleOnce(function(){this.createEnemy(this.bossPrefab,"way"),this.federyc&&this.federyc.isValid&&this.showHand(this.federyc.position.add(cc.v3(0,30)))}.bind(this),9),this.totalEnemy=6},e.prototype.onImpactCamera=function(){this.camera.runAction(cc.sequence(cc.moveBy(.1,cc.v2(0,20)),cc.moveBy(.2,cc.v2(0,-40)),cc.moveBy(.1,cc.v2(0,20))))},e.prototype.setMoney=function(t){void 0===t&&(t=0),this.money+=t},e.prototype.onEnemyDie=function(){this.countEnemy++,this.setMoney(10),!this.isEndGame&&this.countEnemy>=this.totalEnemy&&this.onEndGame(!0)},e.prototype.onBackground=function(){cc.audioEngine.play(this.bg,!0,.8)},e.prototype.onClick=function(){cc.Canvas.instance.node.emit(a.Constant.EVENT.OFF_CHOOSE_TOWER),cc.audioEngine.play(this.click,!1,1.4)},e.prototype.onGolemImpact=function(){cc.audioEngine.play(this.golem_impact,!1,1)},e.prototype.onArcherShoot=function(){cc.audioEngine.play(this.archer_shoot,!1,1.4)},e.prototype.onTowerBuild=function(){cc.audioEngine.play(this.tower_build,!1,1.4)},e.prototype.onTouchStart=function(t){if(this.summonToggle.isChecked){cc.Canvas.instance.node.emit(a.Constant.EVENT.CLICK),this.summonToggle.uncheck();var e=cc.Canvas.instance.node.convertToNodeSpaceAR(t.getLocation()).add(cc.v3(0,cc.Global.CAMERA_POS_Y));this.createMinion(this.galioPrefab,e),this.showHand(cc.v3(9999,9999))}},e.prototype.setZIndex=function(){this.game.zIndex=a.Constant.GAME_ZINDEX,this.ui.zIndex=a.Constant.UI_ZINDEX,this.hand.zIndex=cc.macro.MAX_ZINDEX-2,this.endGame.zIndex=cc.macro.MAX_ZINDEX-1,this.logo.zIndex=cc.macro.MAX_ZINDEX},e.prototype.createPoint=function(t,e,o){void 0===t&&(t=cc.v3()),void 0===e&&(e=0),void 0===o&&(o=0);var n=cc.instantiate(this.pointPrefab);return this.listPoint.addChild(n),n.setPosition(t),n.getComponent(u.default).setSprite(e),n.getComponent(u.default).pointId=o,n.getComponent(u.default)},e.prototype.createEnemy=function(t,e){void 0===e&&(e="way");var o=cc.instantiate(t);t!=this.marakkPrefab&&t!=this.bossPrefab||(o.getComponent(r.default).isBoss=!0),this.game.addChild(o),o.setPosition(cc.v3(9999,9999)),o.getComponent(r.default).setWay(e)},e.prototype.createTowerEW3=function(t){var e=cc.instantiate(t);return this.node.addChild(e,a.Constant.LIST_TOWER_ZINDEX),e.setPosition(this.towerTargetPos),this.countTower++,e},e.prototype.onBtnUpdate=function(){if(cc.Canvas.instance.node.emit(a.Constant.EVENT.CLICK),this.towerTarget)switch(this.towerTarget.destroy(),this.countTower){case 1:this.towerTarget=this.createTowerEW3(this.golem2Prefab);break;case 2:this.towerTarget=this.createTowerEW3(this.golemBluePrefab),this.btnUpdate.getComponent(cc.Button).interactable=!1}},e.prototype.createTower=function(t,e,o){void 0===o&&(o=0),this.isHideShadow||(this.isHideShadow=!0,this.showShadow(!1),this.hand.stopAllActions(),this.hand.setPosition(cc.v3(-370,-160)),this.hand.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.5,.9),cc.scaleTo(.5,1)))),this.createEnemyWay(),this.scheduleOnce(function(){this.warning.runAction(cc.fadeOut(.5))}.bind(this),3),this.notiText.runAction(cc.fadeIn(.5)),this.hand2.stopAllActions(),this.hand2.active=!1);var n=cc.instantiate(t);return t==this.barrack1Prefab&&(n.getComponent(s.default).pointId=o),n.setPosition(e),this.game.addChild(n),n},e.prototype.createTower2=function(t,e,o){void 0===o&&(o=0),this.isHideShadow||(this.isHideShadow=!0,this.showShadow(!1),this.hand.stopAllActions(),this.hand.setPosition(cc.v3(-370,-160)),this.hand.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.5,.9),cc.scaleTo(.5,1)))),this.createEnemyWay(),this.scheduleOnce(function(){this.warning.runAction(cc.fadeOut(.5))}.bind(this),3),this.notiText.runAction(cc.fadeIn(.5)),this.hand2.stopAllActions(),this.hand2.active=!1);var n=cc.instantiate(t);return t==this.barrack1Prefab&&(n.getComponent(s.default).pointId=o),n.setPosition(e),n.zIndex=a.Constant.GAME_ZINDEX-1,this.node.addChild(n),n},e.prototype.createMinion=function(t,e){var o=cc.instantiate(t);this.game.addChild(o),o.setPosition(e),t==this.federycPrefab&&(this.federyc=o)},e.prototype.onEndGame=function(t){if(void 0===t&&(t=!1),!this.isEndGame){cc.audioEngine.play(this.victory,!1,1),this.notiText.runAction(cc.fadeOut(.5)),this.win.active=t,this.lose.active=!t,this.isEndGame=!0,this.endGame.active=!0,this.endGame.opacity=0,this.endGame.runAction(cc.fadeIn(.5));var e=cc.v2(this.popup.position.x,this.popup.position.y);this.popup.setPosition(this.popup.position.add(cc.v3(0,400))),this.popup.runAction(cc.moveTo(.8,e))}},e.prototype.onClickSummon=function(){cc.Canvas.instance.node.emit(a.Constant.EVENT.CLICK),this.boss&&this.boss.isValid&&this.showHand(this.boss.position.add(cc.v3(0,30)))},e.prototype.onHandGuideHeroMoveToBoss=function(){this.showHand(cc.v3(150,-200))},e.prototype.onHandHideDefault=function(){this.showHand(cc.v3(9999,9999)),this.scheduleOnce(function(){this.showHand(this.summonToggle.node.position)}.bind(this),3)},e.prototype.showHand=function(){},e.prototype.getPrefabByObj=function(t){switch(t){case l.LIST_TOWER.GOLEM_1:return this.golem1Prefab;case l.LIST_TOWER.GOLEM_2:return this.golem2Prefab;case l.LIST_TOWER.GOLEM_3:return this.golem3Prefab;case l.LIST_TOWER.ANCIENT_OF_FIRE:return this.golemPrefab;case l.LIST_TOWER.ICE_PRIESTESS:return this.magePrefab;case l.LIST_TOWER.BARRACK_1:return this.barrack1Prefab;case l.LIST_TOWER.ARCHER_1:return this.archer1Prefab}},e.prototype.sortZIndex=function(){var t=this.game.children;t=t.filter(function(t){return t.isValid});var e=this.quickSort(t);e=e.reverse();for(var o=0;o<e.length;o++)e[o].zIndex=o},e.prototype.quickSort=function(t){if(t.length<2)return t;for(var e=t.length-1,o=t[e].y,n=[],i=[],c=0;c<e;c++)t[c].y<o?n.push(t[c]):i.push(t[c]);return this.quickSort(n).concat([t[e]],this.quickSort(i))},c([f(cc.Node)],e.prototype,"game",void 0),c([f(cc.Node)],e.prototype,"ui",void 0),c([f(cc.Prefab)],e.prototype,"enemyPrefab",void 0),c([f(cc.Prefab)],e.prototype,"iceTrollThrowerPrefab",void 0),c([f(cc.Prefab)],e.prototype,"orcPrefab",void 0),c([f(cc.Prefab)],e.prototype,"marakkPrefab",void 0),c([f(cc.Prefab)],e.prototype,"bossPrefab",void 0),c([f(cc.Prefab)],e.prototype,"golemPrefab",void 0),c([f(cc.Prefab)],e.prototype,"golemBluePrefab",void 0),c([f(cc.Prefab)],e.prototype,"golem1Prefab",void 0),c([f(cc.Prefab)],e.prototype,"golem2Prefab",void 0),c([f(cc.Prefab)],e.prototype,"golem3Prefab",void 0),c([f(cc.Prefab)],e.prototype,"magePrefab",void 0),c([f(cc.Prefab)],e.prototype,"barrack1Prefab",void 0),c([f(cc.Prefab)],e.prototype,"archer1Prefab",void 0),c([f(cc.Prefab)],e.prototype,"galioPrefab",void 0),c([f(cc.Prefab)],e.prototype,"federycPrefab",void 0),c([f(cc.Prefab)],e.prototype,"minion1Prefab",void 0),c([f(cc.Prefab)],e.prototype,"minion5Prefab",void 0),c([f(cc.Toggle)],e.prototype,"summonToggle",void 0),c([f(cc.Node)],e.prototype,"hand",void 0),c([f(cc.Node)],e.prototype,"hand2",void 0),c([f(cc.Node)],e.prototype,"endGame",void 0),c([f(cc.Node)],e.prototype,"warning",void 0),c([f(cc.Node)],e.prototype,"popup",void 0),c([f(cc.Node)],e.prototype,"logo",void 0),c([f(cc.Label)],e.prototype,"moneyLabel",void 0),c([f({type:cc.AudioClip})],e.prototype,"bg",void 0),c([f({type:cc.AudioClip})],e.prototype,"click",void 0),c([f({type:cc.AudioClip})],e.prototype,"victory",void 0),c([f({type:cc.AudioClip})],e.prototype,"golem_impact",void 0),c([f({type:cc.AudioClip})],e.prototype,"tower_build",void 0),c([f({type:cc.AudioClip})],e.prototype,"archer_shoot",void 0),c([f(cc.Prefab)],e.prototype,"pointPrefab",void 0),c([f(cc.Prefab)],e.prototype,"chooseTowerPrefab",void 0),c([f(cc.Node)],e.prototype,"camera",void 0),c([f(cc.Node)],e.prototype,"btnUpdate",void 0),c([f(cc.Node)],e.prototype,"shadow",void 0),c([f(cc.Node)],e.prototype,"guide",void 0),c([f(cc.Node)],e.prototype,"win",void 0),c([f(cc.Node)],e.prototype,"lose",void 0),c([f(cc.Node)],e.prototype,"notiText",void 0),c([f(cc.Node)],e.prototype,"listPoint",void 0),c([h],e)}(cc.Component);o.default=y,cc._RF.pop()},{"../EW_1_1/Constant_1_1":"Constant_1_1","../EW_1_1/Enemy":"Enemy","../EW_1_1/Tower":"Tower","../EW_1_1/TowerData":"TowerData","../EW_5/ChooseTower_5":"ChooseTower_5","../FB_INSTANT/Point":"Point"}],EW_6:[function(t,e,o){"use strict";cc._RF.push(e,"ffae8itycpGp4pgp1Qe3fHx","EW_6");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a},a=this&&this.__spreadArrays||function(){for(var t=0,e=0,o=arguments.length;e<o;e++)t+=arguments[e].length;var n=Array(t),i=0;for(e=0;e<o;e++)for(var c=arguments[e],a=0,r=c.length;a<r;a++,i++)n[i]=c[a];return n};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../EW_1_1/Constant_1_1"),s=t("../EW_1_1/Enemy"),l=t("../EW_1_1/TowerData"),p=t("../FB_INSTANT/ChooseTower"),u=t("../EW_1_1/common/Utils"),d=t("./Upgrade_txt"),h=cc._decorator,f=h.ccclass,y=h.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.game=null,e.ui=null,e.enemyPrefab=null,e.iceTrollThrowerPrefab=null,e.trollPrefab=null,e.nadlugPrefab=null,e.marakkPrefab=null,e.bossPrefab=null,e.golemPrefab=null,e.golemBluePrefab=null,e.golem1Prefab=null,e.golem2Prefab=null,e.golem3Prefab=null,e.magePrefab=null,e.galioPrefab=null,e.federycPrefab=null,e.arrynPrefab=null,e.minion5Prefab=null,e.summonToggle=null,e.hand=null,e.endGame=null,e.warning=null,e.popup=null,e.logo=null,e.moneyLabel=null,e.bg=null,e.click=null,e.victory=null,e.golem_impact=null,e.merge_eff=null,e.enemy_awake=null,e.pointPrefab=null,e.chooseTowerPrefab=null,e.camera=null,e.btnUpdate=null,e.shadow=null,e.guide=null,e.win=null,e.lose=null,e.process=null,e.bar=null,e.dangerous=null,e.warning_icon=null,e.upgrade=null,e.upgrade_txt_prefab=null,e.effect=null,e.hand_choose_hero=null,e.eff_click=null,e.choose_hero=null,e.boss=null,e.federyc=null,e.isEndGame=!1,e.totalEnemy=0,e.countEnemy=0,e.money=240,e.towerTarget=null,e.countTower=0,e.towerTargetPos=cc.v3(-80,210),e.countUpgrade=0,e.countFail=0,e.countProcess=0,e}return i(e,t),e.prototype.onLoad=function(){cc.Global.GAME=this,cc.director.getCollisionManager().enabled=!0,this.choose_hero.active=!1,this.endGame.active=!1,this.setZIndex(),cc.Canvas.instance.node.on(r.Constant.EVENT.END_GAME,this.onEndGame,this),cc.Canvas.instance.node.on(r.Constant.EVENT.CLICK,this.onClick,this),cc.Canvas.instance.node.on(r.Constant.EVENT.ENEMY_DIE,this.onEnemyDie,this),cc.Canvas.instance.node.on(r.Constant.EVENT.GOLEM_IMPACT,this.onGolemImpact,this),cc.Canvas.instance.node.on(r.Constant.EVENT.SET_MONEY,this.setMoney,this),cc.Canvas.instance.node.on(r.Constant.EVENT.IMPACT_CAMERA,this.onImpactCamera,this),this.onBackground(),cc.Canvas.instance.schedule(function(){this.sortZIndex()}.bind(this),.1),this.guide.opacity=0,this.process.fillRange=.01,this.btnUpdate.active=!1,this.btnUpdate.opacity=0,this.bar.opacity=0},e.prototype.start=function(){var t=this;this.scheduleOnce(function(){cc.audioEngine.play(t.enemy_awake,!1,1.1)},0),this.moveCamera(),this.createTower(this.magePrefab,cc.v3(385,-131)),this.createTower(this.magePrefab,cc.v3(-120,-77)),this.towerTarget=this.createTower2(this.golem1Prefab,cc.v3(65,-266)),this.createEnemyWayEW6()},e.prototype.changeAnimation=function(t,e,o,n){t.setAnimation(e,o,n)},e.prototype.moveCamera=function(){var t=this;cc.Canvas.instance.node.emit(r.Constant.EVENT.CAMERA_MOVE,new r.CAMERA_DATA(cc.v3(-250,250),2,cc.v3(100),1.6,2.4)),this.scheduleOnce(function(){cc.Canvas.instance.node.emit(r.Constant.EVENT.CAMERA_MOVE,new r.CAMERA_DATA(null,null,cc.v3(220,-500),1.9,.5)),cc.tween(t.warning).to(.5,{opacity:0}).start(),cc.tween(t.warning_icon).to(.5,{opacity:0}).start(),t.dangerous.getComponent(cc.Animation).stop("dangerous"),cc.tween(t.dangerous).to(.5,{opacity:0}).start()},2.4),this.scheduleOnce(function(){t.scheduleOnce(function(){cc.Canvas.instance.node.emit(r.Constant.EVENT.PAUSE_ENEMY_ANIM_WAY,!0)},3),t.showBtnUpdate(!0)},2.9)},e.prototype.showHandChooseHero=function(){this.hand_choose_hero.getChildByName("icon").zIndex=cc.macro.MAX_ZINDEX;var t=cc.v3(-400,45),e=cc.v3(350,96),o=cc.v3(10,-10),n=function(){var t=cc.instantiate(this.eff_click);t.setPosition(t.position.add(cc.v3(-10,10))),this.hand_choose_hero.addChild(t)}.bind(this);cc.tween(this.hand_choose_hero).repeatForever(cc.tween().repeat(2,cc.tween().set({position:t.add(o)}).to(.3,{scale:.8,position:t}).call(n).to(.3,{scale:1,position:t.add(o)})).repeat(2,cc.tween().set({position:e.add(o)}).to(.3,{scale:.8,position:e}).call(n).to(.3,{scale:1,position:e.add(o)}))).start()},e.prototype.onBtnFede=function(){this.unscheduleAllCallbacks(),this.choose_hero.active=!1,this.createMinion(this.federycPrefab,cc.v3(-300,-217)),this.resumeGame()},e.prototype.onBtnArryn=function(){this.unscheduleAllCallbacks(),this.choose_hero.active=!1,this.createMinion(this.arrynPrefab,cc.v3(-300,-217)),this.resumeGame()},e.prototype.resumeGame=function(){cc.Canvas.instance.node.emit(r.Constant.EVENT.PAUSE_ENEMY_ANIM_WAY,!1),cc.Canvas.instance.node.emit(r.Constant.EVENT.ENABLE_RANGE,!0)},e.prototype.setProcess=function(t){cc.tween(this.process).by(.5,{fillRange:t}).start()},e.prototype.showBtnUpdate=function(t){var e=this,o=cc.tween,n=t?150:0,i=t?255:0;o(this.btnUpdate).set({x:this.btnUpdate.x+300,active:!0}).by(.5,{x:-300,opacity:255}).start(),this.shadow.zIndex=r.Constant.SHADOW_ZINDEX,this.shadow.runAction(cc.fadeTo(1,n)),this.guide.runAction(cc.fadeTo(1,i)),o(this.bar).set({y:this.bar.y-300}).by(.5,{y:300,opacity:255}).start(),this.scheduleOnce(function(){e.setProcess(1),cc.tween(e.guide).to(.5,{opacity:0}).start(),e.finishUpdate()},5)},e.prototype.onChooseTower=function(t){var e=cc.Canvas.instance.node.getChildByName(this.chooseTowerPrefab.name);e?(e.active=!0,e.getComponent(p.default).setRangeTower(!1),e.getComponent(p.default).target=t):((e=cc.instantiate(this.chooseTowerPrefab)).getComponent(p.default).target=t,cc.Canvas.instance.node.addChild(e),e.zIndex=r.Constant.CHOOSE_TOWER_ZINDEX),e.getComponent(p.default).setUp()},e.prototype.createEnemyWayEW6=function(){var t=0,e=2;e=3;for(var o=0;o<e;o++)this.createEnemyEW6(this.enemyPrefab,"way",1.8+.4*o);for(t+=e,e=3,o=0;o<e;o++)this.createEnemyEW6(this.enemyPrefab,"way1",1.7+.4*o);for(t+=e,e=2,o=0;o<e;o++)this.createEnemyEW6(this.trollPrefab,"way",1.1-.2+.5*o);for(t+=e,e=1,o=0;o<e;o++)this.createEnemyEW6(this.trollPrefab,"way1",1.3);for(t+=e,e=1,o=0;o<e;o++)this.createEnemyEW6(this.nadlugPrefab,"way1",.8);for(t+=e,e=1,o=0;o<e;o++)this.createEnemyEW6(this.enemyPrefab,"way",.4+.4*o);for(t+=e,e=1,o=0;o<e;o++)this.createEnemyEW6(this.enemyPrefab,"way1",.2+.4*o);for(t+=e,e=2,o=0;o<e;o++)this.scheduleOnce(function(){this.createEnemy(this.enemyPrefab,"way")}.bind(this),1*o);for(t+=e,e=2,o=0;o<e;o++)this.scheduleOnce(function(){this.createEnemy(this.enemyPrefab,"way1")}.bind(this),1*o+.4);t+=e,this.totalEnemy=t},e.prototype.createEnemyWayEW6_2=function(){for(var t=0;t<3;t++)this.scheduleOnce(function(){this.createEnemy(this.enemyPrefab,"way2")}.bind(this),1*t);for(t=0;t<2;t++)this.scheduleOnce(function(){this.createEnemy(this.trollPrefab,"way2")}.bind(this),1.3*t+3.3);this.totalEnemy+=5},e.prototype.createEnemyEW6=function(t,e,o){void 0===e&&(e="way");var n=cc.instantiate(t);this.game.addChild(n),n.setPosition(cc.v3(9999,9999));var i=n.getComponent(s.default);i.data.setWay(e),u.default.prototype.playAnimationFromSecond(i.anim,e,i.data.speed,o);var c="way"==e||"way1"==e?1:0;i.runSide(c)},e.prototype.createEnemyWay=function(){for(var t=0,e=0;e<3;e++)this.scheduleOnce(function(){this.createEnemy(this.enemyPrefab,"way")}.bind(this),1*e);for(t+=3,e=0;e<3;e++)this.scheduleOnce(function(){this.createEnemy(this.enemyPrefab,"way1")}.bind(this),1*e+.5);t+=3;var o=2;for(e=0;e<o;e++)this.scheduleOnce(function(){this.createEnemy(this.trollPrefab,"way")}.bind(this),1.3*e+3.3);for(t+=o,o=1,e=0;e<o;e++)this.scheduleOnce(function(){this.createEnemy(this.trollPrefab,"way1")}.bind(this),1.3*e+3.8);for(t+=o,o=3,e=0;e<o;e++)this.scheduleOnce(function(){this.createEnemy(this.enemyPrefab,"way")}.bind(this),1*e+6);for(t+=o,o=3,e=0;e<o;e++)this.scheduleOnce(function(){this.createEnemy(this.enemyPrefab,"way1")}.bind(this),1*e+7);for(t+=o,o=1,e=0;e<o;e++)this.scheduleOnce(function(){this.createEnemy(this.nadlugPrefab,"way1")}.bind(this),1*e+5.5);t+=o,this.totalEnemy=t},e.prototype.onImpactCamera=function(){this.camera.node.runAction(cc.sequence(cc.moveBy(.1,cc.v2(0,20)),cc.moveBy(.2,cc.v2(0,-40)),cc.moveBy(.1,cc.v2(0,20))))},e.prototype.setMoney=function(t){void 0===t&&(t=0),this.money+=t},e.prototype.onEnemyDie=function(){this.countEnemy++,this.setMoney(10),!this.isEndGame&&this.countEnemy>=this.totalEnemy&&this.onEndGame(!0)},e.prototype.onBackground=function(){cc.audioEngine.play(this.bg,!0,.9)},e.prototype.onClick=function(){cc.Canvas.instance.node.emit(r.Constant.EVENT.OFF_CHOOSE_TOWER),cc.audioEngine.play(this.click,!1,1.4)},e.prototype.onGolemImpact=function(){cc.audioEngine.play(this.golem_impact,!1,1)},e.prototype.onTouchStart=function(t){if(this.summonToggle.isChecked){cc.Canvas.instance.node.emit(r.Constant.EVENT.CLICK),this.summonToggle.uncheck();var e=cc.Canvas.instance.node.convertToNodeSpaceAR(t.getLocation()).add(cc.v3(0,cc.Global.CAMERA_POS_Y));this.createMinion(this.galioPrefab,e)}},e.prototype.setZIndex=function(){this.game.zIndex=r.Constant.GAME_ZINDEX,this.ui.zIndex=r.Constant.UI_ZINDEX,this.endGame.zIndex=cc.macro.MAX_ZINDEX-1,this.logo.zIndex=cc.macro.MAX_ZINDEX},e.prototype.createPoint=function(t){void 0===t&&(t=cc.v3());var e=cc.instantiate(this.pointPrefab);this.game.addChild(e),e.setPosition(t)},e.prototype.createEnemy=function(t,e){void 0===e&&(e="way");var o=cc.instantiate(t);t==this.marakkPrefab&&(o.getComponent(s.default).isBoss=!0),this.game.addChild(o),o.setPosition(cc.v3(9999,9999)),o.getComponent(s.default).setWay(e)},e.prototype.createTowerEW3=function(t){var e=cc.instantiate(t);return this.node.addChild(e,r.Constant.LIST_TOWER_ZINDEX),e.setPosition(this.towerTargetPos),this.countTower++,e},e.prototype.onBtnUpdate=function(){cc.Canvas.instance.node.emit(r.Constant.EVENT.CLICK),this.hand.active&&(this.hand.active=!1,cc.tween(this.guide).to(.5,{opacity:0}).start(),this.btnUpdate.getComponent(cc.Animation).play("btnUpgrade"));var t=0,e=[!1,!1,!1,!1];this.countFail<e.length&&(e[this.countFail]?this.createUpgradeTxt("fail"):(this.createUpgradeTxt(["spd","def","atk","skill"][this.countUpgrade]),t=[.1,.2,.3,1][this.countUpgrade],this.setProcess(t),this.countUpgrade++),this.countFail++),this.countProcess+=t,this.countProcess>=1&&this.finishUpdate()},e.prototype.finishUpdate=function(){var t=this;this.unscheduleAllCallbacks(),this.btnUpdate.getComponent(cc.Button).interactable=!1,this.scheduleOnce(function(){t.towerTarget.destroy(),t.towerTarget=t.createTower2(t.golemBluePrefab,t.towerTarget.position.add(cc.v3(0,-20))),cc.tween(t.btnUpdate).to(.5,{x:t.btnUpdate.x+300,opacity:0}).start(),cc.tween(t.bar).to(.5,{y:t.btnUpdate.y-300,opacity:0}).start(),t.scheduleOnce(function(){cc.Canvas.instance.node.emit(r.Constant.EVENT.CAMERA_MOVE,new r.CAMERA_DATA(null,null,cc.v3(0,100),1.2,1)),cc.Canvas.instance.node.emit(r.Constant.EVENT.PAUSE_ENEMY_ANIM_WAY,!1),cc.Canvas.instance.node.emit(r.Constant.EVENT.ENABLE_RANGE,!0),cc.tween(t.shadow).to(.5,{opacity:0}).start(),t.createMinion(t.galioPrefab,cc.v3(100,-150)),t.scheduleOnce(function(){cc.Canvas.instance.node.emit(r.Constant.EVENT.PAUSE_ENEMY_ANIM_WAY,!0),cc.Canvas.instance.node.emit(r.Constant.EVENT.ENABLE_RANGE,!1),t.choose_hero.active=!0,t.scheduleOnce(function(){t.showHandChooseHero()},.5),t.scheduleOnce(function(){t.onBtnArryn()},4.3)},7),t.createEnemyWayEW6_2()},.5)},.5),this.scheduleOnce(function(){t.scheduleOnce(function(){cc.Canvas.instance.node.emit(r.Constant.EVENT.CAMERA_SHAKE)},.1),t.showEffect("merge_eff",t.ui),cc.audioEngine.play(t.merge_eff,!1,1.1);var e=t.showEffect("electric",t.ui);cc.tween(e).delay(1).to(.5,{opacity:0}).call(function(){e.destroy()}).start()},.2)},e.prototype.createUpgradeTxt=function(t){var e=cc.instantiate(this.upgrade_txt_prefab);this.upgrade.addChild(e);var o="fail"==t?150:200;e.setPosition(cc.v3(0,o)),e.getComponent(d.default).setUp(t)},e.prototype.createTower=function(t,e){var o=cc.instantiate(t);return o.setPosition(e),this.game.addChild(o),o},e.prototype.createTower2=function(t,e){var o=cc.instantiate(t);return o.setPosition(e),o.zIndex=r.Constant.SHADOW_ZINDEX+1,this.node.addChild(o),o},e.prototype.createMinion=function(t,e){var o=cc.instantiate(t);this.game.addChild(o),o.setPosition(e),t==this.federycPrefab&&(this.federyc=o)},e.prototype.onEndGame=function(t){if(void 0===t&&(t=!1),!this.isEndGame){cc.audioEngine.play(this.victory,!1,1),this.isEndGame=!0,this.endGame.active=!0,this.endGame.opacity=0,this.endGame.runAction(cc.fadeIn(.5));var e=this.endGame.getChildByName("listReward"),o=this.endGame.getChildByName("btnClaim");o.opacity=0;var n=this.endGame.getChildByName("linkToStore");e.active=!0,e.getComponent("TweenEfx").runEffect(),cc.tween(o).delay(.5).to(.5,{opacity:255}).start(),this.scheduleOnce(function(){n.active=!0},.5)}},e.prototype.onClickSummon=function(){cc.Canvas.instance.node.emit(r.Constant.EVENT.CLICK)},e.prototype.getPrefabByObj=function(t){switch(t){case l.LIST_TOWER.GOLEM_1:return this.golem1Prefab;case l.LIST_TOWER.GOLEM_2:return this.golem2Prefab;case l.LIST_TOWER.GOLEM_3:return this.golem3Prefab;case l.LIST_TOWER.ANCIENT_OF_FIRE:return this.golemPrefab;case l.LIST_TOWER.ICE_PRIESTESS:return this.magePrefab}},e.prototype.showEffect=function(t,e){var o=cc.instantiate(this.effect);return e.addChild(o),o.getComponent("effect").play(t),o},e.prototype.sortZIndex=function(){var t=this.game.children;t=t.filter(function(t){return t.isValid});var e=this.quickSort(t);e=e.reverse();for(var o=0;o<e.length;o++)e[o].zIndex=o},e.prototype.quickSort=function(t){if(t.length<2)return t;for(var e=t.length-1,o=t[e].y,n=[],i=[],c=0;c<e;c++)t[c].y<o?n.push(t[c]):i.push(t[c]);return a(this.quickSort(n),[t[e]],this.quickSort(i))},c([y(cc.Node)],e.prototype,"game",void 0),c([y(cc.Node)],e.prototype,"ui",void 0),c([y(cc.Prefab)],e.prototype,"enemyPrefab",void 0),c([y(cc.Prefab)],e.prototype,"iceTrollThrowerPrefab",void 0),c([y(cc.Prefab)],e.prototype,"trollPrefab",void 0),c([y(cc.Prefab)],e.prototype,"nadlugPrefab",void 0),c([y(cc.Prefab)],e.prototype,"marakkPrefab",void 0),c([y(cc.Prefab)],e.prototype,"bossPrefab",void 0),c([y(cc.Prefab)],e.prototype,"golemPrefab",void 0),c([y(cc.Prefab)],e.prototype,"golemBluePrefab",void 0),c([y(cc.Prefab)],e.prototype,"golem1Prefab",void 0),c([y(cc.Prefab)],e.prototype,"golem2Prefab",void 0),c([y(cc.Prefab)],e.prototype,"golem3Prefab",void 0),c([y(cc.Prefab)],e.prototype,"magePrefab",void 0),c([y(cc.Prefab)],e.prototype,"galioPrefab",void 0),c([y(cc.Prefab)],e.prototype,"federycPrefab",void 0),c([y(cc.Prefab)],e.prototype,"arrynPrefab",void 0),c([y(cc.Prefab)],e.prototype,"minion5Prefab",void 0),c([y(cc.Toggle)],e.prototype,"summonToggle",void 0),c([y(cc.Node)],e.prototype,"hand",void 0),c([y(cc.Node)],e.prototype,"endGame",void 0),c([y(cc.Node)],e.prototype,"warning",void 0),c([y(cc.Node)],e.prototype,"popup",void 0),c([y(cc.Node)],e.prototype,"logo",void 0),c([y(cc.Label)],e.prototype,"moneyLabel",void 0),c([y({type:cc.AudioClip})],e.prototype,"bg",void 0),c([y({type:cc.AudioClip})],e.prototype,"click",void 0),c([y({type:cc.AudioClip})],e.prototype,"victory",void 0),c([y({type:cc.AudioClip})],e.prototype,"golem_impact",void 0),c([y({type:cc.AudioClip})],e.prototype,"merge_eff",void 0),c([y({type:cc.AudioClip})],e.prototype,"enemy_awake",void 0),c([y(cc.Prefab)],e.prototype,"pointPrefab",void 0),c([y(cc.Prefab)],e.prototype,"chooseTowerPrefab",void 0),c([y(cc.Camera)],e.prototype,"camera",void 0),c([y(cc.Node)],e.prototype,"btnUpdate",void 0),c([y(cc.Node)],e.prototype,"shadow",void 0),c([y(cc.Node)],e.prototype,"guide",void 0),c([y(cc.Node)],e.prototype,"win",void 0),c([y(cc.Node)],e.prototype,"lose",void 0),c([y(cc.Sprite)],e.prototype,"process",void 0),c([y(cc.Node)],e.prototype,"bar",void 0),c([y(cc.Node)],e.prototype,"dangerous",void 0),c([y(cc.Node)],e.prototype,"warning_icon",void 0),c([y(cc.Node)],e.prototype,"upgrade",void 0),c([y(cc.Prefab)],e.prototype,"upgrade_txt_prefab",void 0),c([y(cc.Prefab)],e.prototype,"effect",void 0),c([y(cc.Node)],e.prototype,"hand_choose_hero",void 0),c([y(cc.Prefab)],e.prototype,"eff_click",void 0),c([y(cc.Node)],e.prototype,"choose_hero",void 0),c([f],e)}(cc.Component);o.default=_,cc._RF.pop()},{"../EW_1_1/Constant_1_1":"Constant_1_1","../EW_1_1/Enemy":"Enemy","../EW_1_1/TowerData":"TowerData","../EW_1_1/common/Utils":"Utils","../FB_INSTANT/ChooseTower":"ChooseTower","./Upgrade_txt":"Upgrade_txt"}],EW_9:[function(t,e,o){"use strict";cc._RF.push(e,"69d4b+jSvdID5Fezf5zYdUs","EW_9");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a},a=this&&this.__spreadArrays||function(){for(var t=0,e=0,o=arguments.length;e<o;e++)t+=arguments[e].length;var n=Array(t),i=0;for(e=0;e<o;e++)for(var c=arguments[e],a=0,r=c.length;a<r;a++,i++)n[i]=c[a];return n};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../EW_1_1/Constant_1_1"),s=t("../WK/EnemyWK"),l=t("../WK/MinionWK"),p=t("../EW_1_1/TowerData"),u=cc._decorator,d=u.ccclass,h=u.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.game=null,e.ui=null,e.enemyPrefab=null,e.iceTrollThrowerPrefab=null,e.trollPrefab=null,e.nadlugPrefab=null,e.marakkPrefab=null,e.bossPrefab=null,e.kingJuliusPrefab=null,e.golemPrefab=null,e.golemBluePrefab=null,e.golem1Prefab=null,e.golem2Prefab=null,e.golem3Prefab=null,e.magePrefab=null,e.galioPrefab=null,e.federycPrefab=null,e.arrynPrefab=null,e.minion1Prefab=null,e.minion5Prefab=null,e.logo=null,e.bg=null,e.click=null,e.victory=null,e.golem_impact=null,e.merge_eff=null,e.enemy_awake=null,e.camera=null,e.shadow=null,e.dangerous=null,e.effect=null,e.eff_click=null,e.heart_label=null,e.money_label=null,e.win=null,e.lose=null,e.popup=null,e.endGame=null,e.total_enemy_label=null,e.guide=null,e.listCard=null,e.hand=null,e.circle=null,e.boss=null,e.federyc=null,e.isEndGame=!1,e.totalEnemy=0,e.countEnemy=0,e.countEnemyEscape=0,e.countEnemySummon=0,e.money=0,e.heart=5,e.towerTarget=null,e.countTower=0,e.towerTargetPos=cc.v3(-80,210),e.destinationHeroPos=cc.v3(158,164),e.destinationEnemyPos=cc.v3(-480,162),e}return i(e,t),e.prototype.onLoad=function(){cc.Global.GAME=this,cc.director.getCollisionManager().enabled=!0,cc.Canvas.instance.node.on(r.Constant.EVENT.CLICK,this.onClick,this),cc.Canvas.instance.node.on(r.Constant.EVENT.ENEMY_DIE,this.onEnemyDie,this),cc.Canvas.instance.node.on(r.Constant.EVENT.GOLEM_IMPACT,this.onGolemImpact,this),cc.Canvas.instance.node.on(r.Constant.EVENT.SET_MONEY,this.setMoney,this),cc.Canvas.instance.node.on(r.Constant.EVENT.IMPACT_CAMERA,this.onImpactCamera,this),cc.Canvas.instance.node.on(r.Constant.EVENT.SUMMON_MINION,this.onSummonMinion,this),cc.Canvas.instance.node.on(r.Constant.EVENT.ENEMY_ESCAPE,this.onEnemyEscape,this),cc.Canvas.instance.schedule(function(){this.sortZIndex()}.bind(this),.1)},e.prototype.start=function(){this.guide.active=!1,this.endGame.active=!1,this.setMoney(400),this.setHeart(),cc.audioEngine.play(this.bg,!0,.7),this.createTower(this.magePrefab,cc.v3(96,273)),this.showGuide(),cc.Canvas.instance.node.emit(r.Constant.EVENT.CHECK_VALID_CARD,this.money)},e.prototype.onClick=function(){cc.audioEngine.play(this.click,!1,1.4)},e.prototype.showGuide=function(){var t=this;this.guide.active=!0;var e=this.ui.getChildByName("shadow"),o=cc.tween;o(e).set({opacity:0}).to(.5,{opacity:150}).start();var n=this.guide.getChildByName("text_gold"),i=this.guide.getChildByName("txt_defend");i.active=!0,n.active=!1,this.hand.active=!1,this.circle.setPosition(cc.v3(-160,1.81)),this.scheduleOnce(function(){t.hand.active=!0,i.active=!1,n.active=!0,t.circle.setPosition(cc.v3(-3.3,-1.5));var c=t.listCard.children;o(t.hand).call(function(){t.hand.setPosition(c[0].position.add(cc.v3(80,-50)))}).delay(1).call(function(){t.hand.setPosition(c[1].position.add(cc.v3(80,-50)))}).delay(1).call(function(){t.hand.setPosition(c[2].position.add(cc.v3(80,-50)))}).delay(1).call(function(){t.hand.active=!1,n.active=!1,t.circle.active=!1,o(e).to(.5,{opacity:0}).call(function(){e.active=!1}).start(),o(t.guide).to(.5,{opacity:0}).call(function(){t.guide.active=!1,t.createEnemyWay()}).start()}).start()},2)},e.prototype.setTextEnemy=function(){this.total_enemy_label.string=this.countEnemySummon+" / "+this.totalEnemy},e.prototype.onEndGame=function(t){if(void 0===t&&(t=!1),!this.isEndGame){cc.audioEngine.play(this.victory,!1,1),this.win.active=t,this.lose.active=!t,this.isEndGame=!0,this.endGame.active=!0,this.endGame.opacity=0,this.endGame.runAction(cc.fadeIn(.5));var e=cc.v2(this.popup.position.x,this.popup.position.y);this.popup.setPosition(this.popup.position.add(cc.v3(0,400))),this.popup.runAction(cc.moveTo(.5,e))}},e.prototype.setHeart=function(){this.heart_label.string=String(this.heart)},e.prototype.onEnemyEscape=function(){this.countEnemy++,this.heart--,0==this.heart&&this.onEndGame(!1),this.heart>=0&&this.setHeart(),!this.isEndGame&&this.countEnemy>=this.totalEnemy&&this.heart>0&&this.onEndGame(!0)},e.prototype.onSummonMinion=function(t,e){switch(this.setMoney(-e),t){case 0:this.createMinionEW9(this.minion1Prefab);break;case 1:this.createMinionEW9(this.federycPrefab);break;case 2:this.createMinionEW9(this.kingJuliusPrefab)}},e.prototype.changeAnimation=function(t,e,o,n){t.setAnimation(e,o,n)},e.prototype.resumeGame=function(){cc.Canvas.instance.node.emit(r.Constant.EVENT.PAUSE_ENEMY_ANIM_WAY,!1),cc.Canvas.instance.node.emit(r.Constant.EVENT.ENABLE_RANGE,!0)},e.prototype.createEnemyWay=function(){var t=0,e=1;e=5;for(var o=0;o<e;o++)this.scheduleOnce(function(){this.createEnemyEW9(this.enemyPrefab)}.bind(this),2*o);for(t+=e,e=3,o=0;o<e;o++)this.scheduleOnce(function(){this.createEnemyEW9(this.trollPrefab)}.bind(this),10+2.2*o);for(t+=e,e=1,o=0;o<e;o++)this.scheduleOnce(function(){cc.audioEngine.play(this.enemy_awake,!1,1.1),this.createEnemyEW9(this.bossPrefab)}.bind(this),17+3*o);t+=e,this.totalEnemy=t,this.setTextEnemy()},e.prototype.onImpactCamera=function(){this.camera.node.runAction(cc.sequence(cc.moveBy(.1,cc.v2(0,20)),cc.moveBy(.2,cc.v2(0,-40)),cc.moveBy(.1,cc.v2(0,20))))},e.prototype.setMoney=function(t){void 0===t&&(t=0),this.money+=t,this.money_label.string=String(this.money)},e.prototype.onEnemyDie=function(t){this.countEnemy++,this.setMoney(t),!this.isEndGame&&this.countEnemy>=this.totalEnemy&&this.onEndGame(!0),cc.Canvas.instance.node.emit(r.Constant.EVENT.CHECK_VALID_CARD,this.money)},e.prototype.onBackground=function(){cc.audioEngine.play(this.bg,!0,.6)},e.prototype.onGolemImpact=function(){cc.audioEngine.play(this.golem_impact,!1,1)},e.prototype.setZIndex=function(){this.game.zIndex=r.Constant.GAME_ZINDEX,this.ui.zIndex=r.Constant.UI_ZINDEX,this.logo.zIndex=cc.macro.MAX_ZINDEX},e.prototype.createEnemy=function(t,e){void 0===e&&(e="way");var o=cc.instantiate(t);t==this.marakkPrefab&&(o.getComponent(s.default).isBoss=!0),this.game.addChild(o),o.setPosition(cc.v3(9999,9999)),o.getComponent(s.default).setWay(e)},e.prototype.createTower=function(t,e){var o=cc.instantiate(t);return o.setPosition(e),this.game.addChild(o),o},e.prototype.createTower2=function(t,e){var o=cc.instantiate(t);return o.setPosition(e),o.zIndex=r.Constant.SHADOW_ZINDEX+1,this.node.addChild(o),o},e.prototype.createMinion=function(t,e){var o=cc.instantiate(t);this.game.addChild(o),o.setPosition(e),t==this.federycPrefab&&(this.federyc=o)},e.prototype.createMinionEW9=function(t){var e=cc.instantiate(t);this.game.addChild(e),e.setPosition(cc.v3(-475,150)),e.getComponent(l.default).walkTo(this.destinationHeroPos)},e.prototype.createEnemyEW9=function(t){var e=cc.instantiate(t);this.game.addChild(e),e.setPosition(cc.v3(154,160)),e.getComponent(s.default).walkTo(this.destinationEnemyPos),this.countEnemySummon++,this.setTextEnemy()},e.prototype.getPrefabByObj=function(t){switch(t){case p.LIST_TOWER.GOLEM_1:return this.golem1Prefab;case p.LIST_TOWER.GOLEM_2:return this.golem2Prefab;case p.LIST_TOWER.GOLEM_3:return this.golem3Prefab;case p.LIST_TOWER.ANCIENT_OF_FIRE:return this.golemPrefab;case p.LIST_TOWER.ICE_PRIESTESS:return this.magePrefab}},e.prototype.showEffect=function(t,e){var o=cc.instantiate(this.effect);return e.addChild(o),o.getComponent("effect").play(t),o},e.prototype.sortZIndex=function(){var t=this.game.children;t=t.filter(function(t){return t.isValid});var e=this.quickSort(t);e=e.reverse();for(var o=0;o<e.length;o++)e[o].zIndex=o},e.prototype.quickSort=function(t){if(t.length<2)return t;for(var e=t.length-1,o=t[e].y,n=[],i=[],c=0;c<e;c++)t[c].y<o?n.push(t[c]):i.push(t[c]);return a(this.quickSort(n),[t[e]],this.quickSort(i))},c([h(cc.Node)],e.prototype,"game",void 0),c([h(cc.Node)],e.prototype,"ui",void 0),c([h(cc.Prefab)],e.prototype,"enemyPrefab",void 0),c([h(cc.Prefab)],e.prototype,"iceTrollThrowerPrefab",void 0),c([h(cc.Prefab)],e.prototype,"trollPrefab",void 0),c([h(cc.Prefab)],e.prototype,"nadlugPrefab",void 0),c([h(cc.Prefab)],e.prototype,"marakkPrefab",void 0),c([h(cc.Prefab)],e.prototype,"bossPrefab",void 0),c([h(cc.Prefab)],e.prototype,"kingJuliusPrefab",void 0),c([h(cc.Prefab)],e.prototype,"golemPrefab",void 0),c([h(cc.Prefab)],e.prototype,"golemBluePrefab",void 0),c([h(cc.Prefab)],e.prototype,"golem1Prefab",void 0),c([h(cc.Prefab)],e.prototype,"golem2Prefab",void 0),c([h(cc.Prefab)],e.prototype,"golem3Prefab",void 0),c([h(cc.Prefab)],e.prototype,"magePrefab",void 0),c([h(cc.Prefab)],e.prototype,"galioPrefab",void 0),c([h(cc.Prefab)],e.prototype,"federycPrefab",void 0),c([h(cc.Prefab)],e.prototype,"arrynPrefab",void 0),c([h(cc.Prefab)],e.prototype,"minion1Prefab",void 0),c([h(cc.Prefab)],e.prototype,"minion5Prefab",void 0),c([h(cc.Node)],e.prototype,"logo",void 0),c([h({type:cc.AudioClip})],e.prototype,"bg",void 0),c([h({type:cc.AudioClip})],e.prototype,"click",void 0),c([h({type:cc.AudioClip})],e.prototype,"victory",void 0),c([h({type:cc.AudioClip})],e.prototype,"golem_impact",void 0),c([h({type:cc.AudioClip})],e.prototype,"merge_eff",void 0),c([h({type:cc.AudioClip})],e.prototype,"enemy_awake",void 0),c([h(cc.Camera)],e.prototype,"camera",void 0),c([h(cc.Node)],e.prototype,"shadow",void 0),c([h(cc.Node)],e.prototype,"dangerous",void 0),c([h(cc.Prefab)],e.prototype,"effect",void 0),c([h(cc.Prefab)],e.prototype,"eff_click",void 0),c([h(cc.Label)],e.prototype,"heart_label",void 0),c([h(cc.Label)],e.prototype,"money_label",void 0),c([h(cc.Node)],e.prototype,"win",void 0),c([h(cc.Node)],e.prototype,"lose",void 0),c([h(cc.Node)],e.prototype,"popup",void 0),c([h(cc.Node)],e.prototype,"endGame",void 0),c([h(cc.Label)],e.prototype,"total_enemy_label",void 0),c([h(cc.Node)],e.prototype,"guide",void 0),c([h(cc.Node)],e.prototype,"listCard",void 0),c([h(cc.Node)],e.prototype,"hand",void 0),c([h(cc.Node)],e.prototype,"circle",void 0),c([d],e)}(cc.Component);o.default=f,cc._RF.pop()},{"../EW_1_1/Constant_1_1":"Constant_1_1","../EW_1_1/TowerData":"TowerData","../WK/EnemyWK":"EnemyWK","../WK/MinionWK":"MinionWK"}],EffectListener:[function(t,e,o){"use strict";cc._RF.push(e,"f3d46cmAwxIk6WBO/fm5G/9","EffectListener");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./Effect"),r=cc._decorator,s=r.ccclass,l=r.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.effect=null,e.className=null,e}return i(e,t),e.prototype.start=function(){this.className=this.__classname__},e.prototype.onCollisionEnter=function(){},e.prototype.onCollisionExit=function(){},c([l(a.default)],e.prototype,"effect",void 0),c([s],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./Effect":"Effect"}],EffectWKListener:[function(t,e,o){"use strict";cc._RF.push(e,"ea915SQnflHsr86KdN2/EM5","EffectWKListener");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../EW_1_1/Constant_1_1"),r=t("../EW_1_1/EnemyListener"),s=t("../EW_1_1/Enemy"),l=cc._decorator,p=l.ccclass,u=l.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.className=null,e.dame=100,e}return i(e,t),e.prototype.start=function(){this.className=this.__classname__},e.prototype.onCollisionEnter=function(t,e){this.enemyAttackedByEff(t,e)},e.prototype.onCollisionStay=function(t,e){"Jupiter"==e.node.parent.name&&this.enemyAttackedByEff(t,e)},e.prototype.onCollisionExit=function(){},e.prototype.enemyAttackedByEff=function(t){var e=t.node.getComponent(r.default);e&&e.enemy.getComponent(s.default).type==a.TYPE.ENEMY&&(e.enemy.getComponent(s.default).node,e.enemy.getComponent(s.default).attacked(this.dame,a.ATTACK_TYPE.DEFAULT))},c([u(cc.Integer)],e.prototype,"dame",void 0),c([p],e)}(cc.Component);o.default=d,cc._RF.pop()},{"../EW_1_1/Constant_1_1":"Constant_1_1","../EW_1_1/Enemy":"Enemy","../EW_1_1/EnemyListener":"EnemyListener"}],Effect:[function(t,e,o){"use strict";cc._RF.push(e,"862a2kVgilLgImdf7xC+8+S","Effect");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./common/Utils"),r=t("./Constant_1_1"),s=cc._decorator,l=s.ccclass,p=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.anim=null,e.collider=null,e.data=null,e.damage=0,e}return i(e,t),e.prototype.onLoad=function(){this.type=r.TYPE.BULLET_EFFECT},e.prototype.setData=function(t,e,o,n){void 0===n&&(n=0),this.data=e,this.collider&&(this.collider.enabled=o,this.setDamage(n)),a.default.prototype.playAnimation(this.anim,t)},e.prototype.setDamage=function(t){this.damage=t},e.prototype.playAnimationWithSpeed=function(t,e,o,n){void 0===n&&(n=1),this.data=e,this.collider&&(this.collider.enabled=o),a.default.prototype.playAnimationWithSpeed(this.anim,t,n)},e.prototype.finish=function(){this.node.destroy()},c([p(cc.Animation)],e.prototype,"anim",void 0),c([p(cc.PolygonCollider)],e.prototype,"collider",void 0),c([l],e)}(cc.Component);o.default=u,cc._RF.pop()},{"./Constant_1_1":"Constant_1_1","./common/Utils":"Utils"}],EnemyData_1_1:[function(t,e,o){"use strict";cc._RF.push(e,"a1d653flcFMoobqAv821WOb","EnemyData_1_1"),Object.defineProperty(o,"__esModule",{value:!0}),o.LIST_ENEMY=o.EnemyData=void 0;var n=t("./Constant_1_1"),i=function(){function t(){}return t.prototype.setSpeed=function(t){return this.speed=t,this},t.prototype.setBlood=function(t){return this.blood=t,this},t.prototype.setAttackDame=function(t){return this.attackDamage=t,this},t.prototype.setRunSide=function(t){return this.runSide=t,this},t.prototype.setRunFront=function(t){return this.runFront=t,this},t.prototype.setRunBack=function(t){return this.runBack=t,this},t.prototype.setAttack=function(t){return this.attack=t,this},t.prototype.setDie=function(t){return this.die=t,this},t.prototype.setWay=function(t){return this.way=t,this},t.prototype.setDirection=function(t){return this.direction=t,this},t.prototype.setMoney=function(t){return this.money=t,this},t}();o.EnemyData=i,o.LIST_ENEMY={ICE_TROLL_THROWER:(new i).setSpeed(.4).setBlood(150).setRunSide("run_side").setRunFront("run_front").setDirection(n.DIRECTION.LEFT).setRunBack("run_back").setAttack("attack").setDie("die").setAttackDame(40).setMoney(20),MARAKK:(new i).setSpeed(.2).setBlood(500).setRunSide("run_side").setRunFront("run_front").setDirection(n.DIRECTION.LEFT).setRunBack("run_back").setAttack("attack").setDie("die").setAttackDame(100).setMoney(50),NAZARAL:(new i).setSpeed(.4).setBlood(2e3).setRunSide("walk").setRunFront("walk_front").setDirection(n.DIRECTION.LEFT).setRunBack("walk_back").setAttack("attack").setDie("die").setAttackDame(100).setMoney(1e3),ORC:(new i).setSpeed(.35).setBlood(150).setRunSide("run_side").setRunFront("run_front").setDirection(n.DIRECTION.LEFT).setRunBack("run_back").setAttack("attack").setDie("die").setAttackDame(40).setMoney(20),SWORD_MAN:(new i).setSpeed(.4).setBlood(50).setRunSide("walk_side").setRunFront("walk_front").setDirection(n.DIRECTION.RIGHT).setRunBack("walk_back").setAttack("attack").setDie("die").setAttackDame(30).setMoney(10),GOBLIN_ASSASSIN:(new i).setSpeed(.5).setBlood(450).setRunSide("run_side").setRunFront("run_front").setDirection(n.DIRECTION.LEFT).setRunBack("run_back").setAttack("attack").setDie("die1").setAttackDame(30).setMoney(200),TROLL:(new i).setSpeed(.45).setBlood(700).setRunSide("run_side").setRunFront("run_front").setDirection(n.DIRECTION.LEFT).setRunBack("run_back").setAttack("attack").setDie("die").setAttackDame(50).setMoney(300),NAD_LUG:(new i).setSpeed(.5).setBlood(1500).setRunSide("run_side").setRunFront("run_front").setDirection(n.DIRECTION.LEFT).setRunBack("run_back").setAttack("attack").setDie("die").setAttackDame(40).setMoney(20)},cc._RF.pop()},{"./Constant_1_1":"Constant_1_1"}],EnemyListener:[function(t,e,o){"use strict";cc._RF.push(e,"82645ix+AdDa7AmmQ3WdEcr","EnemyListener");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./Constant_1_1"),r=t("./Enemy"),s=t("./EffectListener"),l=t("../EW_1_1/MinionListener"),p=t("../EW_1_1/Minion_1_1"),u=cc._decorator,d=u.ccclass,h=u.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.enemy=null,e.className=null,e}return i(e,t),e.prototype.start=function(){this.className=this.__classname__},e.prototype.onCollisionEnter=function(t,e){this.targetEnemy(t,e)},e.prototype.onCollisionExit=function(t,e){this.continueWay(t,e)},e.prototype.targetEnemy=function(t){var e=t.node.getComponent(l.default);if(e&&e.minion.getComponent(p.default).type==a.TYPE.MINION){var o=this.enemy.getComponent(r.default);o.checkEnemyExistInTarget(e.minion.getComponent(p.default))||o.setEnemyTarget(e.minion.getComponent(p.default))}},e.prototype.attacked=function(t){var e=t.node.getComponent(s.default);if(e&&e.effect.type==a.TYPE.BULLET_EFFECT){var o=e.effect.damage,n=e.effect.data?e.effect.data.attackType:a.ATTACK_TYPE.DEFAULT;this.enemy.getComponent(r.default).attacked(o,n,e.effect.data)}},e.prototype.continueWay=function(t){var e=t.node.getComponent(l.default);e&&e.minion.getComponent(p.default).type==a.TYPE.MINION&&(this.enemy.getComponent(r.default).continueWay(),this.enemy.getComponent(r.default).minionTargetArr=[])},c([h(cc.Node)],e.prototype,"enemy",void 0),c([d],e)}(cc.Component);o.default=f,cc._RF.pop()},{"../EW_1_1/MinionListener":"MinionListener","../EW_1_1/Minion_1_1":"Minion_1_1","./Constant_1_1":"Constant_1_1","./EffectListener":"EffectListener","./Enemy":"Enemy"}],EnemyWKData:[function(t,e,o){"use strict";cc._RF.push(e,"192edZtswVOKLXdeImtkb/G","EnemyWKData"),Object.defineProperty(o,"__esModule",{value:!0}),o.LIST_ENEMY=o.EnemyData=void 0;var n=t("../EW_1_1/Constant_1_1"),i=function(){function t(){}return t.prototype.setSpeed=function(t){return this.speed=t,this},t.prototype.setBlood=function(t){return this.blood=t,this},t.prototype.setAttackDame=function(t){return this.attackDamage=t,this},t.prototype.setSkillDame=function(t){return this.skillDamage=t,this},t.prototype.setRunSide=function(t){return this.runSide=t,this},t.prototype.setRunFront=function(t){return this.runFront=t,this},t.prototype.setRunBack=function(t){return this.runBack=t,this},t.prototype.setAttack=function(t){return this.attack=t,this},t.prototype.setAttack2=function(t){return this.attack2=t,this},t.prototype.setAttack3=function(t){return this.attack3=t,this},t.prototype.setSkill=function(t){return this.skill=t,this},t.prototype.setDie=function(t){return this.die=t,this},t.prototype.setWay=function(t){return this.way=t,this},t.prototype.setDirection=function(t){return this.direction=t,this},t.prototype.setMoney=function(t){return this.money=t,this},t}();o.EnemyData=i,o.LIST_ENEMY={GOBLIN_FIGHTER:(new i).setSpeed(.5).setBlood(450).setRunSide("run").setRunFront("run_90").setDirection(n.DIRECTION.RIGHT).setRunBack("run_270").setAttack("attack_melee_1").setAttack2("attack_melee_2").setDie("die").setAttackDame(30).setMoney(200),HOB_GOBLIN:(new i).setSpeed(.45).setBlood(600).setRunSide("run").setRunFront("run_90").setDirection(n.DIRECTION.RIGHT).setRunBack("run_270").setAttack("attack_melee_1").setAttack2("attack_melee_2").setDie("die").setAttackDame(60).setMoney(300),BARDUK:(new i).setSpeed(.4).setBlood(2e3).setRunSide("run").setRunFront("run_90").setDirection(n.DIRECTION.RIGHT).setRunBack("run_270").setAttack("attack_melee_1").setAttack2("attack_melee_2").setSkill("skill_1").setDie("die").setAttackDame(100).setSkillDame(100).setMoney(500)},cc._RF.pop()},{"../EW_1_1/Constant_1_1":"Constant_1_1"}],EnemyWKListener:[function(t,e,o){"use strict";cc._RF.push(e,"ff700aJp59N3pciZO5R0C5K","EnemyWKListener");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./../EW_1_1/Constant_1_1"),r=t("./EnemyWK"),s=t("./../EW_1_1/EffectListener"),l=t("./MinionWKListener"),p=t("./MinionWK"),u=cc._decorator,d=u.ccclass,h=u.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.enemy=null,e.className=null,e}return i(e,t),e.prototype.start=function(){this.className=this.__classname__},e.prototype.onCollisionEnter=function(t,e){this.targetEnemy(t,e)},e.prototype.onCollisionExit=function(t,e){this.continueWay(t,e)},e.prototype.targetEnemy=function(t){var e=t.node.getComponent(l.default);if(e&&e.minion.getComponent(p.default).type==a.TYPE.MINION){var o=this.enemy.getComponent(r.default);o.checkEnemyExistInTarget(e.minion.getComponent(p.default))||o.setEnemyTarget(e.minion.getComponent(p.default))}},e.prototype.attacked=function(t){var e=t.node.getComponent(s.default);if(e&&e.effect.type==a.TYPE.BULLET_EFFECT){var o=e.effect.damage,n=e.effect.data?e.effect.data.attackType:a.ATTACK_TYPE.DEFAULT;this.enemy.getComponent(r.default).attacked(o,n,e.effect.data)}},e.prototype.continueWay=function(t){var e=t.node.getComponent(l.default);e&&e.minion.getComponent(p.default).type==a.TYPE.MINION&&(this.enemy.getComponent(r.default).continueWay(),this.enemy.getComponent(r.default).minionTargetArr=[])},c([h(cc.Node)],e.prototype,"enemy",void 0),c([d],e)}(cc.Component);o.default=f,cc._RF.pop()},{"./../EW_1_1/Constant_1_1":"Constant_1_1","./../EW_1_1/EffectListener":"EffectListener","./EnemyWK":"EnemyWK","./MinionWK":"MinionWK","./MinionWKListener":"MinionWKListener"}],EnemyWK:[function(t,e,o){"use strict";cc._RF.push(e,"0f094smFlVOWLQNrvwdBB6I","EnemyWK");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../EW_1_1/common/Utils"),r=t("./../EW_1_1/Constant_1_1"),s=t("./../EW_1_1/TowerData"),l=cc._decorator,p=l.ccclass,u=l.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.anim=null,e.way=null,e.range=null,e.icon=null,e.bloodSprite=null,e.bloodNode=null,e.slowPrefab=null,e.freezePrefab=null,e.maxBlood=null,e.blood=null,e.data=null,e.currAnim=null,e.isSlow=!1,e.slowNode=null,e.slowSchedule=null,e.isFreeze=!1,e.freezeNode=null,e.freezeSchedule=null,e.isMinionTarget=!1,e.minion=null,e.isDie=!1,e.isBoss=!1,e.direction=!1,e.minionTargetArr=[],e.destinationPos=cc.v3(),e.isAttack=!1,e.minionTarget=null,e.isStop=!1,e.countAtk=0,e}return i(e,t),e.prototype.start=function(){this.addEventListener(),this.type=r.TYPE.ENEMY,this.setBlood(this.blood),this.node.zIndex=4},e.prototype.addEventListener=function(){cc.Canvas.instance.node.on(r.Constant.EVENT.PAUSE_ENEMY_ANIM_WAY,this.onPauseEnemyAnimWay,this)},e.prototype.setData=function(t){this.data=t,this.blood=t.blood,this.maxBlood=t.blood,this.setDirection(r.DIRECTION.LEFT)},e.prototype.setWay=function(t,e){this.way.addClip(e),this.data.setWay(t),this.run()},e.prototype.setDirection=function(t){var e;e=(this.node.x<t.x?r.DIRECTION.RIGHT:r.DIRECTION.LEFT)==r.DIRECTION.LEFT?this.data.direction==r.DIRECTION.LEFT?1:-1:this.data.direction==r.DIRECTION.LEFT?-1:1,this.node.scaleX=Math.abs(this.node.scaleX)*e,this.bloodNode.scaleX=this.node.scaleX<0?-Math.abs(this.bloodNode.scaleX):Math.abs(this.bloodNode.scaleX)},e.prototype.run=function(){a.default.prototype.playAnimation(this.way,this.data.way,this.data.speed)},e.prototype.runSide=function(t){void 0===t&&(t=null),null!==t&&(this.direction=t,this.setDirection(t)),this.anim.setAnimation(0,this.data.runSide,!0),this.currAnim=this.data.runSide},e.prototype.runFront=function(){this.anim.setAnimation(0,this.data.runFront,!0),this.currAnim=this.data.runFront},e.prototype.runBack=function(){this.anim.setAnimation(0,this.data.runBack,!0),this.currAnim=this.data.runBack},e.prototype.continueWay=function(){this.runSide(),a.default.prototype.resumeAnimationWay(this.way)},e.prototype.die=function(){this.isDie=!0,a.default.prototype.pauseAnimationWay(this.way),this.node.stopAllActions(),this.anim.setAnimation(0,this.data.die,!1),this.changeAnimSpine()},e.prototype.finish=function(){cc.Canvas.instance.node.emit(r.Constant.EVENT.ENEMY_DIE,this.data.money),this.node.destroy()},e.prototype.changeAnimSpine=function(){var t=this;this.anim.setCompleteListener(function(e){var o=e.animation?e.animation.name:"";o==t.data.die?t.finish():o==t.data.attack||o==t.data.attack2||o==t.data.attack3?(t.isAttack=!1,t.checkAttack()):o==t.data.skill&&(t.isAttack=!1,t.checkAttack())})},e.prototype.attacked=function(t,e,o){if(void 0===e&&(e=r.ATTACK_TYPE.DEFAULT),void 0===o&&(o=null),!this.isDie){if(this.bloodNode.active=!0,this.blood-=t,this.effected(e,o),this.blood>0){var n=this.blood/this.maxBlood;this.bloodSprite.fillRange=n}else this.bloodSprite.fillRange=0,this.range.enabled=!1,this.die();this.setBlood(this.blood)}},e.prototype.setBlood=function(){},e.prototype.showEffSkill=function(){},e.prototype.playSoundAtk=function(t){void 0===t&&(t=null)},e.prototype.playSoundSkill=function(){},e.prototype.effected=function(t,e){switch(void 0===t&&(t=r.ATTACK_TYPE.DEFAULT),void 0===e&&(e=null),t){case r.ATTACK_TYPE.SLOW:this.slow(e);break;case r.ATTACK_TYPE.FREEZE:this.freeze()}},e.prototype.freeze=function(){if(this.isFreeze)return this.unschedule(this.freezeSchedule),void this.cancelFreeze();this.isFreeze=!0,this.anim.paused=!0,this.freezeNode=cc.instantiate(this.freezePrefab),this.node.addChild(this.freezeNode),this.freezeCustom(this.freezeNode),this.cancelFreeze()},e.prototype.freezeCustom=function(){},e.prototype.cancelFreeze=function(){this.freezeSchedule=function(){this.freezeNode.runAction(cc.sequence(cc.fadeOut(.5),cc.callFunc(function(){this.isDie||(this.isFreeze=!1,this.freezeNode.destroy(),!this.isMinionTarget||!this.minion||this.minion&&!this.minion.isValid?(this.setDirection(this.direction),this.anim.paused=!1):this.attack())}.bind(this))))}.bind(this),this.scheduleOnce(this.freezeSchedule,2)},e.prototype.slow=function(t){if(!this.isFreeze){if(this.isSlow)return this.unschedule(this.slowSchedule),void this.cancelSlow();this.isSlow=!0,t==s.LIST_TOWER.ICE_PRIESTESS&&(this.slowNode=cc.instantiate(this.slowPrefab),this.node.addChild(this.slowNode),this.slowCustom(this.slowNode)),this.cancelSlow()}},e.prototype.slowCustom=function(){},e.prototype.cancelSlow=function(){this.slowSchedule=function(){this.slowNode?this.slowNode.runAction(cc.sequence(cc.fadeOut(.5),cc.callFunc(function(){this.isSlow=!1,a.default.prototype.changeSpeed(Object.values(this.anim._nameToState),2),this.slowNode.destroy(),this.slowNode=null}.bind(this)))):(this.isSlow=!1,a.default.prototype.changeSpeed(Object.values(this.anim._nameToState),2))}.bind(this),this.scheduleOnce(this.slowSchedule,1)},e.prototype.onPauseEnemyAnimWay=function(t){t?a.default.prototype.pauseAnimationWay(this.way):a.default.prototype.resumeAnimation(this.way)},e.prototype.walkTo=function(t){var e=this;void 0===t&&(t=cc.v3()),this.destinationPos=t,this.isAttack=!0,this.anim.setAnimation(0,this.data.runSide,!0),this.setDirection(t),cc.tween(this.node).to(this.getWalkTime(t),{position:t}).call(function(){e.isStop=!0,e.anim.paused=!0}).to(.5,{opacity:0}).call(function(){cc.Canvas.instance.node.emit(r.Constant.EVENT.ENEMY_ESCAPE),e.node.removeFromParent()}).start()},e.prototype.endAttack=function(){this.isAttack=!1,this.checkAttack()},e.prototype.checkAttack=function(){var t=this;if(!this.isDie)if(this.clearEnemyTargetArr(),0==this.minionTargetArr.length)a.default.prototype.resumeAnimationWay(this.way),this.anim.setAnimation(0,this.data.runSide,!0),this.setDirection(r.DIRECTION.LEFT);else{this.isAttack=!0,this.countAtk++,(!this.minionTarget||this.minionTarget&&!this.minionTarget.isValid)&&(this.minionTarget=this.minionTargetArr[0]),this.node.stopAllActions();var e=this.minionTarget.node.x<this.node.x?r.DIRECTION.LEFT:r.DIRECTION.RIGHT;this.setDirection(e),a.default.prototype.pauseAnimationWay(this.way),4==this.countAtk&&this.data.skill?(this.countAtk=0,this.anim.setAnimation(0,this.data.skill,!1),this.showEffSkill(4),this.changeAnimSpine(),this.playSoundSkill(),this.anim.scheduleOnce(function(){t.skill()},this.anim.findAnimation(this.data.skill).duration/2)):1==this.countAtk&&this.data.attack?(this.anim.setAnimation(0,this.data.attack,!1),this.changeAnimSpine(),this.showEffSkill(1),this.playSoundAtk(1),this.anim.scheduleOnce(function(){t.attack()},this.anim.findAnimation(this.data.attack).duration/2),this.data.attack2||(this.countAtk=0)):2==this.countAtk&&this.data.attack2?(this.anim.setAnimation(0,this.data.attack2,!1),this.changeAnimSpine(),this.showEffSkill(2),this.playSoundAtk(2),this.anim.scheduleOnce(function(){t.attack()},this.anim.findAnimation(this.data.attack2).duration/2),this.data.attack3||(this.countAtk=0)):3==this.countAtk&&this.data.attack3&&(this.anim.setAnimation(0,this.data.attack3,!1),this.changeAnimSpine(),this.showEffSkill(3),this.playSoundAtk(3),this.anim.scheduleOnce(function(){t.attack()},this.anim.findAnimation(this.data.attack3).duration/2),this.data.skill||(this.countAtk=0))}},e.prototype.skill=function(){this.clearEnemyTargetArr();for(var t=0;t<this.minionTargetArr.length;t++)this.minionTargetArr[t].attacked(this.data.skillDamage,r.ATTACK_TYPE.DEFAULT)},e.prototype.attack=function(){this.clearEnemyTargetArr();for(var t=0;t<this.minionTargetArr.length;t++)this.minionTargetArr[t].attacked(this.data.attackDamage,r.ATTACK_TYPE.DEFAULT)},e.prototype.getWalkTime=function(t){return this.getDistance(t)/this.data.speed},e.prototype.getDistance=function(t){return t.sub(this.node.position).mag()},e.prototype.setEnemyTarget=function(t){void 0===t&&(t=null),this.isStop||(this.minionTargetArr.push(t),this.checkAttack())},e.prototype.checkEnemyExistInTarget=function(t){for(var e=this.minionTargetArr,o=0;o<e.length;o++)if(e[o]==t)return!0;return!1},e.prototype.excludeEnemyInTarget=function(t){for(var e=this.minionTargetArr,o=0;o<e.length;o++)e[o]==t&&(e.splice(o,1),o--)},e.prototype.clearEnemyTargetArr=function(){var t=this.minionTargetArr.filter(function(t){return t.isValid});this.minionTargetArr=t},c([u(sp.Skeleton)],e.prototype,"anim",void 0),c([u(cc.Animation)],e.prototype,"way",void 0),c([u(cc.CircleCollider)],e.prototype,"range",void 0),c([u(cc.Node)],e.prototype,"icon",void 0),c([u(cc.Sprite)],e.prototype,"bloodSprite",void 0),c([u(cc.Node)],e.prototype,"bloodNode",void 0),c([u(cc.Prefab)],e.prototype,"slowPrefab",void 0),c([u(cc.Prefab)],e.prototype,"freezePrefab",void 0),c([p],e)}(cc.Component);o.default=d,cc._RF.pop()},{"../EW_1_1/common/Utils":"Utils","./../EW_1_1/Constant_1_1":"Constant_1_1","./../EW_1_1/TowerData":"TowerData"}],Enemy:[function(t,e,o){"use strict";cc._RF.push(e,"f6d81ZzOQtEs72dwX3vZiZh","Enemy");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./Constant_1_1"),r=t("./common/Utils"),s=t("./TowerData"),l=cc._decorator,p=l.ccclass,u=l.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.anim=null,e.range=null,e.icon=null,e.bloodSprite=null,e.bloodNode=null,e.slowPrefab=null,e.freezePrefab=null,e.maxBlood=null,e.blood=null,e.data=null,e.currAnim=null,e.isSlow=!1,e.slowNode=null,e.slowSchedule=null,e.isFreeze=!1,e.freezeNode=null,e.freezeSchedule=null,e.isMinionTarget=!1,e.minion=null,e.isDie=!1,e.isBoss=!1,e.direction=!1,e.minionTargetArr=[],e.destinationPos=cc.v3(),e.isAttack=!1,e.minionTarget=null,e.isStop=!1,e}return i(e,t),e.prototype.start=function(){this.addEventListener(),this.type=a.TYPE.ENEMY,this.setBlood(this.blood)},e.prototype.addEventListener=function(){cc.Canvas.instance.node.on(a.Constant.EVENT.PAUSE_ENEMY_ANIM_WAY,this.onPauseEnemyAnimWay,this)},e.prototype.setData=function(t){this.data=t,this.blood=t.blood,this.maxBlood=t.blood,this.setDirection(a.DIRECTION.LEFT)},e.prototype.setWay=function(t,e){this.anim.addClip(e),this.data.setWay(t),this.run()},e.prototype.setDirection=function(t){var e;e=(this.node.x<t.x?a.DIRECTION.RIGHT:a.DIRECTION.LEFT)==a.DIRECTION.LEFT?this.data.direction==a.DIRECTION.LEFT?1:-1:this.data.direction==a.DIRECTION.LEFT?-1:1,this.node.scaleX=Math.abs(this.node.scaleX)*e,this.bloodNode.scaleX=this.node.scaleX<0?-Math.abs(this.bloodNode.scaleX):Math.abs(this.bloodNode.scaleX)},e.prototype.run=function(){r.default.prototype.playAnimation(this.anim,this.data.way,this.data.speed)},e.prototype.runSide=function(t){void 0===t&&(t=null),null!==t&&(this.direction=t,this.setDirection(t)),r.default.prototype.playAnimation(this.anim,this.data.runSide),this.currAnim=this.data.runSide},e.prototype.runFront=function(){r.default.prototype.playAnimation(this.anim,this.data.runFront),this.currAnim=this.data.runFront},e.prototype.runBack=function(){r.default.prototype.playAnimation(this.anim,this.data.runBack),this.currAnim=this.data.runBack},e.prototype.continueWay=function(){this.runSide(),r.default.prototype.resumeAnimationWay(this.anim)},e.prototype.die=function(){this.isDie=!0,r.default.prototype.pauseAnimation(this.anim),r.default.prototype.playAnimation(this.anim,this.data.die)},e.prototype.finish=function(){cc.Canvas.instance.node.emit(a.Constant.EVENT.ENEMY_DIE,this.data.money),this.node.destroy()},e.prototype.attacked=function(t,e,o){if(void 0===e&&(e=a.ATTACK_TYPE.DEFAULT),void 0===o&&(o=null),!this.isDie){if(this.bloodNode.active=!0,this.blood-=t,this.effected(e,o),this.blood>0){var n=this.blood/this.maxBlood;this.bloodSprite.fillRange=n}else this.bloodSprite.fillRange=0,r.default.prototype.stopAnimation(this.anim),this.range.enabled=!1,this.die();this.setBlood(this.blood)}},e.prototype.setBlood=function(){},e.prototype.effected=function(t,e){switch(void 0===t&&(t=a.ATTACK_TYPE.DEFAULT),void 0===e&&(e=null),t){case a.ATTACK_TYPE.SLOW:this.slow(e);break;case a.ATTACK_TYPE.FREEZE:this.freeze()}},e.prototype.freeze=function(){if(this.isFreeze)return this.unschedule(this.freezeSchedule),void this.cancelFreeze();this.isFreeze=!0,r.default.prototype.pauseAnimation(this.anim),this.freezeNode=cc.instantiate(this.freezePrefab),this.node.addChild(this.freezeNode),this.freezeCustom(this.freezeNode),this.cancelFreeze()},e.prototype.freezeCustom=function(){},e.prototype.cancelFreeze=function(){this.freezeSchedule=function(){this.freezeNode.runAction(cc.sequence(cc.fadeOut(.5),cc.callFunc(function(){this.isDie||(this.isFreeze=!1,this.freezeNode.destroy(),!this.isMinionTarget||!this.minion||this.minion&&!this.minion.isValid?(this.setDirection(this.direction),r.default.prototype.resumeAnimation(this.anim,this.currAnim),r.default.prototype.stopAnimation(this.anim),r.default.prototype.playAnimation(this.anim,this.currAnim)):this.attack())}.bind(this))))}.bind(this),this.scheduleOnce(this.freezeSchedule,1)},e.prototype.slow=function(t){if(!this.isFreeze){if(this.isSlow)return this.unschedule(this.slowSchedule),void this.cancelSlow();this.isSlow=!0,t==s.LIST_TOWER.ICE_PRIESTESS&&(this.slowNode=cc.instantiate(this.slowPrefab),this.node.addChild(this.slowNode),this.slowCustom(this.slowNode)),this.cancelSlow()}},e.prototype.slowCustom=function(){},e.prototype.cancelSlow=function(){this.slowSchedule=function(){this.slowNode?this.slowNode.runAction(cc.sequence(cc.fadeOut(.5),cc.callFunc(function(){this.isSlow=!1,r.default.prototype.changeSpeed(Object.values(this.anim._nameToState),2),this.slowNode.destroy(),this.slowNode=null}.bind(this)))):(this.isSlow=!1,r.default.prototype.changeSpeed(Object.values(this.anim._nameToState),2))}.bind(this),this.scheduleOnce(this.slowSchedule,1)},e.prototype.onPauseEnemyAnimWay=function(t){t?r.default.prototype.pauseAnimationWay(this.anim):r.default.prototype.resumeAnimation(this.anim)},e.prototype.walkTo=function(t){var e=this;void 0===t&&(t=cc.v3()),this.destinationPos=t,this.isAttack=!0,r.default.prototype.playAnimation(this.anim,this.data.runSide),this.setDirection(t),cc.tween(this.node).to(this.getWalkTime(t),{position:t}).call(function(){e.isStop=!0,r.default.prototype.pauseAnimation(e.anim)}).to(.5,{opacity:0}).call(function(){cc.Canvas.instance.node.emit(a.Constant.EVENT.ENEMY_ESCAPE),e.node.removeFromParent()}).start()},e.prototype.endAttack=function(){this.isAttack=!1,this.checkAttack()},e.prototype.checkAttack=function(){this.isDie||(this.clearEnemyTargetArr(),0==this.minionTargetArr.length?(r.default.prototype.resumeAnimation(this.anim,this.currAnim),r.default.prototype.playAnimation(this.anim,this.data.runSide)):(this.isAttack=!0,(!this.minionTarget||this.minionTarget&&!this.minionTarget.isValid)&&(this.minionTarget=this.minionTargetArr[0]),r.default.prototype.playAnimation(this.anim,this.data.attack),this.onPauseEnemyAnimWay(!0)))},e.prototype.attack=function(){this.clearEnemyTargetArr();for(var t=0;t<this.minionTargetArr.length;t++)this.minionTargetArr[t].attacked(this.data.attackDamage,a.ATTACK_TYPE.DEFAULT)},e.prototype.getWalkTime=function(t){return this.getDistance(t)/this.data.speed},e.prototype.getDistance=function(t){return t.sub(this.node.position).mag()},e.prototype.setEnemyTarget=function(t){void 0===t&&(t=null),this.isStop||(this.minionTargetArr.push(t),this.checkAttack())},e.prototype.checkEnemyExistInTarget=function(t){for(var e=this.minionTargetArr,o=0;o<e.length;o++)if(e[o]==t)return!0;return!1},e.prototype.excludeEnemyInTarget=function(t){for(var e=this.minionTargetArr,o=0;o<e.length;o++)e[o]==t&&(e.splice(o,1),o--)},e.prototype.clearEnemyTargetArr=function(){var t=this.minionTargetArr.filter(function(t){return t.isValid});this.minionTargetArr=t},c([u(cc.Animation)],e.prototype,"anim",void 0),c([u(cc.CircleCollider)],e.prototype,"range",void 0),c([u(cc.Node)],e.prototype,"icon",void 0),c([u(cc.Sprite)],e.prototype,"bloodSprite",void 0),c([u(cc.Node)],e.prototype,"bloodNode",void 0),c([u(cc.Prefab)],e.prototype,"slowPrefab",void 0),c([u(cc.Prefab)],e.prototype,"freezePrefab",void 0),c([p],e)}(cc.Component);o.default=d,cc._RF.pop()},{"./Constant_1_1":"Constant_1_1","./TowerData":"TowerData","./common/Utils":"Utils"}],FB_INSTANT:[function(t,e,o){"use strict";cc._RF.push(e,"1b9a8KEBgVDmbW4v5tp9PrA","FB_INSTANT");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a},a=this&&this.__spreadArrays||function(){for(var t=0,e=0,o=arguments.length;e<o;e++)t+=arguments[e].length;var n=Array(t),i=0;for(e=0;e<o;e++)for(var c=arguments[e],a=0,r=c.length;a<r;a++,i++)n[i]=c[a];return n};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../EW_1_1/Constant_1_1"),s=t("../EW_1_1/EnemyData_1_1"),l=t("../EW_1_1/Enemy"),p=t("../EW_1_1/TowerData"),u=t("../FB_INSTANT/ChooseTower"),d=t("./MapData"),h=t("./Infor"),f=t("./Warning"),y=t("../EW_1_1/common/Utils"),_=cc._decorator,m=_.ccclass,v=_.property,E=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.game=null,e.ui=null,e.goblinAssPrefab=null,e.nazaralPrefab=null,e.marakkPrefab=null,e.iceTrollPrefab=null,e.orcPrefab=null,e.swordManPrefab=null,e.golemPrefab=null,e.golemBluePrefab=null,e.golem1Prefab=null,e.golem2Prefab=null,e.golem3Prefab=null,e.magePrefab=null,e.mage1Prefab=null,e.barrack1Prefab=null,e.archer1Prefab=null,e.galioPrefab=null,e.federycPrefab=null,e.summonToggle=null,e.hand=null,e.endGame=null,e.warning=null,e.warningPrefab=null,e.popup=null,e.logo=null,e.moneyLabel=null,e.bg=null,e.click=null,e.golem_impact=null,e.pointPrefab=null,e.chooseTowerPrefab=null,e.bgSprite=null,e.bgArr=[],e.inforPrefab=null,e.heartLabel=null,e.win=null,e.lose=null,e.listDestination=null,e.destinationPrefab=null,e.wayAnimArr=[],e.boss=null,e.federyc=null,e.isEndGame=!1,e.money=240,e.map=null,e.heart=20,e.enemyTotal=0,e.countEnemy=0,e.countTurn=0,e}return i(e,t),e.prototype.onLoad=function(){cc.Global.GAME=this,cc.director.getCollisionManager().enabled=!0,this.endGame.active=!1,this.setZIndex(),cc.Canvas.instance.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),cc.Canvas.instance.node.on(r.Constant.EVENT.CLICK,this.onClick,this),cc.Canvas.instance.node.on(r.Constant.EVENT.ENEMY_DIE,this.onEnemyDie,this),cc.Canvas.instance.node.on(r.Constant.EVENT.GOLEM_IMPACT,this.onGolemImpact,this),cc.Canvas.instance.node.on(r.Constant.EVENT.SET_MONEY,this.setMoney,this),cc.Canvas.instance.node.on(r.Constant.EVENT.ON_CHOOSE_TOWER,this.onChooseTower,this),cc.Canvas.instance.node.on(r.Constant.EVENT.SHOW_INFOR,this.onShowInfor,this),cc.Canvas.instance.node.on(r.Constant.EVENT.START_WAY,this.startWay,this),cc.Canvas.instance.node.on(r.Constant.EVENT.ENEMY_FINISH,this.onEnemyFinish,this),this.onBackground(),cc.Canvas.instance.schedule(function(){this.sortZIndex()}.bind(this),.1),this.createMap()},e.prototype.start=function(){},e.prototype.createMap=function(){var t=d.LIST_MAP.MAP_1;this.map=t,this.unscheduleAllCallbacks(),this.game.removeAllChildren(),this.bgSprite.spriteFrame=this.bgArr[t.id],this.money=t.money,this.setMoney(0),this.heart=t.heart,this.setHeart();for(var e=t.pointPosArr,o=0;o<e.length;o++)this.createPoint(e[o]);this.warning.active=!0,this.warning.removeAllChildren();var n=t.wave.warningArr;for(o=0;o<n.length;o++){var i=cc.instantiate(this.warningPrefab);this.warning.addChild(i),i.getComponent(f.default).setData(n[o])}this.listDestination.removeAllChildren();var c=t.destinationPosArr;for(o=0;o<c.length;o++){var a=cc.instantiate(this.destinationPrefab);this.listDestination.addChild(a),a.setPosition(c[o])}var r=this.map.wave.turn;for(this.countEnemy=0,this.enemyTotal=0,o=0;o<r.length;o++)this.enemyTotal+=r[o].amount},e.prototype.startWay=function(){for(var t=this,e=this.map.wave.turn,o=function(o){n.scheduleOnce(function(){for(var n=e[o],i=n.amount,c=0;c<i;c++)t.scheduleOnce(function(){var e=Math.floor(3*Math.random()),o="way"+t.map.id+"_"+n.way+"_"+e;t.createEnemy(n.enemyType,o)},1.3*c)},16*o)},n=this,i=0;i<e.length;i++)o(i)},e.prototype.onBtnReplay=function(){this.endGame.active=!1,this.createMap()},e.prototype.onEnemyFinish=function(){this.countEnemy++,this.heart--,this.heart<=0&&this.onEndGame(!1),this.heart>=0&&this.setHeart(),this.countEnemy>=this.enemyTotal&&this.onEndGame(!0)},e.prototype.onShowInfor=function(t){var e=this.ui.getChildByName(this.inforPrefab.name);e?e.active=!0:(e=cc.instantiate(this.inforPrefab),this.ui.addChild(e)),e.getComponent(h.default).setData(t)},e.prototype.onChooseTower=function(t){var e=cc.Canvas.instance.node.getChildByName(this.chooseTowerPrefab.name);e?(e.active=!0,e.getComponent(u.default).setRangeTower(!1),e.getComponent(u.default).target=t):((e=cc.instantiate(this.chooseTowerPrefab)).getComponent(u.default).target=t,cc.Canvas.instance.node.addChild(e),e.zIndex=r.Constant.CHOOSE_TOWER_ZINDEX),e.getComponent(u.default).setUp()},e.prototype.setHeart=function(){this.heartLabel.string=String(this.heart)},e.prototype.setMoney=function(t){void 0===t&&(t=0),this.money+=t,this.moneyLabel.string=String(this.money)},e.prototype.onEnemyDie=function(t){this.countEnemy++,this.setMoney(t),cc.Canvas.instance.node.emit(r.Constant.EVENT.CHOOSE_TOWER_SET_ACTIVE_BUTTON),this.countEnemy>=this.enemyTotal&&this.onEndGame(!0)},e.prototype.onBackground=function(){cc.audioEngine.play(this.bg,!0,.9)},e.prototype.onClick=function(){cc.Canvas.instance.node.emit(r.Constant.EVENT.HIDE_INFOR),cc.Canvas.instance.node.emit(r.Constant.EVENT.OFF_CHOOSE_TOWER),cc.audioEngine.play(this.click,!1,1)},e.prototype.onGolemImpact=function(){cc.audioEngine.play(this.golem_impact,!1,1)},e.prototype.onTouchStart=function(t){if(this.summonToggle.isChecked){cc.Canvas.instance.node.emit(r.Constant.EVENT.CLICK),this.summonToggle.uncheck();var e=cc.Canvas.instance.node.convertToNodeSpaceAR(t.getLocation()).add(cc.v3(0,cc.Global.CAMERA_POS_Y));this.createMinion(this.galioPrefab,e)}},e.prototype.setZIndex=function(){this.game.zIndex=r.Constant.GAME_ZINDEX,this.ui.zIndex=r.Constant.UI_ZINDEX,this.hand.zIndex=cc.macro.MAX_ZINDEX-2,this.endGame.zIndex=cc.macro.MAX_ZINDEX-1,this.logo.zIndex=cc.macro.MAX_ZINDEX},e.prototype.createPoint=function(t){void 0===t&&(t=cc.v3());var e=cc.instantiate(this.pointPrefab);this.game.addChild(e),e.setPosition(t)},e.prototype.createEnemy=function(t,e){void 0===e&&(e="way");var o=this.getPrefabByObj(t),n=cc.instantiate(o);this.game.addChild(n),n.setPosition(cc.v3(9999,9999)),n.getComponent(l.default).setWay(e,y.default.prototype.getDataByName(this.wayAnimArr,e)),o==this.nazaralPrefab&&(this.boss=n)},e.prototype.createTower=function(t,e){var o=cc.instantiate(t);return o.setPosition(e),this.game.addChild(o),o},e.prototype.createMinion=function(t,e){var o=cc.instantiate(t);this.game.addChild(o),o.setPosition(e),t==this.federycPrefab&&(this.federyc=o)},e.prototype.onEndGame=function(t){if(void 0===t&&(t=!1),!this.isEndGame){this.isEndGame=!0,this.win.active=t,this.lose.active=!t,this.endGame.active=!0,this.endGame.opacity=0,this.endGame.runAction(cc.fadeIn(.5));var e=cc.v2(this.popup.position.x,this.popup.position.y);this.popup.setPosition(this.popup.position.add(cc.v3(0,400))),this.popup.runAction(cc.moveTo(.8,e))}},e.prototype.onClickSummon=function(){cc.Canvas.instance.node.emit(r.Constant.EVENT.CLICK)},e.prototype.getPrefabByObj=function(t){switch(t){case p.LIST_TOWER.GOLEM_1:return this.golem1Prefab;case p.LIST_TOWER.GOLEM_2:return this.golem2Prefab;case p.LIST_TOWER.GOLEM_3:return this.golem3Prefab;case p.LIST_TOWER.ANCIENT_OF_FIRE:return this.golemPrefab;case p.LIST_TOWER.MAGE_1:return this.mage1Prefab;case p.LIST_TOWER.ICE_PRIESTESS:return this.magePrefab;case p.LIST_TOWER.BARRACK_1:return this.barrack1Prefab;case p.LIST_TOWER.ARCHER_1:return this.archer1Prefab;case s.LIST_ENEMY.GOBLIN_ASSASSIN:return this.goblinAssPrefab;case s.LIST_ENEMY.NAZARAL:return this.nazaralPrefab;case s.LIST_ENEMY.SWORD_MAN:return this.swordManPrefab;case s.LIST_ENEMY.ORC:return this.orcPrefab;case s.LIST_ENEMY.ICE_TROLL_THROWER:return this.iceTrollPrefab;case s.LIST_ENEMY.MARAKK:return this.marakkPrefab}},e.prototype.sortZIndex=function(){var t=this.game.children;t=t.filter(function(t){return t.isValid});var e=this.quickSort(t);e=e.reverse();for(var o=0;o<e.length;o++)e[o].zIndex=o},e.prototype.quickSort=function(t){if(t.length<2)return t;for(var e=t.length-1,o=t[e].y,n=[],i=[],c=0;c<e;c++)t[c].y<o?n.push(t[c]):i.push(t[c]);return a(this.quickSort(n),[t[e]],this.quickSort(i))},c([v(cc.Node)],e.prototype,"game",void 0),c([v(cc.Node)],e.prototype,"ui",void 0),c([v(cc.Prefab)],e.prototype,"goblinAssPrefab",void 0),c([v(cc.Prefab)],e.prototype,"nazaralPrefab",void 0),c([v(cc.Prefab)],e.prototype,"marakkPrefab",void 0),c([v(cc.Prefab)],e.prototype,"iceTrollPrefab",void 0),c([v(cc.Prefab)],e.prototype,"orcPrefab",void 0),c([v(cc.Prefab)],e.prototype,"swordManPrefab",void 0),c([v(cc.Prefab)],e.prototype,"golemPrefab",void 0),c([v(cc.Prefab)],e.prototype,"golemBluePrefab",void 0),c([v(cc.Prefab)],e.prototype,"golem1Prefab",void 0),c([v(cc.Prefab)],e.prototype,"golem2Prefab",void 0),c([v(cc.Prefab)],e.prototype,"golem3Prefab",void 0),c([v(cc.Prefab)],e.prototype,"magePrefab",void 0),c([v(cc.Prefab)],e.prototype,"mage1Prefab",void 0),c([v(cc.Prefab)],e.prototype,"barrack1Prefab",void 0),c([v(cc.Prefab)],e.prototype,"archer1Prefab",void 0),c([v(cc.Prefab)],e.prototype,"galioPrefab",void 0),c([v(cc.Prefab)],e.prototype,"federycPrefab",void 0),c([v(cc.Toggle)],e.prototype,"summonToggle",void 0),c([v(cc.Node)],e.prototype,"hand",void 0),c([v(cc.Node)],e.prototype,"endGame",void 0),c([v(cc.Node)],e.prototype,"warning",void 0),c([v(cc.Prefab)],e.prototype,"warningPrefab",void 0),c([v(cc.Node)],e.prototype,"popup",void 0),c([v(cc.Node)],e.prototype,"logo",void 0),c([v(cc.Label)],e.prototype,"moneyLabel",void 0),c([v({type:cc.AudioClip})],e.prototype,"bg",void 0),c([v({type:cc.AudioClip})],e.prototype,"click",void 0),c([v({type:cc.AudioClip})],e.prototype,"golem_impact",void 0),c([v(cc.Prefab)],e.prototype,"pointPrefab",void 0),c([v(cc.Prefab)],e.prototype,"chooseTowerPrefab",void 0),c([v(cc.Sprite)],e.prototype,"bgSprite",void 0),c([v(cc.SpriteFrame)],e.prototype,"bgArr",void 0),c([v(cc.Prefab)],e.prototype,"inforPrefab",void 0),c([v(cc.Label)],e.prototype,"heartLabel",void 0),c([v(cc.Node)],e.prototype,"win",void 0),c([v(cc.Node)],e.prototype,"lose",void 0),c([v(cc.Node)],e.prototype,"listDestination",void 0),c([v(cc.Prefab)],e.prototype,"destinationPrefab",void 0),c([v(cc.AnimationClip)],e.prototype,"wayAnimArr",void 0),c([m],e)}(cc.Component);o.default=E,cc._RF.pop()},{"../EW_1_1/Constant_1_1":"Constant_1_1","../EW_1_1/Enemy":"Enemy","../EW_1_1/EnemyData_1_1":"EnemyData_1_1","../EW_1_1/TowerData":"TowerData","../EW_1_1/common/Utils":"Utils","../FB_INSTANT/ChooseTower":"ChooseTower","./Infor":"Infor","./MapData":"MapData","./Warning":"Warning"}],FederycBullet:[function(t,e,o){"use strict";cc._RF.push(e,"c89e144ruVOBrjj4DBz7+Xi","FederycBullet");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../tower/Bullet"),r=cc._decorator,s=r.ccclass,l=(r.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.start=function(){},e.prototype.shootCustom=function(t){var e=t.node,o=e.parent.convertToWorldSpaceAR(e.position),n=this.node.parent.convertToNodeSpaceAR(o),i=cc.v2(this.node.position.x,this.node.position.y),c=(n.x-this.node.position.x)/2,a=this.node.x<e.x?-1:1;this.node.runAction(cc.sequence(cc.spawn(cc.bezierTo(1,[i,i.add(cc.v2(c,400)),n.add(cc.v3(0,30))]),cc.rotateBy(1,-180*a)),cc.callFunc(function(){t.isValid&&t.attacked(this.data.attackDamage,this.data.attackType),this.node.destroy()}.bind(this))))},c([s],e)}(a.default));o.default=l,cc._RF.pop()},{"../tower/Bullet":"Bullet"}],Federyc:[function(t,e,o){"use strict";cc._RF.push(e,"6769bcS3qdNbrA9JgeZcRf7","Federyc");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../Minion_1_1"),r=t("../MinionData"),s=t("../Constant_1_1"),l=t("../common/Utils"),p=cc._decorator,u=p.ccclass,d=p.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.body=null,e.bulletPrefab=null,e.aura=null,e.atkAudio=null,e.ultiAudio=null,e.skill2Audio=null,e.ulti_eff1=null,e.ulti_eff2=null,e.atkAudioSchedule=null,e.skill2AudioSchedule=null,e.ultiAudioSchedule=null,e.isTouch=!1,e.bulletSchedule=null,e.moveDir=null,e.directionX=null,e}return i(e,t),e.prototype.onLoad=function(){this.setData(r.LIST_MINION.FEDERYC),cc.Canvas.instance.node.on(s.Constant.EVENT.PLAYER_ATTACK,this.checkAttack,this),cc.Canvas.instance.node.on(s.Constant.EVENT.PLAYER_SKILL,this.playskill,this),cc.Canvas.instance.node.on(s.Constant.EVENT.PLAYER_RUN,this.walk,this),cc.Canvas.instance.node.on(s.Constant.EVENT.PLAYER_IDLE,this.idle,this)},e.prototype.offEff=function(){this.ulti_eff1.active=!1,this.ulti_eff2.active=!1},e.prototype.walk=function(){this.isDie||this.isAttack||this.isDie||this.isSkill||this.isRun||(l.default.prototype.playAnimation(this.anim,this.data.walk),this.isRun=!0)},e.prototype.playSoundAtk=function(){var t=this;this.atkAudioSchedule&&this.unschedule(this.atkAudioSchedule),this.atkAudioSchedule=this.scheduleOnce(function(){cc.audioEngine.play(t.atkAudio,!1,1)},.5)},e.prototype.playSoundSkill=function(t){var e=this;switch(t){case"1":this.ultiAudioSchedule&&this.unschedule(this.ultiAudioSchedule),this.ultiAudioSchedule=this.scheduleOnce(function(){cc.audioEngine.play(e.ultiAudio,!1,1.2)},0);break;case"2":this.skill2AudioSchedule&&this.unschedule(this.skill2AudioSchedule),this.skill2AudioSchedule=this.scheduleOnce(function(){cc.audioEngine.play(e.skill2Audio,!1,1.2)},0)}},e.prototype.playskill=function(t){var e=this;if(!(this.isAttack||this.isDie||this.isSkill))switch(this.isSkill=!0,t){case"1":l.default.prototype.playAnimation(this.anim,this.data.ultimate),this.playSoundSkill(t);break;case"2":l.default.prototype.playAnimation(this.anim,this.data.skill2),this.playSoundSkill(t),this.scheduleOnce(function(){e.ulti_eff2.children[0].active=!0},.5),this.scheduleOnce(function(){e.ulti_eff2.children[0].active=!1},.65);break;case"3":l.default.prototype.playAnimation(this.anim,this.data.skill3)}},e.prototype.checkIndex=function(){var t=cc.Canvas.instance.node.getComponent("WK_3").golemAbyss,e=cc.Canvas.instance.node.getComponent("WK_3").golemCeles,o=cc.Canvas.instance.node.getComponent("WK_3").mageMystic;this.node.position.y>e.position.y?this.node.zIndex=t.zIndex-1:this.node.position.y<e.position.y-150&&Math.abs(o.position.x-this.node.position.x)>150?this.node.zIndex=o.zIndex-1:this.node.position.y<o.position.y&&Math.abs(o.position.x-this.node.position.x)<150?this.node.zIndex=o.zIndex+2:this.node.position.y<e.position.y&&this.node.position.y>o.position.y&&Math.abs(t.position.x-this.node.position.x)>150?this.node.zIndex=o.zIndex-1:this.node.position.y>t.position.y&&Math.abs(t.position.x-this.node.position.x)<150&&(this.node.zIndex=t.zIndex-1)},e.prototype.update=function(){if(this.checkIndex(),this.moveDir&&this.directionX)if(!this.isRun||this.isDie||this.isAttack||this.isSkill)t=this.node.position.add(this.moveDir.mul(0)),this.node.setPosition(t.clampf(cc.v3(-820,320),cc.v3(800,-360)));else{var t=this.node.position.add(this.moveDir.mul(250/60));this.node.setPosition(t.clampf(cc.v3(-820,320),cc.v3(800,-360))),this.node.scaleX=this.directionX,this.node.getChildByName("blood").scaleX=.8*this.directionX}},c([d(cc.Node)],e.prototype,"body",void 0),c([d(cc.Prefab)],e.prototype,"bulletPrefab",void 0),c([d(cc.Node)],e.prototype,"aura",void 0),c([d(cc.AudioClip)],e.prototype,"atkAudio",void 0),c([d(cc.AudioClip)],e.prototype,"ultiAudio",void 0),c([d(cc.AudioClip)],e.prototype,"skill2Audio",void 0),c([d(cc.Node)],e.prototype,"ulti_eff1",void 0),c([d(cc.Node)],e.prototype,"ulti_eff2",void 0),c([u],e)}(a.default);o.default=h,cc._RF.pop()},{"../Constant_1_1":"Constant_1_1","../MinionData":"MinionData","../Minion_1_1":"Minion_1_1","../common/Utils":"Utils"}],Gale:[function(t,e,o){"use strict";cc._RF.push(e,"7c65efXN+RP1LHqYmLe0bGB","Gale");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../EW_1_1/Constant_1_1"),r=t("../MinionWK"),s=t("../MinionWKData"),l=cc._decorator,p=l.ccclass,u=l.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.body=null,e.bulletPrefab=null,e.aura=null,e.atkAudio=null,e.atk3Audio=null,e.ultiAudio=null,e.eff1=null,e.ulti_eff2=null,e.atkAudioSchedule=null,e.ultiAudioSchedule=null,e.isTouch=!1,e.bulletSchedule=null,e.moveDir=null,e.directionX=null,e}return i(e,t),e.prototype.onLoad=function(){this.setData(s.LIST_MINION.GALE),cc.Canvas.instance.node.on(a.Constant.EVENT.PLAYER_RUN,this.walk,this),cc.Canvas.instance.node.on(a.Constant.EVENT.PLAYER_IDLE,this.idle,this),cc.Canvas.instance.node.on(a.Constant.EVENT.PLAYER_ATTACK,this.checkAttack,this),cc.Canvas.instance.node.on(a.Constant.EVENT.PLAYER_SKILL,this.playskill,this)},e.prototype.offEff=function(){},e.prototype.showEffect=function(t){this.eff1.setAnimation(0,t,!1)},e.prototype.playskill=function(t){var e=this;if(!(this.isAttack||this.isDie||this.isSkill))switch(this.isSkill=!0,t){case"1":this.anim.setAnimation(0,this.data.ultimate,!1),this.showEffect(this.data.ultimate),this.changeAnimSpine(),this.playSoundSkill(),this.anim.scheduleOnce(function(){e.effCollider.enabled=!0},this.anim.findAnimation(this.data.ultimate).duration/2)}},e.prototype.walk=function(){this.isDie||this.isAttack||this.isDie||this.isSkill||this.isRun||(this.anim.setAnimation(0,this.data.walk,!0),this.isRun=!0)},e.prototype.playSoundAtk=function(t){var e=this;switch(this.atkAudioSchedule&&this.unschedule(this.atkAudioSchedule),t){case 3:this.atkAudioSchedule=this.scheduleOnce(function(){cc.audioEngine.play(e.atk3Audio,!1,1)},.25);break;default:this.atkAudioSchedule=this.scheduleOnce(function(){cc.audioEngine.play(e.atkAudio,!1,1)},.25)}},e.prototype.playSoundSkill=function(){var t=this;this.ultiAudioSchedule&&this.unschedule(this.ultiAudioSchedule),this.ultiAudioSchedule=this.scheduleOnce(function(){cc.audioEngine.play(t.ultiAudio,!1,.5)},0)},e.prototype.checkIndex=function(){var t=cc.Canvas.instance.node.getComponent("WK_3").golemAbyss,e=cc.Canvas.instance.node.getComponent("WK_3").golemCeles,o=cc.Canvas.instance.node.getComponent("WK_3").mageMystic;this.node.position.y>e.position.y?this.node.zIndex=t.zIndex-1:this.node.position.y<e.position.y-150&&Math.abs(o.position.x-this.node.position.x)>150?this.node.zIndex=o.zIndex-1:this.node.position.y<o.position.y&&Math.abs(o.position.x-this.node.position.x)<150?this.node.zIndex=o.zIndex+2:this.node.position.y<e.position.y&&this.node.position.y>o.position.y&&Math.abs(t.position.x-this.node.position.x)>150?this.node.zIndex=o.zIndex-1:this.node.position.y>t.position.y&&Math.abs(t.position.x-this.node.position.x)<150&&(this.node.zIndex=t.zIndex-1)},e.prototype.update=function(){if(this.moveDir&&this.directionX)if(!this.isRun||this.isDie||this.isAttack||this.isSkill)t=this.node.position.add(this.moveDir.mul(0)),this.node.setPosition(t.clampf(cc.v3(-820,320),cc.v3(800,-360)));else{var t=this.node.position.add(this.moveDir.mul(250/60));this.node.setPosition(t.clampf(cc.v3(-820,320),cc.v3(800,-360))),this.node.scaleX=this.directionX,this.node.getChildByName("blood").scaleX=.8*this.directionX}},c([u(cc.Node)],e.prototype,"body",void 0),c([u(cc.Prefab)],e.prototype,"bulletPrefab",void 0),c([u(cc.Node)],e.prototype,"aura",void 0),c([u(cc.AudioClip)],e.prototype,"atkAudio",void 0),c([u(cc.AudioClip)],e.prototype,"atk3Audio",void 0),c([u(cc.AudioClip)],e.prototype,"ultiAudio",void 0),c([u(sp.Skeleton)],e.prototype,"eff1",void 0),c([u(cc.Node)],e.prototype,"ulti_eff2",void 0),c([p],e)}(r.default);o.default=d,cc._RF.pop()},{"../../EW_1_1/Constant_1_1":"Constant_1_1","../MinionWK":"MinionWK","../MinionWKData":"MinionWKData"}],Galio:[function(t,e,o){"use strict";cc._RF.push(e,"08312cg0GtBb5M3si51qr21","Galio");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../common/Utils"),r=t("../../Constant_1_1"),s=t("../../MinionData"),l=t("../../Minion_1_1"),p=t("../../Effect"),u=cc._decorator,d=u.ccclass,h=u.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.body=null,e.impact=null,e.effectPrefab=null,e.aura=null,e.isTouch=!1,e.attackSchedule=null,e}return i(e,t),e.prototype.onLoad=function(){this.setData(s.LIST_MINION.GALIO),this.body.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.isAttack=!0,a.default.prototype.playAnimation(this.anim,this.data.summon),this.impact.setDamage(this.data.skillDamage)},e.prototype.onTouchStart=function(){this.isTouch=!this.isTouch,this.aura.active=this.isTouch},e.prototype.onTouchEnd=function(){this.isTouch&&cc.Canvas.instance.node.on(cc.Node.EventType.TOUCH_START,this.onMove,this)},e.prototype.onMove=function(t){if(this.isTouch){cc.Canvas.instance.node.off(cc.Node.EventType.TOUCH_START,this.onMove,this),this.isTouch=!1,this.isAttack=!0,this.aura.active=!1;var e=cc.Canvas.instance.node.convertToNodeSpaceAR(t.getLocation()).add(cc.v3(0,cc.Global.CAMERA_POS_Y));this.node.stopAllActions(),a.default.prototype.playAnimation(this.anim,this.data.walk),this.setDirection(e),this.node.runAction(cc.sequence(cc.moveTo(this.getWalkTime(e),e),cc.callFunc(function(){this.checkAttack()}.bind(this))))}},e.prototype.checkAttack=function(){this.clearEnemyTargetArr(),0!=this.enemyTargetArr.length?this.walk():this.idle()},e.prototype.attack=function(){this.enemyTarget&&this.enemyTarget.isValid?(a.default.prototype.playAnimation(this.anim,this.data.attack),this.setDirection(this.enemyTarget.node.position),this.attackSchedule&&this.unschedule(this.attackSchedule),this.attackSchedule=this.scheduleOnce(function(){this.enemyTarget&&this.enemyTarget.isValid&&this.showEffect(this.data.effect,r.Constant.EFFECT_DOWN_ZINDEX,!0,this.data.attackDamage)}.bind(this),.6)):this.checkAttack()},e.prototype.walk=function(){this.isAttack=!0,a.default.prototype.playAnimation(this.anim,this.data.walk),this.enemyTarget=this.enemyTargetArr[0],this.enemyTarget.minionTarget(this),this.setDirection(this.enemyTarget.node.position);var t=this.node.x<this.enemyTarget.node.x?-1:1,e=this.enemyTarget.node.position.add(cc.v3(80*t,0));this.node.runAction(cc.sequence(cc.moveTo(this.getWalkTime(e),e),cc.callFunc(function(){this.attack(),this.enemyTarget&&this.enemyTarget.isValid&&this.enemyTarget.attack()}.bind(this))))},e.prototype.showEffect=function(t,e,o,n){void 0===o&&(o=!1),void 0===n&&(n=0);var i=cc.instantiate(this.effectPrefab);cc.Canvas.instance.node.addChild(i,e),i.getComponent(p.default).setData(t,this.data,o,n);var c=this.node.parent.convertToWorldSpaceAR(this.node.position),a=cc.Canvas.instance.node.convertToNodeSpaceAR(c),r=this.node.scaleX>0?-1:1;i.setPosition(a.add(cc.v3(40*r,20)))},c([h(cc.Node)],e.prototype,"body",void 0),c([h(p.default)],e.prototype,"impact",void 0),c([h(cc.Prefab)],e.prototype,"effectPrefab",void 0),c([h(cc.Node)],e.prototype,"aura",void 0),c([d],e)}(l.default);o.default=f,cc._RF.pop()},{"../../Constant_1_1":"Constant_1_1","../../Effect":"Effect","../../MinionData":"MinionData","../../Minion_1_1":"Minion_1_1","../../common/Utils":"Utils"}],GameService:[function(t,e,o){"use strict";cc._RF.push(e,"0e20fB9i6hBW676NnkXkILa","GameService"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../game/GlobalInfo"),i=t("./DataService"),c=t("../game/ModelUtils"),a=t("../game/Model"),r=function(){function t(){}return t.prototype.loadSavedData=function(){i.DataService.getInstance().getUser().then(function(t){c.ModelUtils.merge(n.GlobalInfo.me,t),n.GlobalInfo.me.firstTime&&(n.GlobalInfo.me.firstTime=!1,cc.Global.instant&&(FBInstant.setSessionData({firstime:!0}),FBInstant.canCreateShortcutAsync().then(function(t){t&&FBInstant.createShortcutAsync().then(function(){}).catch(function(){})}))),i.DataService.getInstance().saveUser(n.GlobalInfo.me)})},t.prototype.getScore=function(){var t=new a.Score;return t.point=0,t},t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t}();o.GameService=r,cc._RF.pop()},{"../game/GlobalInfo":"GlobalInfo","../game/Model":"Model","../game/ModelUtils":"ModelUtils","./DataService":"DataService"}],GlobalInfo:[function(t,e,o){"use strict";cc._RF.push(e,"270cdhMEdxA5aTVacR+rZPU","GlobalInfo"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../game/Model");o.GlobalInfo={reset:function(){this.me=new n.UserInfo}},o.GlobalInfo.reset(),cc._RF.pop()},{"../game/Model":"Model"}],Global:[function(t,e){"use strict";cc._RF.push(e,"fe57bJ3CHRK+bAg7aWT5bQ6","Global"),cc.Global={GAME:null,CAMERA_POS_Y:0,CAMERA_POS_X:0,instant:!0,isDialog:!1,PLAYER:null},cc._RF.pop()},{}],GoblinAssassin1_1:[function(t,e,o){"use strict";cc._RF.push(e,"47215LA/9lGTIn3diJjNQPR","GoblinAssassin1_1");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../Enemy"),r=t("../EnemyData_1_1"),s=cc._decorator,l=s.ccclass,p=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onLoad=function(){this.setData(r.LIST_ENEMY.GOBLIN_ASSASSIN)},c([l],e)}(a.default));o.default=p,cc._RF.pop()},{"../Enemy":"Enemy","../EnemyData_1_1":"EnemyData_1_1"}],GoblinFighter:[function(t,e,o){"use strict";cc._RF.push(e,"f89406TDn5JzJIehRdF9mj+","GoblinFighter");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../EnemyWK"),r=t("../EnemyWKData"),s=cc._decorator,l=s.ccclass,p=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onLoad=function(){this.setData(r.LIST_ENEMY.GOBLIN_FIGHTER)},c([l],e)}(a.default));o.default=p,cc._RF.pop()},{"../EnemyWK":"EnemyWK","../EnemyWKData":"EnemyWKData"}],Golem1:[function(t,e,o){"use strict";cc._RF.push(e,"47c2f4GNuVBsoqqmmS66PTh","Golem1");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../Tower"),r=t("../../TowerData"),s=cc._decorator,l=s.ccclass,p=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onLoad=function(){this.setData(r.LIST_TOWER.GOLEM_1),this.maxEnergy=150},e.prototype.checkNextAttack=function(){this.checkAttack()},e.prototype.setAnimPos=function(t){var e=this.anim.node,o=cc.v3();if(e.scaleX>0)switch(t){case this.data.frontIdle:o=cc.v3(0,34);break;case this.data.frontAttack:o=cc.v3(0,62);break;case this.data.frontReload:o=cc.v3(10.5,20.6);break;case this.data.backIdle:o=cc.v3(-8,53);break;case this.data.backAttack:o=cc.v3(-2,93);break;case this.data.backReload:o=cc.v3(8,40)}else switch(t){case this.data.frontIdle:o=cc.v3(0,34);break;case this.data.frontAttack:o=cc.v3(-3,63);break;case this.data.frontReload:o=cc.v3(-13,20.6);break;case this.data.backIdle:o=cc.v3(4,53);break;case this.data.backAttack:o=cc.v3(0,93);break;case this.data.backReload:o=cc.v3(-12,41)}e.setPosition(o)},c([l],e)}(a.default));o.default=p,cc._RF.pop()},{"../../Tower":"Tower","../../TowerData":"TowerData"}],Golem2:[function(t,e,o){"use strict";cc._RF.push(e,"f2dbaWxSQpN8qY0DdNBVGYp","Golem2");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../Tower"),r=t("../../TowerData"),s=cc._decorator,l=s.ccclass,p=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onLoad=function(){this.setData(r.LIST_TOWER.GOLEM_2)},e.prototype.checkNextAttack=function(){this.checkAttack()},e.prototype.setAnimPos=function(t){var e=this.anim.node,o=cc.v3();if(e.scaleX>0)switch(t){case this.data.frontIdle:o=cc.v3(-4,37.5);break;case this.data.frontAttack:o=cc.v3(0,64);break;case this.data.frontReload:o=cc.v3(10,21);break;case this.data.backIdle:o=cc.v3(-7,53);break;case this.data.backAttack:o=cc.v3(-4,102);break;case this.data.backReload:o=cc.v3(8,40)}else switch(t){case this.data.frontIdle:o=cc.v3(3,37.5);break;case this.data.frontAttack:o=cc.v3(-2,64);break;case this.data.frontReload:o=cc.v3(-11.5,21);break;case this.data.backIdle:o=cc.v3(4,53);break;case this.data.backAttack:o=cc.v3(0,102);break;case this.data.backReload:o=cc.v3(-9,41)}e.setPosition(o)},c([l],e)}(a.default));o.default=p,cc._RF.pop()},{"../../Tower":"Tower","../../TowerData":"TowerData"}],Golem3:[function(t,e,o){"use strict";cc._RF.push(e,"ad141LihXlKFa4K6cP3RTOC","Golem3");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../Tower"),r=t("../../TowerData"),s=cc._decorator,l=s.ccclass,p=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onLoad=function(){this.setData(r.LIST_TOWER.GOLEM_3)},e.prototype.checkNextAttack=function(){this.checkAttack()},e.prototype.setAnimPos=function(t){var e=this.anim.node,o=cc.v3();if(e.scaleX>0)switch(t){case this.data.frontIdle:o=cc.v3(-4,43);break;case this.data.frontAttack:o=cc.v3(-4,67);break;case this.data.frontReload:o=cc.v3(8.5,34);break;case this.data.backIdle:o=cc.v3(-7,60);break;case this.data.backAttack:o=cc.v3(-4,100);break;case this.data.backReload:o=cc.v3(7,47)}else switch(t){case this.data.frontIdle:o=cc.v3(2,43);break;case this.data.frontAttack:o=cc.v3(0,67);break;case this.data.frontReload:o=cc.v3(-10.5,34);break;case this.data.backIdle:o=cc.v3(4,60);break;case this.data.backAttack:o=cc.v3(0,100);break;case this.data.backReload:o=cc.v3(-9,47)}e.setPosition(o)},c([l],e)}(a.default));o.default=p,cc._RF.pop()},{"../../Tower":"Tower","../../TowerData":"TowerData"}],GolemAbyssBullet:[function(t,e,o){"use strict";cc._RF.push(e,"b52b3srXJtChryUFzLMh8Oa","GolemAbyssBullet");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../EW_1_1/Constant_1_1"),r=t("../../Bullet_WK"),s=cc._decorator,l=s.ccclass,p=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=null,e.effectCollider=null,e}return i(e,t),e.prototype.start=function(){},e.prototype.shootCustom=function(t,e){var o=this;if(t){this.node.zIndex=e.isFront?a.Constant.TOWER_FRONT_BULLET_ZINDEX:a.Constant.TOWER_BACK_BULLET_ZINDEX,this.node.setPosition(this.node.position.add(cc.v3(30*this.getPosXParam(e),80)));var n=t.node,i=n.parent.convertToWorldSpaceAR(n.position),c=this.node.parent.convertToNodeSpaceAR(i);cc.v2(this.node.position.x,this.node.position.y),this.node.setPosition(c),this.icon.scheduleOnce(function(){o.effectCollider.enabled=!0},this.icon.findAnimation("attack_range").duration/2),this.icon.setCompleteListener(function(t){"attack_range"==(t.animation?t.animation.name:"")&&(o.effectCollider.enabled=!1)})}else this.node.active=!1},e.prototype.getPosXParam=function(t){return t.isLeftBullet?1:-1},c([p(sp.Skeleton)],e.prototype,"icon",void 0),c([p(cc.CircleCollider)],e.prototype,"effectCollider",void 0),c([l],e)}(r.default);o.default=u,cc._RF.pop()},{"../../../EW_1_1/Constant_1_1":"Constant_1_1","../../Bullet_WK":"Bullet_WK"}],GolemAbyss:[function(t,e,o){"use strict";cc._RF.push(e,"451d2TjpgRCRZH9ygCSKQdY","GolemAbyss");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../EW_1_1/TowerData"),r=t("../../Tower_WK"),s=cc._decorator,l=s.ccclass,p=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onLoad=function(){this.setData(a.LIST_TOWER_WK.GOLEM_ABYSS)},e.prototype.checkNextAttack=function(){this.checkAttack()},e.prototype.setAnimPos=function(t){var e=this.anim.node,o=cc.v3();if(e.scaleX>0)switch(t){case this.data.frontIdle:case this.data.frontAttack:case this.data.backIdle:case this.data.backAttack:o=cc.v3(-10,51)}else switch(t){case this.data.frontIdle:case this.data.frontAttack:case this.data.backIdle:case this.data.backAttack:o=cc.v3(9,51)}e.setPosition(o)},c([l],e)}(r.default));o.default=p,cc._RF.pop()},{"../../../EW_1_1/TowerData":"TowerData","../../Tower_WK":"Tower_WK"}],GolemBlue:[function(t,e,o){"use strict";cc._RF.push(e,"8cb64VpawxFr7aLHNtCDlWX","GolemBlue");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../common/Utils"),r=t("../../Constant_1_1"),s=t("../../Effect"),l=t("../../Tower"),p=t("../../TowerData"),u=cc._decorator,d=u.ccclass,h=u.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.magic_circle=null,e}return i(e,t),e.prototype.onLoad=function(){this.setData(p.LIST_TOWER.GOLEM_BLUE),this.maxEnergy=250,this.showLight(),this.setDirection(r.DIRECTION.LEFT)},e.prototype.checkNextAttack=function(){this.checkSkill()?this.skill():this.checkAttack()},e.prototype.skill=function(){this.isSkill=!0,this.countEnergy=0,this.anim.node.scaleX=Math.abs(this.anim.node.scaleX),this.idle(!0),this.showImpact()},e.prototype.attackCustom=function(t){var e=cc.instantiate(this.effectPrefab);cc.Global.GAME.game.addChild(e),e.getComponent(s.default).setData(this.data.bulletUpEffect,this.data,!0,this.data.attackDamage),e.setScale(.8),e.setPosition(t.node.position),this.fixEffect(e,this.data.bulletUpEffect),e=cc.instantiate(this.effectPrefab),cc.Canvas.instance.node.addChild(e,1),e.getComponent(s.default).setData("golem_effect_impact",this.data,!1),e.setScale(2),e.setPosition(t.node.position.add(cc.v3(0,30))),this.fixEffect(e,"golem_effect_impact"),t.attacked(this.data.attackDamage,r.ATTACK_TYPE.DEFAULT)},e.prototype.showImpact=function(){var t=cc.instantiate(this.effectPrefab);cc.Canvas.instance.node.addChild(t,1),t.getComponent(s.default).setData("golem_effect_double_hand_skill",this.data,!1),t.setPosition(this.node.position),this.fixEffect(t,"golem_effect_double_hand_skill"),this.scheduleOnce(function(){a.default.prototype.playAnimation(this.anim,this.data.frontSkill)}.bind(this),.3),this.scheduleOnce(function(){var t=cc.instantiate(this.effectPrefab);cc.Global.GAME.game.addChild(t,1),t.getComponent(s.default).setData("golem_effect_skill",this.data,!1),t.setPosition(this.node.position),this.fixEffect(t,"golem_effect_skill"),this.clearEnemyTargetArr();for(var e=0;e<this.enemyTargetArr.length;e++)this.enemyTargetArr[e].attacked(this.data.skillDame,r.ATTACK_TYPE.DEFAULT);cc.Canvas.instance.node.emit(r.Constant.EVENT.IMPACT_CAMERA)}.bind(this),.7),this.scheduleOnce(function(){var t=cc.instantiate(this.effectPrefab);this.node.addChild(t,r.Constant.TOWER_FRONT_BULLET_ZINDEX),t.getComponent(s.default).setData("golem_effect_hand_skill",this.data,!1),t.setPosition(t.position.add(cc.v3(-2,-10)))}.bind(this),.9)},e.prototype.showLight=function(){this.schedule(function(){var t=cc.instantiate(this.effectPrefab);this.node.addChild(t),t.getComponent(s.default).setData("golem_light",this.data,!1),t.setScale(2*t.scaleX),t.setPosition(t.position.add(cc.v3(0,50))),t.zIndex=r.Constant.TOWER_FRONT_BULLET_ZINDEX,this.fixEffect(t,"golem_light")}.bind(this),3)},e.prototype.fixEffect=function(t,e){var o=t.getChildByName("back"),n=t.getChildByName("mid"),i=t.getChildByName("front"),c=t.getChildByName("impact"),a=t.getChildByName("circle"),r=t.getChildByName("lhand"),s=t.getChildByName("rhand");switch(o.active=n.active=i.active=c.active=a.active=r.active=s.active=!1,e){case this.data.bulletUpEffect:o.active=n.active=i.active=!0;break;case"golem_effect_skill":c.active=a.active=!0;break;case"golem_effect_double_hand_skill":r.active=s.active=!0}},e.prototype.setAnimPos=function(t){var e=this.anim.node,o=cc.v3();if(e.scaleX>0)switch(t){case this.data.frontIdle:o=cc.v3(2.5,55.5);break;case this.data.frontAttack:o=cc.v3(10,60.5);break;case this.data.backIdle:o=cc.v3(3,55);break;case this.data.backAttack:o=cc.v3(10,60);break;case this.data.frontSkill:o=cc.v3(5,66)}else switch(t){case this.data.frontIdle:o=cc.v3(0,55.5);break;case this.data.frontAttack:o=cc.v3(-7,60.5);break;case this.data.backIdle:o=cc.v3(-3,55);break;case this.data.backAttack:o=cc.v3(-10,60);break;case this.data.frontSkill:o=cc.v3(-3,66)}e.setPosition(o)},c([h(cc.Node)],e.prototype,"magic_circle",void 0),c([d],e)}(l.default);o.default=f,cc._RF.pop()},{"../../Constant_1_1":"Constant_1_1","../../Effect":"Effect","../../Tower":"Tower","../../TowerData":"TowerData","../../common/Utils":"Utils"}],GolemBullet:[function(t,e,o){"use strict";cc._RF.push(e,"0dd79qGIelBy4eFOIReiZ5Y","GolemBullet");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../Constant_1_1"),r=t("../../TowerData"),s=t("../Bullet"),l=cc._decorator,p=l.ccclass,u=l.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.fireStone=null,e.stone=null,e.stoneFrame=[],e}return i(e,t),e.prototype.start=function(){},e.prototype.shootCustom=function(t,e){e.data==r.LIST_TOWER.ANCIENT_OF_FIRE?(this.runFireStone(),this.stone.spriteFrame=this.stoneFrame[1]):(this.node.setScale(.5),this.fireStone.active=!1,this.stone.spriteFrame=this.stoneFrame[0]),this.node.zIndex=e.isFront?a.Constant.TOWER_FRONT_BULLET_ZINDEX:a.Constant.TOWER_BACK_BULLET_ZINDEX,this.node.setPosition(this.node.position.add(cc.v3(60*this.getPosXParam(e),10)));var o=t.node,n=o.parent.convertToWorldSpaceAR(o.position),i=this.node.parent.convertToNodeSpaceAR(n),c=cc.v2(this.node.position.x,this.node.position.y),s=(i.x-this.node.position.x)/3*2,l=this.node.x<o.x?-1:1;this.node.runAction(cc.sequence(cc.spawn(cc.bezierTo(1,[c,c.add(cc.v2(s,400)),i]),cc.rotateBy(1,90*l)),cc.callFunc(function(){cc.Canvas.instance.node.emit(a.Constant.EVENT.GOLEM_IMPACT),this.showEffect(this.data.bulletDownEffect,a.Constant.EFFECT_DOWN_ZINDEX,!1),this.showEffect(this.data.bulletUpEffect,a.Constant.EFFECT_UP_ZINDEX,!0,this.data.attackDamage),this.node.destroy()}.bind(this))))},e.prototype.getPosXParam=function(t){return t.isLeftBullet?-1:1},e.prototype.runFireStone=function(){this.fireStone.active=!0,this.fireStone.runAction(cc.sequence(cc.delayTime(.5),cc.fadeOut(.5)))},c([u(cc.Node)],e.prototype,"fireStone",void 0),c([u(cc.Sprite)],e.prototype,"stone",void 0),c([u(cc.SpriteFrame)],e.prototype,"stoneFrame",void 0),c([p],e)}(s.default);o.default=d,cc._RF.pop()},{"../../Constant_1_1":"Constant_1_1","../../TowerData":"TowerData","../Bullet":"Bullet"}],GolemCelestialBullet:[function(t,e,o){"use strict";cc._RF.push(e,"b2a08JmXclCR6ZIkz4c0MFV","GolemCelestialBullet");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../EW_1_1/Constant_1_1"),r=t("../../Bullet_WK"),s=cc._decorator,l=s.ccclass,p=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=null,e.effectCollider=null,e}return i(e,t),e.prototype.start=function(){},e.prototype.shootCustom=function(t,e){var o=this;if(t){this.node.zIndex=e.isFront?a.Constant.TOWER_FRONT_BULLET_ZINDEX:a.Constant.TOWER_BACK_BULLET_ZINDEX,this.node.setPosition(this.node.position.add(cc.v3(30*this.getPosXParam(e),80)));var n=t.node,i=n.parent.convertToWorldSpaceAR(n.position),c=this.node.parent.convertToNodeSpaceAR(i);cc.v2(this.node.position.x,this.node.position.y),this.node.setPosition(c),this.icon.scheduleOnce(function(){o.effectCollider.enabled=!0},this.icon.findAnimation("attack_range").duration/2),this.icon.setCompleteListener(function(t){"attack_range"==(t.animation?t.animation.name:"")&&(o.effectCollider.enabled=!1)})}else this.node.active=!1},e.prototype.getPosXParam=function(t){return t.isLeftBullet?1:-1},c([p(sp.Skeleton)],e.prototype,"icon",void 0),c([p(cc.CircleCollider)],e.prototype,"effectCollider",void 0),c([l],e)}(r.default);o.default=u,cc._RF.pop()},{"../../../EW_1_1/Constant_1_1":"Constant_1_1","../../Bullet_WK":"Bullet_WK"}],GolemCelestial:[function(t,e,o){"use strict";cc._RF.push(e,"53d052tEqZDJKOSJvLUKMTv","GolemCelestial");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../EW_1_1/TowerData"),r=t("../../Tower_WK"),s=cc._decorator,l=s.ccclass,p=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onLoad=function(){this.setData(a.LIST_TOWER_WK.GOLEM_CELESTIAL)},e.prototype.checkNextAttack=function(){this.checkAttack()},e.prototype.setAnimPos=function(t){var e=this.anim.node,o=cc.v3();if(e.scaleX>0)switch(t){case this.data.frontIdle:case this.data.frontAttack:case this.data.backIdle:case this.data.backAttack:o=cc.v3(-10,51)}else switch(t){case this.data.frontIdle:case this.data.frontAttack:case this.data.backIdle:case this.data.backAttack:o=cc.v3(9,51)}e.setPosition(o)},c([l],e)}(r.default));o.default=p,cc._RF.pop()},{"../../../EW_1_1/TowerData":"TowerData","../../Tower_WK":"Tower_WK"}],GolemMinion:[function(t,e,o){"use strict";cc._RF.push(e,"3b55ejilFFDL5AAiEFOiQf8","GolemMinion");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../Minion_1_1"),r=t("../../MinionData"),s=t("../../Constant_1_1"),l=t("../../common/Utils"),p=cc._decorator,u=p.ccclass,d=(p.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onLoad=function(){this.setData(r.LIST_MINION.GOLEM_MINION)},e.prototype.checkAttack=function(){this.isDie||(this.clearEnemyTargetArr(),0!=this.enemyTargetArr.length?this.walk():this.idle())},e.prototype.attack=function(){if(this.enemyTarget&&this.enemyTarget.isValid){var t=[this.data.attack,this.data.attack2][Math.floor(2*Math.random())];l.default.prototype.playAnimation(this.anim,t),this.enemyTarget.attacked(this.data.attackDamage,s.ATTACK_TYPE.DEFAULT)}else this.backWalk()},e.prototype.walk=function(){this.isAttack=!0,l.default.prototype.playAnimation(this.anim,this.data.walk),this.enemyTarget=this.enemyTargetArr[0],this.enemyTarget.minionTarget(this),this.setDirection(this.enemyTarget.node.position);var t=this.node.x<this.enemyTarget.node.x?-1:1,e=this.enemyTarget.node.position.add(cc.v3(50*t,20));this.node.runAction(cc.sequence(cc.moveTo(this.getWalkTime(e),e),cc.callFunc(function(){this.attack(),this.enemyTarget&&this.enemyTarget.isValid&&this.enemyTarget.attack()}.bind(this))))},c([u],e)}(a.default));o.default=d,cc._RF.pop()},{"../../Constant_1_1":"Constant_1_1","../../MinionData":"MinionData","../../Minion_1_1":"Minion_1_1","../../common/Utils":"Utils"}],Golem:[function(t,e,o){"use strict";cc._RF.push(e,"1e3e7JJ+eNA75n2zM3icp4T","Golem");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../common/Utils"),r=t("../../Constant_1_1"),s=t("../../Effect"),l=t("../../Tower"),p=t("../../TowerData"),u=t("../Bullet"),d=cc._decorator,h=d.ccclass,f=d.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.frontStone=null,e.skillPrefab=null,e}return i(e,t),e.prototype.onLoad=function(){this.frontStone.zIndex=r.Constant.TOWER_FRONT_STONE_ZINDEX,this.setData(p.LIST_TOWER.ANCIENT_OF_FIRE),this.maxEnergy=150,this.setDirection(r.DIRECTION.LEFT)},e.prototype.skill=function(){this.countEnergy=0,a.default.prototype.playAnimation(this.anim,this.data.frontSkill),this.clearEnemyTargetArr();var t=cc.instantiate(this.effectPrefab);this.node.addChild(t),t.setScale(2.5*t.scaleX),t.getComponent(s.default).setData("golem_skill_effect",this.data,!1),t.setPosition(t.position.add(cc.v3(15,68))),t.zIndex=cc.macro.MAX_ZINDEX;var e=this.enemyTargetArr[0].node;this.anim.node.scaleX=this.node.x<e.x?Math.abs(this.anim.node.scaleX):-Math.abs(this.anim.node.scaleX);for(var o=function(t){var e=n.enemyTargetArr[t]?n.enemyTargetArr[t]:n.enemyTargetArr[0];n.scheduleOnce(function(){this.runSkill(e)}.bind(n),.3*t)},n=this,i=0;i<4;i++)o(i)},e.prototype.runSkill=function(t){if(t&&t.isValid){var e=t.node.position,o=this.node.x<e.x?-1:1,n=cc.instantiate(this.skillPrefab);cc.Canvas.instance.node.addChild(n),n.setPosition(e.add(cc.v3(700*o,700))),n.scaleX=o<0?n.scaleX:-n.scaleX,n.zIndex=r.Constant.SKILL_ZINDEX,n.runAction(cc.sequence(cc.moveTo(.8,e.add(cc.v3(0,30))),cc.callFunc(function(){n.getComponent(u.default).showEffect(this.data.bulletDownEffect,r.Constant.EFFECT_DOWN_ZINDEX,!1),n.getComponent(u.default).showEffect(this.data.skillEffect,r.Constant.EFFECT_UP_ZINDEX,!0,this.data.skillDame),n.destroy()}.bind(this))))}},e.prototype.checkNextAttack=function(){this.checkSkill()?this.skill():(this.checkAttackEffect(),this.checkAttack())},e.prototype.checkAttackEffect=function(){if(this.countAttack++,this.countAttack>2){this.countAttack=0;var t=cc.instantiate(this.effectPrefab);this.node.addChild(t),t.setScale(3*t.scaleX),t.getComponent(s.default).setData("golem_fire_effect",this.data,!1),t.setPosition(t.position.add(cc.v3(-5,-35))),t.zIndex=r.Constant.TOWER_BACK_BULLET_ZINDEX}},c([f(cc.Node)],e.prototype,"frontStone",void 0),c([f(cc.Prefab)],e.prototype,"skillPrefab",void 0),c([h],e)}(l.default);o.default=y,cc._RF.pop()},{"../../Constant_1_1":"Constant_1_1","../../Effect":"Effect","../../Tower":"Tower","../../TowerData":"TowerData","../../common/Utils":"Utils","../Bullet":"Bullet"}],Hand:[function(t,e,o){"use strict";cc._RF.push(e,"d5ced3TFxVFDq/uivMSwZFU","Hand");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./Constant_1_1"),r=cc._decorator,s=r.ccclass,l=r.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.circlePrefab=null,e}return i(e,t),e.prototype.start=function(){},e.prototype.showCircle=function(){var t=cc.instantiate(this.circlePrefab);(cc.Global.GAME&&cc.Global.GAME.btnUpdate?cc.Global.GAME.btnUpdate:cc.Canvas.instance.node.getChildByName("ui")).addChild(t,a.Constant.EFFECT_UP_ZINDEX),t.setPosition(this.node.position.add(cc.v3(0,10)))},c([l(cc.Prefab)],e.prototype,"circlePrefab",void 0),c([s],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./Constant_1_1":"Constant_1_1"}],HobGoblin:[function(t,e,o){"use strict";cc._RF.push(e,"9ec59FOe59EL6pqLg0ZOY9H","HobGoblin");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../EnemyWK"),r=t("../EnemyWKData"),s=cc._decorator,l=s.ccclass,p=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onLoad=function(){this.setData(r.LIST_ENEMY.HOB_GOBLIN)},e.prototype.setAnimPos=function(t){var e=cc.v3(0,32);switch(t){case this.data.attack:e=cc.v3(-5,52);break;case this.data.die:e=cc.v3(-28,29)}this.icon.setPosition(e)},c([l],e)}(a.default));o.default=p,cc._RF.pop()},{"../EnemyWK":"EnemyWK","../EnemyWKData":"EnemyWKData"}],IceTrollThrower:[function(t,e,o){"use strict";cc._RF.push(e,"0097cGDADJG+bRWlIVcRDJm","IceTrollThrower");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../Enemy"),r=t("../EnemyData_1_1"),s=cc._decorator,l=s.ccclass,p=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onLoad=function(){this.setData(r.LIST_ENEMY.ICE_TROLL_THROWER)},c([l],e)}(a.default));o.default=p,cc._RF.pop()},{"../Enemy":"Enemy","../EnemyData_1_1":"EnemyData_1_1"}],Infor:[function(t,e,o){"use strict";cc._RF.push(e,"1f7a7xANVhAeJC5zBPUyEgb","Infor");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../EW_1_1/Constant_1_1"),r=cc._decorator,s=r.ccclass,l=r.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=null,e.iconTowerAtlas=null,e.towerName=null,e.towerType=null,e.minionDamage=null,e.attackDamage=null,e.speedDamage=null,e}return i(e,t),e.prototype.onLoad=function(){cc.Canvas.instance.node.on(a.Constant.EVENT.HIDE_INFOR,this.hideInfor,this)},e.prototype.start=function(){},e.prototype.setData=function(t){this.icon.spriteFrame=this.iconTowerAtlas.getSpriteFrame(t.infor.typeName),this.towerName.string=t.infor.name,this.towerType.string=t.infor.towerType,this.minionDamage.string="barrack"==t.infor.typeName?"10":"0",this.attackDamage.string="barrack"==t.infor.typeName?"0":""+t.attackDamage,this.speedDamage.string=t.infor.speed},e.prototype.hideInfor=function(){this.node.active=!1},c([l(cc.Sprite)],e.prototype,"icon",void 0),c([l(cc.SpriteAtlas)],e.prototype,"iconTowerAtlas",void 0),c([l(cc.Label)],e.prototype,"towerName",void 0),c([l(cc.Label)],e.prototype,"towerType",void 0),c([l(cc.Label)],e.prototype,"minionDamage",void 0),c([l(cc.Label)],e.prototype,"attackDamage",void 0),c([l(cc.Label)],e.prototype,"speedDamage",void 0),c([s],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../EW_1_1/Constant_1_1":"Constant_1_1"}],JoyStick:[function(t,e,o){"use strict";cc._RF.push(e,"e6efdOMu+9CCIDotUjQ/LtP","JoyStick");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../EW_1_1/Constant_1_1"),r=cc._decorator,s=r.ccclass,l=r.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dot=null,e.ring=null,e.radius=null,e.stickPos=null,e}return i(e,t),e.prototype.start=function(){this.radius=this.ring.width/2,this.initTouchEvent()},e.prototype.initTouchEvent=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.touchStartEvent,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.touchMoveEvent,this),this.node.on(cc.Node.EventType.TOUCH_END,this.touchEndEvent,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.touchEndEvent,this)},e.prototype.touchStartEvent=function(t){var e=this.node.convertToNodeSpaceAR(t.getLocation());this.stickPos=this.ring.getPosition();var o=e.sub(this.ring.getPosition().mag());this.radius>o&&this.dot.setPosition(e),cc.Canvas.instance.node.emit(a.Constant.EVENT.PLAYER_RUN),"Federyc"==cc.Global.PLAYER.name?cc.Global.PLAYER.getComponent("Federyc").directionX=this.dot.x>0?1.3:-1.3:cc.Global.PLAYER.getComponent("Asura").directionX=this.dot.x>0?-1:1},e.prototype.touchMoveEvent=function(t){var e=this.ring.convertToNodeSpaceAR(t.getLocation()),o=e.mag(),n=this.stickPos.x+e.x,i=this.stickPos.y+e.y,c=cc.v2(n,i).sub(this.ring.getPosition()).normalize();if(this.radius>o)this.dot.setPosition(cc.v2(n,i));else{var r=this.stickPos.x+c.x*this.radius,s=this.stickPos.y+c.y*this.radius;this.dot.setPosition(cc.v2(r,s))}cc.Canvas.instance.node.emit(a.Constant.EVENT.PLAYER_RUN),"Federyc"==cc.Global.PLAYER.name?(cc.Global.PLAYER.getComponent("Federyc").moveDir=c,cc.Global.PLAYER.getComponent("Federyc").directionX=this.dot.x>0?1.3:-1.3):(cc.Global.PLAYER.getComponent("Asura").moveDir=c,cc.Global.PLAYER.getComponent("Asura").directionX=this.dot.x>0?-1:1)},e.prototype.touchEndEvent=function(){this.dot.setPosition(this.ring.getPosition()),cc.Canvas.instance.node.emit(a.Constant.EVENT.PLAYER_IDLE)},c([l(cc.Node)],e.prototype,"dot",void 0),c([l(cc.Node)],e.prototype,"ring",void 0),c([s],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../../EW_1_1/Constant_1_1":"Constant_1_1"}],KingJuliusIII:[function(t,e,o){"use strict";cc._RF.push(e,"daae0HnhbFDMZITiLjI+xaX","KingJuliusIII");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../EW_1_1/Minion_1_1"),r=t("../MinionData"),s=cc._decorator,l=s.ccclass,p=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bloodLabel=null,e.atkAudio=null,e.ulti_eff=null,e.ultiAudio=null,e.atkAudioSchedule=null,e.ultiAudioSchedule=null,e}return i(e,t),e.prototype.onLoad=function(){this.setData(r.LIST_MINION.KING_JULIUS_III),this.node.scaleX=-Math.abs(this.node.scaleX),this.bloodNode.scaleX=this.node.scaleX<0?-Math.abs(this.bloodNode.scaleX):Math.abs(this.bloodNode.scaleX)},e.prototype.setBlood=function(t){var e=t>0?t:0;this.bloodLabel.string=String(10*e)},e.prototype.offEff=function(){this.ulti_eff.active=!1},e.prototype.playSoundAtk=function(){var t=this;this.atkAudioSchedule&&this.unschedule(this.atkAudioSchedule),this.atkAudioSchedule=this.scheduleOnce(function(){cc.audioEngine.play(t.atkAudio,!1,1.5)},0)},e.prototype.playSoundSkill=function(){var t=this;this.ultiAudioSchedule&&this.unschedule(this.ultiAudioSchedule),this.ultiAudioSchedule=this.scheduleOnce(function(){cc.audioEngine.play(t.ultiAudio,!1,2)},0)},c([p(cc.Label)],e.prototype,"bloodLabel",void 0),c([p(cc.AudioClip)],e.prototype,"atkAudio",void 0),c([p(cc.Node)],e.prototype,"ulti_eff",void 0),c([p(cc.AudioClip)],e.prototype,"ultiAudio",void 0),c([l],e)}(a.default);o.default=u,cc._RF.pop()},{"../../EW_1_1/Minion_1_1":"Minion_1_1","../MinionData":"MinionData"}],LoadLevel:[function(t,e,o){"use strict";cc._RF.push(e,"6d30cF5B1lFX5VbufIRUZ9j","LoadLevel");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../services/DialogService"),r=cc._decorator,s=r.ccclass,l=r.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.listLevel=[],e}return i(e,t),e.prototype.startLevel=function(){cc.Global.isDialog=!1,console.log(a.default.getInstance().resultLevelNum()),cc.director.loadScene("FB_INSTANT")},c([l(cc.Prefab)],e.prototype,"listLevel",void 0),c([s],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../services/DialogService":"DialogService"}],Lucius:[function(t,e,o){"use strict";cc._RF.push(e,"c3ce3lKqcNB9b2SQoetK8kK","Lucius");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../EW_1_1/Constant_1_1"),r=t("../MinionWK"),s=t("../MinionWKData"),l=cc._decorator,p=l.ccclass,u=l.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.body=null,e.bulletPrefab=null,e.aura=null,e.atkAudio=null,e.atk3Audio=null,e.ultiAudio=null,e.ulti_eff1=null,e.ulti_eff2=null,e.atkAudioSchedule=null,e.ultiAudioSchedule=null,e.isTouch=!1,e.bulletSchedule=null,e.moveDir=null,e.directionX=null,e}return i(e,t),e.prototype.onLoad=function(){this.setData(s.LIST_MINION.LUCIUS),cc.Canvas.instance.node.on(a.Constant.EVENT.PLAYER_RUN,this.walk,this),cc.Canvas.instance.node.on(a.Constant.EVENT.PLAYER_IDLE,this.idle,this)},e.prototype.offEff=function(){},e.prototype.walk=function(){this.isAttack=!1,this.isRun||(this.anim.setAnimation(0,this.data.walk,!0),this.isRun=!0)},e.prototype.playSoundAtk=function(t){var e=this;switch(this.atkAudioSchedule&&this.unschedule(this.atkAudioSchedule),t){case 3:this.atkAudioSchedule=this.scheduleOnce(function(){cc.audioEngine.play(e.atk3Audio,!1,1)},.25);break;default:this.atkAudioSchedule=this.scheduleOnce(function(){cc.audioEngine.play(e.atkAudio,!1,.2)},.25)}},e.prototype.playSoundSkill=function(){},e.prototype.update=function(){if(this.moveDir&&this.directionX){if(!this.isRun||this.isDie||this.isAttack)t=this.node.position.add(this.moveDir.mul(0)),this.node.setPosition(t),this.node.scaleX=this.directionX;else{var t=this.node.position.add(this.moveDir.mul(200/60));this.node.setPosition(t),console.log(this.node.scaleX),this.node.scaleX=this.directionX}this.node.getChildByName("blood").scaleX=.8*this.directionX}},c([u(cc.Node)],e.prototype,"body",void 0),c([u(cc.Prefab)],e.prototype,"bulletPrefab",void 0),c([u(cc.Node)],e.prototype,"aura",void 0),c([u(cc.AudioClip)],e.prototype,"atkAudio",void 0),c([u(cc.AudioClip)],e.prototype,"atk3Audio",void 0),c([u(cc.AudioClip)],e.prototype,"ultiAudio",void 0),c([u(cc.Node)],e.prototype,"ulti_eff1",void 0),c([u(cc.Node)],e.prototype,"ulti_eff2",void 0),c([p],e)}(r.default);o.default=d,cc._RF.pop()},{"../../EW_1_1/Constant_1_1":"Constant_1_1","../MinionWK":"MinionWK","../MinionWKData":"MinionWKData"}],Mage1:[function(t,e,o){"use strict";cc._RF.push(e,"e7c3bBpb7hDs52N7yFfM/0o","Mage1");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../TowerData"),r=t("../../Tower"),s=cc._decorator,l=s.ccclass,p=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onLoad=function(){this.setData(a.LIST_TOWER.MAGE_1)},e.prototype.checkNextAttack=function(){this.checkAttack()},e.prototype.setAnimPos=function(t){var e=this.anim.node,o=cc.v3();if(e.scaleX>0)switch(t){case this.data.frontIdle:case this.data.frontAttack:case this.data.backIdle:case this.data.backAttack:o=cc.v3(-10,51)}else switch(t){case this.data.frontIdle:case this.data.frontAttack:case this.data.backIdle:case this.data.backAttack:o=cc.v3(9,51)}e.setPosition(o)},c([l],e)}(r.default));o.default=p,cc._RF.pop()},{"../../Tower":"Tower","../../TowerData":"TowerData"}],MageBullet:[function(t,e,o){"use strict";cc._RF.push(e,"e9963c1EpFNeZq9s69twuCG","MageBullet");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../common/Utils"),r=t("../../Constant_1_1"),s=t("../Bullet"),l=cc._decorator,p=l.ccclass,u=l.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=null,e}return i(e,t),e.prototype.start=function(){},e.prototype.shootCustom=function(t,e){this.node.zIndex=e.isFront?r.Constant.TOWER_FRONT_BULLET_ZINDEX:r.Constant.TOWER_BACK_BULLET_ZINDEX,this.node.setPosition(this.node.position.add(cc.v3(20*this.getPosXParam(e),90)));var o=t.node,n=o.parent.convertToWorldSpaceAR(o.position),i=this.node.parent.convertToNodeSpaceAR(n),c=cc.v2(this.node.position.x,this.node.position.y),s=a.default.prototype.angle(i.x,i.y,c.x,c.y);this.icon.angle=s+90,this.node.runAction(cc.sequence(cc.moveTo(.3,i),cc.callFunc(function(){this.showEffect(this.data.bulletUpEffect,r.Constant.EFFECT_UP_ZINDEX,!0),t.isValid&&t.attacked(this.data.attackDamage,this.data.attackType,this.data),this.node.destroy()}.bind(this))))},e.prototype.getPosXParam=function(t){return t.isLeftBullet?1:-1},c([u(cc.Node)],e.prototype,"icon",void 0),c([p],e)}(s.default);o.default=d,cc._RF.pop()},{"../../Constant_1_1":"Constant_1_1","../../common/Utils":"Utils","../Bullet":"Bullet"}],MageEnchantressBullet:[function(t,e,o){"use strict";cc._RF.push(e,"1807cM5RStKabsI01lfGs4m","MageEnchantressBullet");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../EW_1_1/common/Utils"),r=t("../../../EW_1_1/Constant_1_1"),s=t("../../Bullet_WK"),l=cc._decorator,p=l.ccclass,u=l.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=null,e}return i(e,t),e.prototype.start=function(){},e.prototype.shootCustom=function(t,e){this.node.zIndex=e.isFront?r.Constant.TOWER_FRONT_BULLET_ZINDEX:r.Constant.TOWER_BACK_BULLET_ZINDEX,this.node.setPosition(this.node.position.add(cc.v3(30*this.getPosXParam(e),80)));var o=t.node,n=o.parent.convertToWorldSpaceAR(o.position),i=this.node.parent.convertToNodeSpaceAR(n),c=cc.v2(this.node.position.x,this.node.position.y),s=a.default.prototype.angle(i.x,i.y,c.x,c.y);this.icon.angle=s,this.node.runAction(cc.sequence(cc.moveTo(.45,i.add(cc.v2(-30,10))),cc.callFunc(function(){this.showEffect(this.data.bulletUpEffect,r.Constant.EFFECT_UP_ZINDEX,!0),t.isValid&&t.attacked(this.data.attackDamage,this.data.attackType,this.data),this.node.destroy()}.bind(this))))},e.prototype.getPosXParam=function(t){return t.isLeftBullet?1:-1},c([u(cc.Node)],e.prototype,"icon",void 0),c([p],e)}(s.default);o.default=d,cc._RF.pop()},{"../../../EW_1_1/Constant_1_1":"Constant_1_1","../../../EW_1_1/common/Utils":"Utils","../../Bullet_WK":"Bullet_WK"}],MageEnchantress:[function(t,e,o){"use strict";cc._RF.push(e,"1d8d8JDMMBEup8/WraSgD4D","MageEnchantress");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../EW_1_1/TowerData"),r=t("../../Tower_WK"),s=cc._decorator,l=s.ccclass,p=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onLoad=function(){this.setData(a.LIST_TOWER_WK.MAGE_ENCHANTRESS)},e.prototype.checkNextAttack=function(){this.checkAttack()},e.prototype.setAnimPos=function(t){var e=this.anim.node,o=cc.v3();if(e.scaleX>0)switch(t){case this.data.frontIdle:case this.data.frontAttack:case this.data.backIdle:case this.data.backAttack:o=cc.v3(-10,51)}else switch(t){case this.data.frontIdle:case this.data.frontAttack:case this.data.backIdle:case this.data.backAttack:o=cc.v3(9,51)}e.setPosition(o)},c([l],e)}(r.default));o.default=p,cc._RF.pop()},{"../../../EW_1_1/TowerData":"TowerData","../../Tower_WK":"Tower_WK"}],MageMysticBullet:[function(t,e,o){"use strict";cc._RF.push(e,"d728cspKDBM1IQRaRf7kqde","MageMysticBullet");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../EW_1_1/common/Utils"),r=t("../../../EW_1_1/Constant_1_1"),s=t("../../Bullet_WK"),l=cc._decorator,p=l.ccclass,u=l.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=null,e}return i(e,t),e.prototype.start=function(){},e.prototype.shootCustom=function(t,e){this.node.zIndex=e.isFront?r.Constant.TOWER_FRONT_BULLET_ZINDEX:r.Constant.TOWER_BACK_BULLET_ZINDEX,this.node.setPosition(this.node.position.add(cc.v3(70*this.getPosXParam(e),80)));var o=t.node,n=o.parent.convertToWorldSpaceAR(o.position),i=this.node.parent.convertToNodeSpaceAR(n),c=cc.v2(this.node.position.x,this.node.position.y),s=a.default.prototype.angle(i.x,i.y,c.x,c.y);this.icon.angle=s,this.node.runAction(cc.sequence(cc.moveTo(.35,i.add(cc.v2(-10,10))),cc.callFunc(function(){this.showEffect(this.data.bulletUpEffect,r.Constant.EFFECT_UP_ZINDEX,!0),t.isValid&&t.attacked(this.data.attackDamage,this.data.attackType,this.data),this.node.destroy()}.bind(this))))},e.prototype.getPosXParam=function(t){return t.isLeftBullet?1:-1},c([u(cc.Node)],e.prototype,"icon",void 0),c([p],e)}(s.default);o.default=d,cc._RF.pop()},{"../../../EW_1_1/Constant_1_1":"Constant_1_1","../../../EW_1_1/common/Utils":"Utils","../../Bullet_WK":"Bullet_WK"}],MageMystic:[function(t,e,o){"use strict";cc._RF.push(e,"5195dRXng5Fz5aAAFAPWA1M","MageMystic");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../EW_1_1/TowerData"),r=t("../../Tower_WK"),s=cc._decorator,l=s.ccclass,p=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onLoad=function(){this.setData(a.LIST_TOWER_WK.MAGE_ENCHANTRESS)},e.prototype.checkNextAttack=function(){this.checkAttack()},e.prototype.setAnimPos=function(t){var e=this.anim.node,o=cc.v3();if(e.scaleX>0)switch(t){case this.data.frontIdle:case this.data.frontAttack:case this.data.backIdle:case this.data.backAttack:o=cc.v3(-10,51)}else switch(t){case this.data.frontIdle:case this.data.frontAttack:case this.data.backIdle:case this.data.backAttack:o=cc.v3(9,51)}e.setPosition(o)},c([l],e)}(r.default));o.default=p,cc._RF.pop()},{"../../../EW_1_1/TowerData":"TowerData","../../Tower_WK":"Tower_WK"}],Mage:[function(t,e,o){"use strict";cc._RF.push(e,"aee7au5ANFGuY3zFu2T0nDc","Mage");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../TowerData"),r=t("../../Tower"),s=t("../../Constant_1_1"),l=t("../../Effect"),p=cc._decorator,u=p.ccclass,d=(p.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onLoad=function(){this.setData(a.LIST_TOWER.ICE_PRIESTESS),this.maxEnergy=400},e.prototype.skill=function(){this.countEnergy=0;var t=cc.instantiate(this.effectPrefab);this.node.addChild(t),t.setScale(2*t.scaleX),t.getComponent(l.default).setData(this.data.skillName,this.data,!1),t.setPosition(t.position.add(cc.v3(0,-30))),this.clearEnemyTargetArr();for(var e=0;e<this.enemyTargetArr.length;e++)this.enemyTargetArr[e].attacked(this.data.skillDame,this.data.skillType)},e.prototype.checkNextAttack=function(){this.checkAttack()},e.prototype.checkAttackEffect=function(){if(this.countAttack++,this.countAttack>2){this.countAttack=0;var t=cc.instantiate(this.effectPrefab);this.node.addChild(t),t.setScale(3*t.scaleX),t.getComponent(l.default).setData("mage_attack_effect",this.data,!1),t.setPosition(t.position.add(cc.v3(0,0))),t.zIndex=s.Constant.TOWER_BACK_BULLET_ZINDEX}},c([u],e)}(r.default));o.default=d,cc._RF.pop()},{"../../Constant_1_1":"Constant_1_1","../../Effect":"Effect","../../Tower":"Tower","../../TowerData":"TowerData"}],MainScene:[function(t,e,o){"use strict";cc._RF.push(e,"ff0dcLWon1AQ7Qd0wDnhP7b","MainScene");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,r=a.ccclass,s=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.avatar=null,e.displayName=null,e}return i(e,t),e.prototype.onLoad=function(){var t=this,e=FBInstant.player.getPhoto();cc.loader.load(e,function(e,o){t.avatar.spriteFrame=new cc.SpriteFrame(o)})},c([s(cc.Sprite)],e.prototype,"avatar",void 0),c([s(cc.Label)],e.prototype,"displayName",void 0),c([r],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],MapData:[function(t,e,o){"use strict";cc._RF.push(e,"e142dx7KQdJg4U2XGHVhVrq","MapData"),Object.defineProperty(o,"__esModule",{value:!0}),o.LIST_MAP=o.MapData=void 0;var n=t("../EW_1_1/Constant_1_1"),i=t("../EW_1_1/EnemyData_1_1"),c=function(){function t(){}return t.prototype.setId=function(t){return this.id=t,this},t.prototype.setMoney=function(t){return this.money=t,this},t.prototype.setHeart=function(t){return this.heart=t,this},t.prototype.setPointPosArr=function(t){return this.pointPosArr=t,this},t.prototype.setDestinationPosArr=function(t){return this.destinationPosArr=t,this},t.prototype.setWave=function(t){return this.wave=t,this},t}();o.MapData=c,o.LIST_MAP={MAP_1:(new c).setId(0).setPointPosArr([cc.v3(-394,-81),cc.v3(-172,82),cc.v3(-213,-215),cc.v3(10,-26),cc.v3(30,-244),cc.v3(104,143),cc.v3(307,-127),cc.v3(390,49)]).setDestinationPosArr([cc.v3(-390,90)]).setHeart(20).setMoney(240).setWave({warningArr:[{pos:cc.v3(540,140),direction:n.DIRECTION.RIGHT}],turn:[{way:0,enemyType:i.LIST_ENEMY.SWORD_MAN,amount:8},{way:0,enemyType:i.LIST_ENEMY.SWORD_MAN,amount:8},{way:0,enemyType:i.LIST_ENEMY.GOBLIN_ASSASSIN,amount:8},{way:0,enemyType:i.LIST_ENEMY.GOBLIN_ASSASSIN,amount:8}]})},cc._RF.pop()},{"../EW_1_1/Constant_1_1":"Constant_1_1","../EW_1_1/EnemyData_1_1":"EnemyData_1_1"}],Marakk:[function(t,e,o){"use strict";cc._RF.push(e,"ba249NeLc5Go6s0EFPLT2Uy","Marakk");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../Enemy"),r=t("../EnemyData_1_1"),s=cc._decorator,l=s.ccclass,p=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bloodLabel=null,e}return i(e,t),e.prototype.onLoad=function(){this.setData(r.LIST_ENEMY.MARAKK),this.isBoss=!0},e.prototype.slowCustom=function(t){t.scaleX=1.5,t.scaleY=2,t.x=15,t.y=61},e.prototype.freezeCustom=function(t){t.setScale(1.5),t.x=16,t.y=36},e.prototype.setAnimPos=function(t){var e=cc.v3(0,60);switch(t){case this.data.attack:e=cc.v3(0,90)}this.icon.setPosition(e)},e.prototype.setBlood=function(t){var e=t>0?t:0;this.bloodLabel.string=String(10*e)},c([p(cc.Label)],e.prototype,"bloodLabel",void 0),c([l],e)}(a.default);o.default=u,cc._RF.pop()},{"../Enemy":"Enemy","../EnemyData_1_1":"EnemyData_1_1"}],Minion1:[function(t,e,o){"use strict";cc._RF.push(e,"f4c63tHxj9H8I0T/HgfPU5U","Minion1");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../Minion_1_1"),r=t("../../MinionData"),s=t("../../common/Utils"),l=cc._decorator,p=l.ccclass,u=(l.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onLoad=function(){this.setData(r.LIST_MINION.MINION_1)},e.prototype.walk=function(){this.isAttack=!0,s.default.prototype.playAnimation(this.anim,this.data.walk),this.enemyTarget=this.enemyTargetArr[0],this.enemyTarget.minionTarget(this),this.setDirection(this.enemyTarget.node.position);var t=this.node.x<this.enemyTarget.node.x?-1:1,e=this.enemyTarget.node.position.add(cc.v3(50*t,25));this.node.runAction(cc.sequence(cc.moveTo(this.getWalkTime(e),e),cc.callFunc(function(){this.attack(),this.enemyTarget&&this.enemyTarget.isValid&&this.enemyTarget.attack()}.bind(this))))},c([p],e)}(a.default));o.default=u,cc._RF.pop()},{"../../MinionData":"MinionData","../../Minion_1_1":"Minion_1_1","../../common/Utils":"Utils"}],Minion5:[function(t,e,o){"use strict";cc._RF.push(e,"3ee79pelLdGD5WL/JRz3USi","Minion5");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../Minion_1_1"),r=t("../../MinionData"),s=t("../../Constant_1_1"),l=t("../../common/Utils"),p=cc._decorator,u=p.ccclass,d=(p.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onLoad=function(){this.setData(r.LIST_MINION.MINION_5)},e.prototype.checkAttack=function(){this.isDie||(this.clearEnemyTargetArr(),0!=this.enemyTargetArr.length?this.walk():this.idle())},e.prototype.attack=function(){if(this.enemyTarget&&this.enemyTarget.isValid){var t=[this.data.attack,this.data.attack2][Math.floor(2*Math.random())];l.default.prototype.playAnimation(this.anim,t),this.enemyTarget.attacked(this.data.attackDamage,s.ATTACK_TYPE.DEFAULT)}else this.backWalk()},e.prototype.walk=function(){this.isAttack=!0,l.default.prototype.playAnimation(this.anim,this.data.walk),this.enemyTarget=this.enemyTargetArr[0],this.enemyTarget.minionTarget(this),this.setDirection(this.enemyTarget.node.position);var t=this.node.x<this.enemyTarget.node.x?-1:1,e=this.enemyTarget.node.position.add(cc.v3(50*t,20));this.node.runAction(cc.sequence(cc.moveTo(this.getWalkTime(e),e),cc.callFunc(function(){this.attack(),this.enemyTarget&&this.enemyTarget.isValid&&this.enemyTarget.attack()}.bind(this))))},c([u],e)}(a.default));o.default=d,cc._RF.pop()},{"../../Constant_1_1":"Constant_1_1","../../MinionData":"MinionData","../../Minion_1_1":"Minion_1_1","../../common/Utils":"Utils"}],MinionData:[function(t,e,o){"use strict";cc._RF.push(e,"036feJBktlKwJEJXTLT3PaO","MinionData"),Object.defineProperty(o,"__esModule",{value:!0}),o.LIST_MINION=o.MinionData=void 0;var n=t("./Constant_1_1"),i=function(){function t(){}return t.prototype.setUltimate=function(t){return this.ultimate=t,this},t.prototype.setSkill2=function(t){return this.skill2=t,this},t.prototype.setSkill3=function(t){return this.skill3=t,this},t.prototype.setAttackDame=function(t){return this.attackDamage=t,this},t.prototype.setSkillDamage=function(t){return this.skillDamage=t,this},t.prototype.setSpeed=function(t){return this.speed=t,this},t.prototype.setBlood=function(t){return this.blood=t,this},t.prototype.setDirection=function(t){return this.direction=t,this},t.prototype.setAttack=function(t){return this.attack=t,this},t.prototype.setEffect=function(t){return this.effect=t,this},t.prototype.setAttack2=function(t){return this.attack2=t,this},t.prototype.setAttack3=function(t){return this.attack3=t,this},t.prototype.setRangeAttack=function(t){return this.rangeAttack=t,this},t.prototype.setDie=function(t){return this.die=t,this},t.prototype.setSummon=function(t){return this.summon=t,this},t.prototype.setWalk=function(t){return this.walk=t,this},t.prototype.setIdle=function(t){return this.idle=t,this},t.prototype.setAttackType=function(t){return this.attackType=t,this},t.prototype.setWay=function(t){return this.way=t,this},t.prototype.setWaySpeed=function(t){return this.waySpeed=t,this},t}();o.MinionData=i,o.LIST_MINION={MINION_5:(new i).setWaySpeed(.5).setSpeed(100).setBlood(800).setAttack("attack2_1").setAttack2("attack2_2").setDie("die").setWalk("run2").setIdle("idle2").setAttackDame(40).setDirection(n.DIRECTION.LEFT),MINION_1:(new i).setWaySpeed(.5).setSpeed(50).setBlood(150).setAttack("attack").setDie("die").setWalk("run").setIdle("idle").setAttackDame(20).setDirection(n.DIRECTION.LEFT),GOLEM_MINION:(new i).setWaySpeed(.5).setSpeed(100).setBlood(200).setAttack("golem_minion_atk").setAttack2("golem_minion_atk_2").setDie("golem_minion_die").setSummon("golem_minion_summon").setWalk("golem_minion_walk").setIdle("golem_minion_idle").setAttackDame(40).setDirection(n.DIRECTION.LEFT),FEDERYC:(new i).setWaySpeed(.5).setSpeed(70).setBlood(2500).setAttack("attack1_fx").setAttack2("attack2_fx").setAttack3("attack3_fx").setUltimate("ultimate").setSkill2("skill3").setSkill3("skill2").setDie("die").setWalk("run").setRangeAttack("rangeAttack").setIdle("idle").setAttackDame(70).setSkillDamage(200).setDirection(n.DIRECTION.RIGHT).setAttackType(n.ATTACK_TYPE.DEFAULT),ARRYN:(new i).setWaySpeed(.5).setSpeed(200).setBlood(1500).setAttack("attack").setRangeAttack("rangeAttack").setDie("die").setWalk("run").setIdle("idle").setEffect("attackEffect").setAttackDame(40).setDirection(n.DIRECTION.LEFT).setAttackType(n.ATTACK_TYPE.DEFAULT),GALIO:(new i).setWaySpeed(.5).setSpeed(150).setBlood(1e3).setAttack("attack").setIdle("idle").setSkillDamage(100).setDie("die").setWalk("walk").setAttackDame(40).setSummon("summon").setEffect("impact").setDirection(n.DIRECTION.LEFT).setAttackType(n.ATTACK_TYPE.DEFAULT),KING_JULIUS_III:(new i).setWaySpeed(.5).setSpeed(50).setBlood(1e3).setAttack("atk").setUltimate("skill").setSkillDamage(150).setDie("die").setWalk("run_side").setIdle("idle").setAttackDame(100).setDirection(n.DIRECTION.LEFT)},cc._RF.pop()},{"./Constant_1_1":"Constant_1_1"}],MinionLV3:[function(t,e,o){"use strict";cc._RF.push(e,"108c9FvyRtJm5f7//7Ep6U5","MinionLV3");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./../../MinionWK"),r=t("./../../MinionWKData"),s=cc._decorator,l=s.ccclass,p=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onLoad=function(){this.setData(r.LIST_MINION.MINION_1)},e.prototype.walk=function(){this.isAttack=!0,this.anim.setAnimation(0,this.data.walk,!0),this.enemyTarget=this.enemyTargetArr[0],this.enemyTarget.minionTarget(this),this.setDirection(this.enemyTarget.node.position);var t=this.node.x<this.enemyTarget.node.x?-1:1,e=this.enemyTarget.node.position.add(cc.v3(50*t,25));this.node.runAction(cc.sequence(cc.moveTo(this.getWalkTime(e),e),cc.callFunc(function(){this.attack(),this.enemyTarget&&this.enemyTarget.isValid&&this.enemyTarget.attack()}.bind(this))))},c([l],e)}(a.default));o.default=p,cc._RF.pop()},{"./../../MinionWK":"MinionWK","./../../MinionWKData":"MinionWKData"}],MinionListener:[function(t,e,o){"use strict";cc._RF.push(e,"df31d+vIj1J8YJRo88AJwLu","MinionListener");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./Constant_1_1"),r=t("./Minion_1_1"),s=t("./EnemyListener"),l=t("./Enemy"),p=cc._decorator,u=p.ccclass,d=p.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.minion=null,e.className=null,e}return i(e,t),e.prototype.start=function(){this.className=this.__classname__},e.prototype.onCollisionEnter=function(t,e){this.targetEnemy(t,e)},e.prototype.onCollisionExit=function(){},e.prototype.targetEnemy=function(t){var e=t.node.getComponent(s.default);if(e&&e.enemy.getComponent(l.default).type==a.TYPE.ENEMY){var o=this.minion.getComponent(r.default);o.checkEnemyExistInTarget(e.enemy.getComponent(l.default))||o.setEnemyTarget(e.enemy.getComponent(l.default))}},e.prototype.excludeEnemy=function(t){var e=t.node.getComponent(s.default);e&&e.enemy.type==a.TYPE.ENEMY&&this.minion.getComponent(r.default).excludeEnemyInTarget(e.enemy)},c([d(cc.Node)],e.prototype,"minion",void 0),c([u],e)}(cc.Component);o.default=h,cc._RF.pop()},{"./Constant_1_1":"Constant_1_1","./Enemy":"Enemy","./EnemyListener":"EnemyListener","./Minion_1_1":"Minion_1_1"}],MinionWKData:[function(t,e,o){"use strict";cc._RF.push(e,"692df59nUhBZK5ABCAa9SbA","MinionWKData"),Object.defineProperty(o,"__esModule",{value:!0}),o.LIST_MINION=o.MinionData=void 0;var n=t("../EW_1_1/Constant_1_1"),i=function(){function t(){}return t.prototype.setUltimate=function(t){return this.ultimate=t,this},t.prototype.setAttackDame=function(t){return this.attackDamage=t,this},t.prototype.setSkillDamage=function(t){return this.skillDamage=t,this},t.prototype.setSpeed=function(t){return this.speed=t,this},t.prototype.setBlood=function(t){return this.blood=t,this},t.prototype.setDirection=function(t){return this.direction=t,this},t.prototype.setAttack=function(t){return this.attack=t,this},t.prototype.setEffect=function(t){return this.effect=t,this},t.prototype.setAttack2=function(t){return this.attack2=t,this},t.prototype.setAttack3=function(t){return this.attack3=t,this},t.prototype.setRangeAttack=function(t){return this.rangeAttack=t,this},t.prototype.setDie=function(t){return this.die=t,this},t.prototype.setSummon=function(t){return this.summon=t,this},t.prototype.setWalk=function(t){return this.walk=t,this},t.prototype.setWalk_90=function(t){return this.walk_90=t,this},t.prototype.setWalk_270=function(t){return this.walk_270=t,this},t.prototype.setIdle=function(t){return this.idle=t,this},t.prototype.setAttackType=function(t){return this.attackType=t,this},t.prototype.setWay=function(t){return this.way=t,this},t.prototype.setWaySpeed=function(t){return this.waySpeed=t,this},t}();o.MinionData=i,o.LIST_MINION={MINION_1:(new i).setWaySpeed(.5).setSpeed(80).setBlood(150).setAttack("attack_melee_1").setDie("die").setWalk("run").setWalk_90("run_90").setWalk_270("run_270").setIdle("idle").setAttackDame(20).setDirection(n.DIRECTION.LEFT),LUCIUS:(new i).setWaySpeed(.5).setSpeed(100).setBlood(500).setAttack("attack_melee_1").setAttack2("attack_melee_2").setAttack3("skill_passive_1").setDie("die").setWalk("run").setRangeAttack("attack_range_1").setIdle("idle").setAttackDame(50).setSkillDamage(70).setDirection(n.DIRECTION.LEFT).setAttackType(n.ATTACK_TYPE.DEFAULT),GALE:(new i).setWaySpeed(.5).setSpeed(100).setBlood(2500).setAttack("attack_melee_1").setAttack2("attack_melee_2").setAttack3("skill_passive").setUltimate("skill_active").setDie("die").setWalk("run").setRangeAttack("attack_range_1").setIdle("idle").setAttackDame(50).setSkillDamage(150).setDirection(n.DIRECTION.LEFT).setAttackType(n.ATTACK_TYPE.DEFAULT),ASURA:(new i).setWaySpeed(.5).setSpeed(120).setBlood(5e3).setAttack("attack_melee_2").setAttack2("attack_melee_1").setAttack3("skill_1").setUltimate("skill_2").setDie("die").setWalk("run").setRangeAttack("attack_range_1").setIdle("idle").setAttackDame(100).setSkillDamage(150).setDirection(n.DIRECTION.RIGHT).setAttackType(n.ATTACK_TYPE.DEFAULT)},cc._RF.pop()},{"../EW_1_1/Constant_1_1":"Constant_1_1"}],MinionWKListener:[function(t,e,o){"use strict";cc._RF.push(e,"efb98jUlZ1PLIcw1joA0Cr6","MinionWKListener");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../EW_1_1/./Constant_1_1"),r=t("./MinionWK"),s=t("./EnemyWKListener"),l=t("./EnemyWK"),p=cc._decorator,u=p.ccclass,d=p.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.minion=null,e.className=null,e}return i(e,t),e.prototype.start=function(){this.className=this.__classname__},e.prototype.onCollisionEnter=function(t,e){this.targetEnemy(t,e)},e.prototype.onCollisionExit=function(){},e.prototype.targetEnemy=function(t){var e=t.node.getComponent(s.default);if(e&&e.enemy.getComponent(l.default).type==a.TYPE.ENEMY){var o=this.minion.getComponent(r.default);o.checkEnemyExistInTarget(e.enemy.getComponent(l.default))||o.setEnemyTarget(e.enemy.getComponent(l.default))}},e.prototype.excludeEnemy=function(t){var e=t.node.getComponent(s.default);e&&e.enemy.type==a.TYPE.ENEMY&&this.minion.getComponent(r.default).excludeEnemyInTarget(e.enemy)},c([d(cc.Node)],e.prototype,"minion",void 0),c([u],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../EW_1_1/./Constant_1_1":"Constant_1_1","./EnemyWK":"EnemyWK","./EnemyWKListener":"EnemyWKListener","./MinionWK":"MinionWK"}],MinionWK:[function(t,e,o){"use strict";cc._RF.push(e,"8bd76liBlBI4r1ekbSRkKN0","MinionWK");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../EW_1_1/common/Utils"),r=t("../EW_1_1/Constant_1_1"),s=cc._decorator,l=s.ccclass,p=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.anim=null,e.way=null,e.bloodNode=null,e.bloodSprite=null,e.range=null,e.effCollider=null,e.enemyTargetArr=[],e.enemyTarget=null,e.maxBlood=null,e.blood=null,e.data=null,e.isAttack=!1,e.startPos=null,e.isDie=!1,e.currAnim=null,e.direction=!1,e.destinationPos=cc.v3(),e.countAtk=0,e.isRun=!1,e.isSkill=!1,e}return i(e,t),e.prototype.start=function(){this.type=r.TYPE.MINION,cc.Canvas.instance.node.on(r.Constant.EVENT.ENABLE_RANGE,this.onEnableRange,this)},e.prototype.setData=function(t){this.data=t,this.blood=t.blood,this.maxBlood=t.blood,this.startPos=this.node.position,"Asura"==this.node.name?(this.anim.setAnimation(0,"appear",!1),this.changeAnimSpine()):this.idle()},e.prototype.setWay=function(t,e){this.way.addClip(e),this.data.setWay(t),this.run()},e.prototype.onEnableRange=function(t){this.range.enabled=t},e.prototype.run=function(){a.default.prototype.playAnimation(this.way,this.data.way,this.data.waySpeed)},e.prototype.runSide=function(t){void 0===t&&(t=null),null!==t&&(this.direction=t,this.setWayDirection(t)),this.anim.setAnimation(0,this.data.walk,!0),this.currAnim=this.data.walk},e.prototype.runFront=function(){this.anim.setAnimation(0,this.data.walk_270,!1),this.currAnim=this.data.runFront},e.prototype.runBack=function(){this.anim.setAnimation(0,this.data.walk_90,!1),this.currAnim=this.data.runBack},e.prototype.idle=function(){this.isAttack=!1,this.isRun=!1,this.isSkill=!1,this.anim.setAnimation(0,this.data.idle,!0)},e.prototype.die=function(){this.isDie=!0,this.anim.setAnimation(0,this.data.die,!1),cc.Canvas.instance.node.emit(r.Constant.EVENT.END_GAME,!1),this.offEff(),this.changeAnimSpine()},e.prototype.changeAnimSpine=function(){var t=this;this.anim.setCompleteListener(function(e){var o=e.animation?e.animation.name:"";"appear"==o&&t.idle(),o==t.data.die?t.node.destroy():o==t.data.attack||o==t.data.attack2||o==t.data.attack3?(t.isAttack=!1,t.idle(),t.effCollider.enabled=!1):o==t.data.ultimate&&(t.isSkill=!1,t.idle(),t.effCollider.enabled=!1)})},e.prototype.finish=function(){this.node.destroy()},e.prototype.walk=function(){},e.prototype.offEff=function(){},e.prototype.showEffect=function(){},e.prototype.backWalk=function(){this.anim.setAnimation(0,this.data.walk,!0),this.setDirection(this.startPos),this.node.runAction(cc.sequence(cc.moveTo(this.getWalkTime(this.startPos),this.startPos),cc.callFunc(function(){}.bind(this))))},e.prototype.attacked=function(t,e){if(void 0===e&&(e=r.ATTACK_TYPE.DEFAULT),!this.isDie){if(this.bloodNode.active=!0,this.blood-=t,this.blood>0){var o=this.blood/this.maxBlood;this.bloodSprite.fillRange=o}else this.bloodSprite.fillRange=0,this.range.enabled=!1,this.die();this.setBlood(this.blood)}},e.prototype.setBlood=function(){},e.prototype.getWalkTime=function(t){return this.getDistance(t)/this.data.speed},e.prototype.getDistance=function(t){return t.sub(this.node.position).mag()},e.prototype.setDirection=function(t){var e;e=(this.node.x<t.x?r.DIRECTION.RIGHT:r.DIRECTION.LEFT)==r.DIRECTION.LEFT?this.data.direction==r.DIRECTION.LEFT?1:-1:this.data.direction==r.DIRECTION.LEFT?-1:1,this.node.scaleX=Math.abs(this.node.scaleX)*e,this.bloodNode.scaleX=this.node.scaleX<0?-Math.abs(this.bloodNode.scaleX):Math.abs(this.bloodNode.scaleX)},e.prototype.setWayDirection=function(t){var e;e=t==r.DIRECTION.LEFT?this.data.direction==r.DIRECTION.LEFT?1:-1:this.data.direction==r.DIRECTION.LEFT?-1:1,this.node.scaleX=Math.abs(this.node.scaleX)*e,this.bloodNode.scaleX=this.node.scaleX<0?-Math.abs(this.bloodNode.scaleX):Math.abs(this.bloodNode.scaleX)},e.prototype.setEnemyTarget=function(t){void 0===t&&(t=null),this.enemyTargetArr.push(t)},e.prototype.walkTo=function(t){var e=this;void 0===t&&(t=cc.v3()),this.destinationPos=t,this.anim.setAnimation(0,this.data.walk,!0),cc.tween(this.node).to(this.getWalkTime(t),{position:t}).call(function(){e.anim.setAnimation(0,e.data.idle,!0)}).start()},e.prototype.endAttack=function(){this.isAttack=!1},e.prototype.playskill=function(){},e.prototype.checkAttack=function(){var t=this;this.isAttack||this.isDie||this.isSkill||(this.clearEnemyTargetArr(),this.isAttack=!0,this.countAtk++,(!this.enemyTarget||this.enemyTarget&&!this.enemyTarget.isValid)&&(this.enemyTarget=this.enemyTargetArr[0]),this.node.stopAllActions(),4==this.countAtk&&this.data.ultimate||(1==this.countAtk&&this.data.attack?(this.anim.setAnimation(0,this.data.attack,!1),this.showEffect(this.data.attack),this.changeAnimSpine(),this.playSoundAtk(1),this.anim.scheduleOnce(function(){t.attack()},this.anim.findAnimation(this.data.attack).duration/2),this.data.attack2||(this.countAtk=0)):2==this.countAtk&&this.data.attack2?(this.anim.setAnimation(0,this.data.attack2,!1),this.showEffect(this.data.attack2),this.changeAnimSpine(),this.playSoundAtk(2),this.anim.scheduleOnce(function(){t.attack()},this.anim.findAnimation(this.data.attack2).duration/2),this.data.attack3||(this.countAtk=0)):3==this.countAtk&&this.data.attack3&&(this.countAtk=0,this.anim.setAnimation(0,this.data.attack3,!1),this.showEffect(this.data.attack3),this.changeAnimSpine(),this.playSoundAtk(3),this.anim.scheduleOnce(function(){t.attack()},this.anim.findAnimation(this.data.attack3).duration/2))))},e.prototype.skill=function(){this.clearEnemyTargetArr();for(var t=0;t<this.enemyTargetArr.length;t++)this.enemyTargetArr[t].attacked(this.data.skillDamage,r.ATTACK_TYPE.DEFAULT)},e.prototype.attack=function(){this.effCollider.enabled=!0},e.prototype.playSoundAtk=function(t){void 0===t&&(t=null)},e.prototype.playSoundSkill=function(){},e.prototype.checkEnemyExistInTarget=function(t){for(var e=this.enemyTargetArr,o=0;o<e.length;o++)if(e[o]==t)return!0;return!1},e.prototype.excludeEnemyInTarget=function(t){for(var e=this.enemyTargetArr,o=0;o<e.length;o++)e[o]==t&&(e.splice(o,1),o--)},e.prototype.clearEnemyTargetArr=function(){var t=this.enemyTargetArr.filter(function(t){return t.isValid&&t.node.parent});this.enemyTargetArr=t},e.prototype.update=function(){},c([p(sp.Skeleton)],e.prototype,"anim",void 0),c([p(cc.Animation)],e.prototype,"way",void 0),c([p(cc.Node)],e.prototype,"bloodNode",void 0),c([p(cc.Sprite)],e.prototype,"bloodSprite",void 0),c([p(cc.CircleCollider)],e.prototype,"range",void 0),c([p(cc.BoxCollider)],e.prototype,"effCollider",void 0),c([l],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../EW_1_1/Constant_1_1":"Constant_1_1","../EW_1_1/common/Utils":"Utils"}],Minion_1_1:[function(t,e,o){"use strict";cc._RF.push(e,"67eb2Lv8YJBuqTgNdJQY4qR","Minion_1_1");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./common/Utils"),r=t("./Constant_1_1"),s=cc._decorator,l=s.ccclass,p=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.anim=null,e.bloodNode=null,e.bloodSprite=null,e.range=null,e.enemyTargetArr=[],e.enemyTarget=null,e.maxBlood=null,e.blood=null,e.data=null,e.isAttack=!1,e.startPos=null,e.isDie=!1,e.currAnim=null,e.direction=!1,e.destinationPos=cc.v3(),e.countAtk=0,e.isRun=!1,e.isSkill=!1,e}return i(e,t),e.prototype.start=function(){this.type=r.TYPE.MINION,cc.Canvas.instance.node.on(r.Constant.EVENT.ENABLE_RANGE,this.onEnableRange,this)},e.prototype.setData=function(t){this.data=t,this.blood=t.blood,this.maxBlood=t.blood,this.startPos=this.node.position,this.idle()},e.prototype.setWay=function(t,e){this.anim.addClip(e),this.data.setWay(t),this.run()},e.prototype.onEnableRange=function(t){this.range.enabled=t},e.prototype.run=function(){a.default.prototype.playAnimation(this.anim,this.data.way,this.data.waySpeed)},e.prototype.runSide=function(t){void 0===t&&(t=null),null!==t&&(this.direction=t,this.setWayDirection(t)),a.default.prototype.playAnimation(this.anim,this.data.walk),this.currAnim=this.data.walk},e.prototype.runFront=function(){a.default.prototype.playAnimation(this.anim,this.data.runFront),this.currAnim=this.data.runFront},e.prototype.runBack=function(){a.default.prototype.playAnimation(this.anim,this.data.runBack),this.currAnim=this.data.runBack},e.prototype.idle=function(){this.isAttack=!1,this.isRun=!1,this.isSkill=!1,a.default.prototype.playAnimation(this.anim,this.data.idle)},e.prototype.die=function(){this.isDie=!0,a.default.prototype.pauseAnimation(this.anim),a.default.prototype.playAnimation(this.anim,this.data.die),this.offEff()},e.prototype.finish=function(){this.node.destroy(),cc.Canvas.instance.node.emit(r.Constant.EVENT.END_GAME,!1)},e.prototype.walk=function(){},e.prototype.offEff=function(){},e.prototype.backWalk=function(){a.default.prototype.playAnimation(this.anim,this.data.walk),this.setDirection(this.startPos),this.node.runAction(cc.sequence(cc.moveTo(this.getWalkTime(this.startPos),this.startPos),cc.callFunc(function(){this.checkAttack()}.bind(this))))},e.prototype.attacked=function(t,e){if(void 0===e&&(e=r.ATTACK_TYPE.DEFAULT),!this.isDie){if(this.bloodNode.active=!0,this.blood-=t,this.blood>0){var o=this.blood/this.maxBlood;this.bloodSprite.fillRange=o}else this.bloodSprite.fillRange=0,a.default.prototype.stopAnimation(this.anim),this.range.enabled=!1,this.die();this.setBlood(this.blood)}},e.prototype.setBlood=function(){},e.prototype.getWalkTime=function(t){return this.getDistance(t)/this.data.speed},e.prototype.getDistance=function(t){return t.sub(this.node.position).mag()},e.prototype.setDirection=function(t){var e;e=(this.node.x<t.x?r.DIRECTION.RIGHT:r.DIRECTION.LEFT)==r.DIRECTION.LEFT?this.data.direction==r.DIRECTION.LEFT?1:-1:this.data.direction==r.DIRECTION.LEFT?-1:1,this.node.scaleX=Math.abs(this.node.scaleX)*e,this.bloodNode.scaleX=this.node.scaleX<0?-Math.abs(this.bloodNode.scaleX):Math.abs(this.bloodNode.scaleX)},e.prototype.setWayDirection=function(t){var e;e=t==r.DIRECTION.LEFT?this.data.direction==r.DIRECTION.LEFT?1:-1:this.data.direction==r.DIRECTION.LEFT?-1:1,this.node.scaleX=Math.abs(this.node.scaleX)*e,this.bloodNode.scaleX=this.node.scaleX<0?-Math.abs(this.bloodNode.scaleX):Math.abs(this.bloodNode.scaleX)},e.prototype.setEnemyTarget=function(t){void 0===t&&(t=null),this.enemyTargetArr.push(t)},e.prototype.walkTo=function(t){var e=this;void 0===t&&(t=cc.v3()),this.destinationPos=t,a.default.prototype.playAnimation(this.anim,this.data.walk),this.setDirection(t),cc.tween(this.node).to(this.getWalkTime(t),{position:t}).call(function(){a.default.prototype.playAnimation(e.anim,e.data.idle)}).start()},e.prototype.endAttack=function(){this.isAttack=!1,this.idle()},e.prototype.playskill=function(){},e.prototype.checkAttack=function(){this.isAttack||this.isDie||this.isSkill||(this.clearEnemyTargetArr(),this.isAttack=!0,this.countAtk++,(!this.enemyTarget||this.enemyTarget&&!this.enemyTarget.isValid)&&(this.enemyTarget=this.enemyTargetArr[0]),this.node.stopAllActions(),4==this.countAtk&&this.data.ultimate||(1==this.countAtk&&this.data.attack?(a.default.prototype.playAnimation(this.anim,this.data.attack),this.playSoundAtk(),this.data.attack2||(this.countAtk=0)):2==this.countAtk&&this.data.attack2?(a.default.prototype.playAnimation(this.anim,this.data.attack2),this.playSoundAtk(),this.data.attack3||(this.countAtk=0)):3==this.countAtk&&this.data.attack3&&(this.countAtk=0,a.default.prototype.playAnimation(this.anim,this.data.attack3),this.playSoundAtk())))},e.prototype.skill=function(){cc.Canvas.instance.node.emit(r.Constant.EVENT.CAMERA_SHAKE),this.clearEnemyTargetArr();for(var t=0;t<this.enemyTargetArr.length;t++)this.enemyTargetArr[t].attacked(this.data.skillDamage,r.ATTACK_TYPE.DEFAULT)},e.prototype.attack=function(){this.clearEnemyTargetArr();for(var t=0;t<this.enemyTargetArr.length;t++)this.enemyTargetArr[t].attacked(this.data.attackDamage,r.ATTACK_TYPE.DEFAULT)},e.prototype.playSoundAtk=function(){},e.prototype.playSoundSkill=function(){},e.prototype.checkEnemyExistInTarget=function(t){for(var e=this.enemyTargetArr,o=0;o<e.length;o++)if(e[o]==t)return!0;return!1},e.prototype.excludeEnemyInTarget=function(t){for(var e=this.enemyTargetArr,o=0;o<e.length;o++)e[o]==t&&(e.splice(o,1),o--)},e.prototype.clearEnemyTargetArr=function(){var t=this.enemyTargetArr.filter(function(t){return t.isValid&&t.node.parent});this.enemyTargetArr=t},c([p(cc.Animation)],e.prototype,"anim",void 0),c([p(cc.Node)],e.prototype,"bloodNode",void 0),c([p(cc.Sprite)],e.prototype,"bloodSprite",void 0),c([p(cc.CircleCollider)],e.prototype,"range",void 0),c([l],e)}(cc.Component);o.default=u,cc._RF.pop()},{"./Constant_1_1":"Constant_1_1","./common/Utils":"Utils"}],ModelUtils:[function(t,e,o){"use strict";cc._RF.push(e,"46c59g51bxGzJPYABMXOBGW","ModelUtils"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(){}return t.merge=function(t,e){for(var o=0,n=Object.keys(e);o<n.length;o++){var i=n[o];t[i]=e[i]}},t}();o.ModelUtils=n,cc._RF.pop()},{}],Model:[function(t,e,o){"use strict";cc._RF.push(e,"24eb0COCLhBvLcUqX1Nk7H1","Model"),Object.defineProperty(o,"__esModule",{value:!0});o.Score=function(){};o.UserInfo=function(){this.userId=-1,this.displayName="",this.score=0,this.avatar="",this.firstTime=!0},cc._RF.pop()},{}],NadLug:[function(t,e,o){"use strict";cc._RF.push(e,"c5f9cXekixLF5Y8gV4TVlLD","NadLug");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../Enemy"),r=t("../EnemyData_1_1"),s=cc._decorator,l=s.ccclass,p=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bloodLabel=null,e}return i(e,t),e.prototype.onLoad=function(){this.setData(r.LIST_ENEMY.NAD_LUG),this.isBoss=!0},e.prototype.slowCustom=function(t){t.scaleX=1.5,t.scaleY=2,t.x=15,t.y=61},e.prototype.freezeCustom=function(t){t.setScale(1.5),t.x=16,t.y=36},e.prototype.setAnimPos=function(t){var e=cc.v3(0,60);switch(t){case this.data.attack:e=cc.v3(0,90)}this.icon.setPosition(e)},e.prototype.setBlood=function(t){var e=t>0?t:0;this.bloodLabel.string=String(10*e)},c([p(cc.Label)],e.prototype,"bloodLabel",void 0),c([l],e)}(a.default);o.default=u,cc._RF.pop()},{"../Enemy":"Enemy","../EnemyData_1_1":"EnemyData_1_1"}],Nazaral1_1:[function(t,e,o){"use strict";cc._RF.push(e,"c7506oMQnVLoaE1JqAl1/iF","Nazaral1_1");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../Enemy"),r=t("../EnemyData_1_1"),s=cc._decorator,l=s.ccclass,p=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.smoke=null,e.circle=null,e.bloodLabel=null,e}return i(e,t),e.prototype.onLoad=function(){this.setData(r.LIST_ENEMY.NAZARAL),this.smoke.active=!1,this.circle.active=!1,this.isBoss=!0},e.prototype.slowCustom=function(t){t.scaleX=1.5,t.scaleY=2,t.x=15,t.y=61},e.prototype.freezeCustom=function(t){t.setScale(1.5),t.x=16,t.y=36},e.prototype.setBlood=function(t){var e=t>0?t:0;this.bloodLabel.string=String(10*e)},c([p(cc.Node)],e.prototype,"smoke",void 0),c([p(cc.Node)],e.prototype,"circle",void 0),c([p(cc.Label)],e.prototype,"bloodLabel",void 0),c([l],e)}(a.default);o.default=u,cc._RF.pop()},{"../Enemy":"Enemy","../EnemyData_1_1":"EnemyData_1_1"}],Orc:[function(t,e,o){"use strict";cc._RF.push(e,"a98c2XBqHlBcLwWCNZNYB19","Orc");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../Enemy"),r=t("../EnemyData_1_1"),s=cc._decorator,l=s.ccclass,p=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onLoad=function(){this.setData(r.LIST_ENEMY.ORC)},e.prototype.setAnimPos=function(t){var e=cc.v3(0,22);switch(t){case this.data.attack:e=cc.v3(0,38.7);break;case this.data.die:e=cc.v3(9.5,23.5)}this.icon.setPosition(e)},c([l],e)}(a.default));o.default=p,cc._RF.pop()},{"../Enemy":"Enemy","../EnemyData_1_1":"EnemyData_1_1"}],PlatformBrandIcon:[function(t,e,o){"use strict";cc._RF.push(e,"2ce2b1NeVdJ1r83gbFFlRlc","PlatformBrandIcon");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,r=a.ccclass,s=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.androidIcon=null,e.iosIcon=null,e}return i(e,t),e.prototype.start=function(){cc.sys.os==cc.sys.OS_ANDROID?this.getComponent(cc.Sprite).spriteFrame=this.androidIcon:cc.sys.os==cc.sys.OS_IOS&&(this.getComponent(cc.Sprite).spriteFrame=this.iosIcon)},c([s(cc.SpriteFrame)],e.prototype,"androidIcon",void 0),c([s(cc.SpriteFrame)],e.prototype,"iosIcon",void 0),c([r],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],Point:[function(t,e,o){"use strict";cc._RF.push(e,"8030fybrFVFF6NJJsRia/aL","Point");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../EW_1_1/Constant_1_1"),r=cc._decorator,s=r.ccclass,l=r.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.frameArr=[],e.pointId=0,e}return i(e,t),e.prototype.onLoad=function(){this.type=a.TYPE.POINT},e.prototype.start=function(){},e.prototype.onBtnClick=function(){cc.Canvas.instance.node.emit(a.Constant.EVENT.CLICK),cc.Canvas.instance.node.emit(a.Constant.EVENT.ON_CHOOSE_TOWER,this)},e.prototype.setSprite=function(t){void 0===t&&(t=0),this.frameArr[t]&&(this.node.getComponent(cc.Sprite).spriteFrame=this.frameArr[t])},c([l(cc.SpriteFrame)],e.prototype,"frameArr",void 0),c([s],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../EW_1_1/Constant_1_1":"Constant_1_1"}],RewardDialog:[function(t,e,o){"use strict";cc._RF.push(e,"2ed68sqvGJD5KXHnqlKDG4R","RewardDialog");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../services/DialogService"),r=cc._decorator,s=r.ccclass,l=r.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.valueLabel=null,e.iconSprite=null,e}var o;return i(e,t),o=e,e.getInstance=function(){return o.instance||(o.instance=new o),o.instance},e.prototype.closeRewardDialog=function(){a.default.getInstance().offDialog(this.node)},c([l(cc.Label)],e.prototype,"valueLabel",void 0),c([l(cc.Sprite)],e.prototype,"iconSprite",void 0),o=c([s],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../services/DialogService":"DialogService"}],SelectHero:[function(t,e,o){"use strict";cc._RF.push(e,"1bca7ZFoRZBELIQqoVVvGLf","SelectHero");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../services/DialogService"),r=cc._decorator,s=r.ccclass,l=r.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.loadBehindLevel=null,e}return i(e,t),e.prototype.onLoad=function(){},e.prototype.closeSelectHero=function(){cc.Global.isDialog=!1,a.default.getInstance().offDialog(this.node)},e.prototype.startGameBtn=function(){this.closeSelectHero(),a.default.getInstance().spawn(this.loadBehindLevel)},e.prototype.startVideoBtn=function(){},c([l(cc.Prefab)],e.prototype,"loadBehindLevel",void 0),c([s],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../services/DialogService":"DialogService"}],SettingMenu:[function(t,e,o){"use strict";cc._RF.push(e,"9459bJJvZJH1KfLcs2rtzPu","SettingMenu");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../services/SoundService"),r=t("../services/DialogService"),s=cc._decorator,l=s.ccclass,p=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.unselect=null,e.sound=!0,e}return i(e,t),e.prototype.onEnter=function(){this.sound="1"==cc.sys.localStorage.getItem("sound")},e.prototype.onLanguageChange=function(){},e.prototype.onSoundClick=function(){this.sound=!this.sound,this.unselect.active=!this.sound,a.SoundService.getInstance().stopAll(),a.SoundService.getInstance().toggle()},e.prototype.closeSetting=function(){cc.Global.isDialog=!1,r.default.getInstance().offDialog(this.node)},c([p(cc.Node)],e.prototype,"unselect",void 0),c([l],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../services/DialogService":"DialogService","../services/SoundService":"SoundService"}],Shop:[function(t,e,o){"use strict";cc._RF.push(e,"76fa4ZUXFdPe5jxtD0Tbbz2","Shop");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../services/DialogService"),r=cc._decorator,s=r.ccclass,l=r.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tabList=[],e.tabNum=0,e}return i(e,t),e.prototype.closeShop=function(){cc.Global.isDialog=!1,a.default.getInstance().offDialog(this.node)},e.prototype.swtichTab=function(t,e){switch(e){case"0":this.tabNum=0;break;case"1":this.tabNum=1;break;case"2":this.tabNum=2;break;case"3":this.tabNum=3}for(var o=0;o<this.tabList.length;o++)this.tabList[o].setSiblingIndex(10);this.tabList[this.tabNum].setSiblingIndex(100)},c([l(cc.Node)],e.prototype,"tabList",void 0),c([s],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../services/DialogService":"DialogService"}],SoundService:[function(t,e,o){"use strict";cc._RF.push(e,"516d3gKN/pHQq1H3F/uV4s8","SoundService"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(){this.volume=1,this.playing=!0}return t.prototype.loadConfig=function(){var t=cc.sys.localStorage.getItem("sound");t?this.playing="1"==t:cc.sys.localStorage.setItem("sound","1")},t.prototype.stopAll=function(){cc.audioEngine.stopAll()},t.prototype.pauseAll=function(){this.playing=!1,this.musicId&&cc.audioEngine.pause(this.musicId),cc.sys.localStorage.setItem("sound","-1")},t.prototype.resumeAll=function(){this.playing=!0,this.musicId&&cc.audioEngine.resume(this.musicId),cc.sys.localStorage.setItem("sound","1")},t.prototype.toggle=function(){this.playing?this.pauseAll():this.resumeAll()},t.prototype.isPlaying=function(){return this.playing},t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t}();o.SoundService=n,cc._RF.pop()},{}],SwordMan:[function(t,e,o){"use strict";cc._RF.push(e,"4e9f3kA2cdFYq7+3v6RqEui","SwordMan");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../Enemy"),r=t("../EnemyData_1_1"),s=cc._decorator,l=s.ccclass,p=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onLoad=function(){this.setData(r.LIST_ENEMY.SWORD_MAN)},c([l],e)}(a.default));o.default=p,cc._RF.pop()},{"../Enemy":"Enemy","../EnemyData_1_1":"EnemyData_1_1"}],TowerAnim:[function(t,e,o){"use strict";cc._RF.push(e,"e2c8cpu6fJBAL16ysILPhuP","TowerAnim");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./Tower"),r=cc._decorator,s=r.ccclass,l=r.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tower=null,e}return i(e,t),e.prototype.start=function(){},e.prototype.idle=function(t){this.tower.idle(t)},e.prototype.reload=function(t){this.tower.reload(t)},e.prototype.finish=function(){this.tower.finish()},e.prototype.setAnimPos=function(t){this.tower.setAnimPos(t)},c([l(a.default)],e.prototype,"tower",void 0),c([s],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./Tower":"Tower"}],TowerData:[function(t,e,o){"use strict";cc._RF.push(e,"5264aDfJ/pDUagO4G14qgt6","TowerData"),Object.defineProperty(o,"__esModule",{value:!0}),o.LIST_TOWER_WK=o.LIST_TOWER=o.TowerData=void 0;var n=t("../EW_1_1/Constant_1_1"),i=function(){function t(){}return t.prototype.setInfor=function(t){return this.infor=t,this},t.prototype.setEffectSummon=function(t){return this.effectSummon=t,this},t.prototype.setPrice=function(t){return this.price=t,this},t.prototype.setAttackDame=function(t){return this.attackDamage=t,this},t.prototype.setFrontIdle=function(t){return this.frontIdle=t,this},t.prototype.setFrontAttack=function(t){return this.frontAttack=t,this},t.prototype.setFrontReload=function(t){return this.frontReload=t,this},t.prototype.setBackAttack=function(t){return this.backAttack=t,this},t.prototype.setBackIdle=function(t){return this.backIdle=t,this},t.prototype.setBackReload=function(t){return this.backReload=t,this},t.prototype.setBulletDownEffect=function(t){return this.bulletDownEffect=t,this},t.prototype.setBulletUpEffect=function(t){return this.bulletUpEffect=t,this},t.prototype.setAttackType=function(t){return this.attackType=t,this},t.prototype.setSkillType=function(t){return this.skillType=t,this},t.prototype.setSkillName=function(t){return this.skillName=t,this},t.prototype.setSkillDame=function(t){return this.skillDame=t,this},t.prototype.setFrontSkill=function(t){return this.frontSkill=t,this},t.prototype.setSkillEffect=function(t){return this.skillEffect=t,this},t.prototype.setFrontDirection=function(t){return this.frontDirection=t,this},t.prototype.setBackDirection=function(t){return this.backDirection=t,this},t}();o.TowerData=i,o.LIST_TOWER={GOLEM_1:(new i).setAttackDame(40).setFrontIdle("golem_front_idle").setFrontAttack("golem_front_atk").setFrontReload("golem_front_reload").setBackAttack("golem_back_atk").setBackIdle("golem_back_idle").setBackReload("golem_back_reload").setFrontDirection(n.DIRECTION.LEFT).setBackDirection(n.DIRECTION.LEFT).setBulletDownEffect("golem1_bullet_down").setBulletUpEffect("golem1_bullet_up").setAttackType(n.ATTACK_TYPE.DEFAULT).setEffectSummon("effect_summon").setSkillType(n.ATTACK_TYPE.DEFAULT).setFrontSkill("golem_front_skill").setSkillEffect("golem_skill").setSkillDame(100).setPrice(120).setInfor({name:"Stone Guardian",towerType:"Physical Damage",typeName:"golem",speed:"Slow"}),GOLEM_2:(new i).setAttackDame(50).setFrontIdle("golem_front_idle").setFrontAttack("golem_front_atk").setFrontReload("golem_front_reload").setBackAttack("golem_back_atk").setBackIdle("golem_back_idle").setBackReload("golem_back_reload").setFrontDirection(n.DIRECTION.LEFT).setBackDirection(n.DIRECTION.LEFT).setBulletDownEffect("golem1_bullet_down").setBulletUpEffect("golem1_bullet_up").setAttackType(n.ATTACK_TYPE.DEFAULT).setEffectSummon("effect_summon").setSkillType(n.ATTACK_TYPE.DEFAULT).setFrontSkill("golem_front_skill").setSkillEffect("golem_skill").setSkillDame(100).setPrice(200).setInfor({name:"Steel Guardian",towerType:"Physical Damage",typeName:"golem",speed:"Slow"}),GOLEM_3:(new i).setAttackDame(60).setFrontIdle("golem_front_idle").setFrontAttack("golem_front_atk").setFrontReload("golem_front_reload").setBackAttack("golem_back_atk").setBackIdle("golem_back_idle").setBackReload("golem_back_reload").setFrontDirection(n.DIRECTION.LEFT).setBackDirection(n.DIRECTION.LEFT).setBulletDownEffect("golem1_bullet_down").setBulletUpEffect("golem1_bullet_up").setAttackType(n.ATTACK_TYPE.DEFAULT).setEffectSummon("effect_summon").setSkillType(n.ATTACK_TYPE.DEFAULT).setFrontSkill("golem_front_skill").setSkillEffect("golem_skill").setSkillDame(100).setPrice(280).setInfor({name:"Mithril Guardian",towerType:"Physical Damage",typeName:"golem",speed:"Slow"}),GOLEM_BLUE:(new i).setAttackDame(50).setFrontIdle("golem_front_idle").setFrontAttack("golem_front_atk").setBackAttack("golem_back_atk").setBackIdle("golem_back_idle").setFrontDirection(n.DIRECTION.LEFT).setBackDirection(n.DIRECTION.RIGHT).setBulletUpEffect("golem_impact").setAttackType(n.ATTACK_TYPE.SLOW).setEffectSummon("effect_summon_blue").setSkillType(n.ATTACK_TYPE.DEFAULT).setFrontSkill("golem_skill").setSkillEffect("golem_skill").setSkillDame(100).setPrice(360).setInfor({name:"Ancient Of Magic",towerType:"Physical Damage",typeName:"golem",speed:"Slow"}),ANCIENT_OF_FIRE:(new i).setAttackDame(40).setFrontIdle("golem_front_idle").setFrontAttack("golem_front_atk").setFrontReload("golem_front_reload").setBackAttack("golem_back_atk").setBackIdle("golem_back_idle").setBackReload("golem_back_reload").setEffectSummon("effect_summon").setBulletDownEffect("golem_bullet_down").setBulletUpEffect("golem_bullet_up").setAttackType(n.ATTACK_TYPE.DEFAULT).setFrontDirection(n.DIRECTION.RIGHT).setBackDirection(n.DIRECTION.LEFT).setSkillType(n.ATTACK_TYPE.DEFAULT).setFrontSkill("golem_front_skill").setSkillEffect("golem_skill").setSkillDame(100).setPrice(360).setInfor({name:"Ancient Of Fire",towerType:"Physical Damage",typeName:"golem",speed:"Slow"}),ICE_PRIESTESS:(new i).setAttackDame(15).setFrontIdle("mage_front_idle").setFrontAttack("mage_front_attack").setBackAttack("mage_back_attack").setBackIdle("mage_back_idle").setBulletUpEffect("mage_bullet_explode").setFrontDirection(n.DIRECTION.LEFT).setBackDirection(n.DIRECTION.RIGHT).setAttackType(n.ATTACK_TYPE.SLOW).setSkillType(n.ATTACK_TYPE.FREEZE).setSkillName("mage_skill").setSkillDame(60).setPrice(100).setInfor({name:"Ice Priestess",towerType:"Magical Damage",typeName:"mage",speed:"Normal"}),MAGE_1:(new i).setAttackDame(40).setFrontAttack("front_attack").setBackAttack("back_attack").setFrontIdle("front_idle").setBackIdle("back_idle").setBulletUpEffect("mage1_bullet_explode").setFrontDirection(n.DIRECTION.LEFT).setBackDirection(n.DIRECTION.LEFT).setAttackType(n.ATTACK_TYPE.DEFAULT).setPrice(100).setInfor({name:"Apprentice Mage",towerType:"Magical Damage",typeName:"mage",speed:"Normal"}),BARRACK_1:(new i).setPrice(100).setEffectSummon("summon").setInfor({name:"Militias",towerType:"Train Soldiers",typeName:"barrack",speed:"Normal"}),ARCHER_1:(new i).setAttackDame(80).setFrontAttack("front_attack").setBackAttack("back_attack").setFrontIdle("front_idle").setBackIdle("back_idle").setFrontDirection(n.DIRECTION.LEFT).setBackDirection(n.DIRECTION.RIGHT).setAttackType(n.ATTACK_TYPE.DEFAULT).setPrice(100).setInfor({name:"Archers",towerType:"Physical Damage",typeName:"archer",speed:"Normal"})},o.LIST_TOWER_WK={MAGE_ENCHANTRESS:(new i).setAttackDame(15).setFrontAttack("attack_range_1").setBackAttack("attack_range_1").setFrontIdle("idle_1").setBackIdle("idle_1").setBulletUpEffect("mage1_bullet_explode").setFrontDirection(n.DIRECTION.LEFT).setBackDirection(n.DIRECTION.LEFT).setAttackType(n.ATTACK_TYPE.DEFAULT).setPrice(100).setInfor({name:"Apprentice Mage",towerType:"Magical Damage",typeName:"mage",speed:"Normal"}),GOLEM_CELESTIAL:(new i).setAttackDame(15).setFrontAttack("attack_range").setBackAttack("attack_range_90").setFrontIdle("idle").setBackIdle("idle_90").setBulletUpEffect("mage1_bullet_explode").setFrontDirection(n.DIRECTION.LEFT).setBackDirection(n.DIRECTION.LEFT).setAttackType(n.ATTACK_TYPE.DEFAULT).setPrice(100).setInfor({name:"Apprentice Mage",towerType:"Magical Damage",typeName:"mage",speed:"Normal"}),GOLEM_ABYSS:(new i).setAttackDame(15).setFrontAttack("attack_range").setBackAttack("attack_range_90").setFrontIdle("idle").setBackIdle("idle_90").setBulletUpEffect("mage1_bullet_explode").setFrontDirection(n.DIRECTION.LEFT).setBackDirection(n.DIRECTION.LEFT).setAttackType(n.ATTACK_TYPE.DEFAULT).setPrice(100).setInfor({name:"Apprentice Mage",towerType:"Magical Damage",typeName:"mage",speed:"Normal"})},cc._RF.pop()},{"../EW_1_1/Constant_1_1":"Constant_1_1"}],TowerListener:[function(t,e,o){"use strict";cc._RF.push(e,"36112qK1YlFp74rb+G2fGJr","TowerListener");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./Constant_1_1"),r=t("./EnemyListener"),s=t("./Enemy"),l=cc._decorator,p=l.ccclass,u=l.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tower=null,e.className=null,e}return i(e,t),e.prototype.onLoad=function(){this.className=this.__classname__},e.prototype.start=function(){},e.prototype.onCollisionEnter=function(t,e){this.targetEnemy(t,e)},e.prototype.onCollisionExit=function(){},e.prototype.targetEnemy=function(t){var e=t.node.getComponent(r.default);e&&e.enemy.getComponent(s.default).type==a.TYPE.ENEMY&&(this.tower.getComponent("Tower").checkEnemyExistInTarget(e.enemy.getComponent(s.default))||this.tower.getComponent("Tower").setEnemyTarget(e.enemy.getComponent(s.default)),this.tower.getComponent("Tower").isAttack||this.tower.getComponent("Tower").isSkill||this.tower.getComponent("Tower").checkNextAction())},e.prototype.excludeEnemy=function(t){var e=t.node.getComponent(r.default);e&&e.enemy.getComponent(s.default).type==a.TYPE.ENEMY&&this.tower.getComponent("Tower").excludeEnemyInTarget(e.enemy)},c([u(cc.Node)],e.prototype,"tower",void 0),c([p],e)}(cc.Component);o.default=d,cc._RF.pop()},{"./Constant_1_1":"Constant_1_1","./Enemy":"Enemy","./EnemyListener":"EnemyListener"}],TowerWKListener:[function(t,e,o){"use strict";cc._RF.push(e,"8894aqYG2xCe5jAwYoLMnN6","TowerWKListener");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../EW_1_1/Constant_1_1"),r=t("./EnemyWKListener"),s=t("./EnemyWK"),l=cc._decorator,p=l.ccclass,u=l.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tower=null,e.className=null,e}return i(e,t),e.prototype.onLoad=function(){this.className=this.__classname__},e.prototype.start=function(){},e.prototype.onCollisionEnter=function(t,e){this.targetEnemy(t,e)},e.prototype.onCollisionExit=function(t,e){this.excludeEnemy(t,e)},e.prototype.targetEnemy=function(t){var e=t.node.getComponent(r.default);e&&e.enemy.getComponent(s.default).type==a.TYPE.ENEMY&&(this.tower.getComponent("Tower_WK").checkEnemyExistInTarget(e.enemy.getComponent(s.default))||this.tower.getComponent("Tower_WK").setEnemyTarget(e.enemy.getComponent(s.default)),this.tower.getComponent("Tower_WK").isAttack||this.tower.getComponent("Tower_WK").isSkill||this.tower.getComponent("Tower_WK").checkNextAction())},e.prototype.excludeEnemy=function(t){var e=t.node.getComponent(r.default);e&&e.enemy.getComponent(s.default).type==a.TYPE.ENEMY&&this.tower.getComponent("Tower_WK").excludeEnemyInTarget(e.enemy)},c([u(cc.Node)],e.prototype,"tower",void 0),c([p],e)}(cc.Component);o.default=d,cc._RF.pop()},{"../EW_1_1/Constant_1_1":"Constant_1_1","./EnemyWK":"EnemyWK","./EnemyWKListener":"EnemyWKListener"}],Tower_WK:[function(t,e,o){"use strict";cc._RF.push(e,"80e69eGtydHLKxda3Hup17P","Tower_WK");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./Bullet_WK"),r=t("../EW_1_1/Constant_1_1"),s=t("../EW_1_1/Effect"),l=cc._decorator,p=l.ccclass,u=l.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.anim=null,e.bulletPrefab=null,e.effectPrefab=null,e.range=null,e.rangeSprite=null,e.body=null,e.enemyTargetArr=[],e.isFront=!1,e.isLeftBullet=!1,e.isAttack=!1,e.isSkill=!1,e.attackSchedule=null,e.data=null,e.countEnergy=0,e.maxEnergy=300,e.countAttack=0,e.isTest=!1,e}return i(e,t),e.prototype.start=function(){this.type=r.TYPE.TOWER,this.anim.node.zIndex=r.Constant.TOWER_ZINDEX,this.isTest?(this.range.enabled=!1,this.stopAllAnim()):(this.idle(!0),this.range.enabled=!0),this.setRangeSprite(!0),cc.Canvas.instance.node.on(r.Constant.EVENT.ENABLE_RANGE,this.onEnableRange,this)},e.prototype.setData=function(t){this.data=t},e.prototype.onTouchStart=function(){cc.Canvas.instance.node.emit(r.Constant.EVENT.ON_CHOOSE_TOWER,this),cc.Canvas.instance.node.emit(r.Constant.EVENT.SHOW_INFOR,this.data)},e.prototype.onEnableRange=function(t){this.range.enabled=t},e.prototype.idle=function(){var t=this.data.frontIdle;this.anim.setAnimation(0,t,!1),this.changeAnimSpine(t)},e.prototype.checkNextAction=function(){0!=this.enemyTargetArr.length?this.checkNextAttack():this.idle(this.isFront)},e.prototype.checkNextAttack=function(){},e.prototype.setRangeSprite=function(t){this.rangeSprite.enabled=t},e.prototype.checkSkill=function(){return this.countEnergy+=this.data.attackDamage,this.countEnergy>this.maxEnergy},e.prototype.checkAttack=function(){var t,e;this.clearEnemyTarget(),this.isAttack=!0,this.enemyTargetArr.length>0&&(e=this.enemyTargetArr[0]),!e||e&&!e.isValid||null==e.node?this.idle(this.isFront):(e.node.y<this.node.y?(t=this.data.frontAttack,this.isFront=!0):(t=this.data.backAttack,this.isFront=!1),e.node.x<this.node.x?r.DIRECTION.LEFT:r.DIRECTION.RIGHT,this.anim.setAnimation(0,t,!1),this.changeAnimSpine(t),this.attack(e))},e.prototype.clearEnemyTarget=function(){var t=this.enemyTargetArr.filter(function(t){if(null!==t.node)return t.node.parent});this.enemyTargetArr=t},e.prototype.setDirection=function(t){var e=1;this.isFront?t==r.DIRECTION.LEFT?(e=this.data.frontDirection==r.DIRECTION.LEFT?1:-1,this.isLeftBullet=!1):(e=this.data.frontDirection==r.DIRECTION.LEFT?-1:1,this.isLeftBullet=!0):t==r.DIRECTION.LEFT?(e=this.data.backDirection==r.DIRECTION.LEFT?1:-1,this.isLeftBullet=!1):(e=this.data.backDirection==r.DIRECTION.LEFT?-1:1,this.isLeftBullet=!0),this.anim.node.scaleX=Math.abs(this.anim.node.scaleX)*e},e.prototype.setEnemyTarget=function(t){void 0===t&&(t=null),null!==t.node&&this.enemyTargetArr.push(t)},e.prototype.reload=function(t){var e=t?this.data.frontReload:this.data.backReload;this.anim.setAnimation(0,e,!1),this.changeAnimSpine(e)},e.prototype.setAnimPos=function(){},e.prototype.changeAnimSpine=function(t){var e=this;this.anim.setCompleteListener(function(o){(o.animation?o.animation.name:"")==t&&(e.isSkill=!1,e.isAttack=!1,e.checkNextAction(),e.clearEnemyTargetArr())})},e.prototype.finish=function(){this.isSkill=!1,this.isAttack=!1,this.clearEnemyTargetArr(),this.checkNextAction()},e.prototype.attack=function(t){this.attackSchedule&&this.unschedule(this.attackSchedule),this.attackSchedule=this.scheduleOnce(function(){t&&((!t.isValid||t&&!t.node||t&&t.node&&!t.node.parent)&&(t=this.enemyTargetArr[this.enemyTargetArr.indexOf(t)+1],this.attackCustom(t)),this.attackCustom(t))}.bind(this),.35)},e.prototype.attackCustom=function(t){var e=cc.instantiate(this.bulletPrefab);this.node.addChild(e),e.getComponent(a.default).shoot(t,this)},e.prototype.stopAllAnim=function(){for(var t=this.node.children,e=0;e<t.length;e++){var o=t[e].getComponent(cc.Animation);o&&o.isValid&&(o.playOnLoad=!1)}},e.prototype.showEffectSummon=function(t,e,o){void 0===t&&(t=r.Constant.ANIMATION_SPEED),void 0===e&&(e=1),void 0===o&&(o=cc.v3(0,0));var n=cc.instantiate(this.effectPrefab);this.node.addChild(n,r.Constant.TOWER_FRONT_BULLET_ZINDEX),n.getComponent(s.default).playAnimationWithSpeed(this.data.effectSummon,this.data,!1,t),n.setScale(e),n.setPosition(n.position.add(o))},e.prototype.checkEnemyExistInTarget=function(t){for(var e=this.enemyTargetArr,o=0;o<e.length;o++)if(e[o]==t)return!0;return!1},e.prototype.excludeEnemyInTarget=function(t){for(var e=this.enemyTargetArr,o=0;o<e.length;o++)e==t&&(e.splice(o,1),o--)},e.prototype.clearEnemyTargetArr=function(){var t=this.enemyTargetArr.filter(function(t){return t.isValid});this.enemyTargetArr=t},c([u(sp.Skeleton)],e.prototype,"anim",void 0),c([u(cc.Prefab)],e.prototype,"bulletPrefab",void 0),c([u(cc.Prefab)],e.prototype,"effectPrefab",void 0),c([u(cc.PolygonCollider)],e.prototype,"range",void 0),c([u(cc.Sprite)],e.prototype,"rangeSprite",void 0),c([u(cc.Node)],e.prototype,"body",void 0),c([p],e)}(cc.Component);o.default=d,cc._RF.pop()},{"../EW_1_1/Constant_1_1":"Constant_1_1","../EW_1_1/Effect":"Effect","./Bullet_WK":"Bullet_WK"}],Tower:[function(t,e,o){"use strict";cc._RF.push(e,"110fetoUdNK5oh2QXMwPFnM","Tower");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./common/Utils"),r=t("./tower/Bullet"),s=t("./Constant_1_1"),l=t("./Effect"),p=cc._decorator,u=p.ccclass,d=p.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.anim=null,e.bulletPrefab=null,e.effectPrefab=null,e.range=null,e.rangeSprite=null,e.body=null,e.enemyTargetArr=[],e.isFront=!1,e.isLeftBullet=!1,e.isAttack=!1,e.isSkill=!1,e.attackSchedule=null,e.data=null,e.countEnergy=0,e.maxEnergy=300,e.countAttack=0,e.isTest=!1,e}return i(e,t),e.prototype.start=function(){this.type=s.TYPE.TOWER,this.anim.node.zIndex=s.Constant.TOWER_ZINDEX,this.isTest?(this.range.enabled=!1,this.stopAllAnim()):(this.idle(!0),this.range.enabled=!0),this.setRangeSprite(!0),cc.Canvas.instance.node.on(s.Constant.EVENT.ENABLE_RANGE,this.onEnableRange,this)},e.prototype.setData=function(t){this.data=t},e.prototype.onTouchStart=function(){cc.Canvas.instance.node.emit(s.Constant.EVENT.ON_CHOOSE_TOWER,this),cc.Canvas.instance.node.emit(s.Constant.EVENT.SHOW_INFOR,this.data)},e.prototype.onEnableRange=function(t){this.range.enabled=t},e.prototype.idle=function(t){var e=t?this.data.frontIdle:this.data.back_idle;a.default.prototype.playAnimation(this.anim,e)},e.prototype.checkNextAction=function(){0!=this.enemyTargetArr.length?this.checkNextAttack():this.idle(this.isFront)},e.prototype.checkNextAttack=function(){},e.prototype.setRangeSprite=function(t){this.rangeSprite.enabled=t},e.prototype.checkSkill=function(){return this.countEnergy+=this.data.attackDamage,this.countEnergy>this.maxEnergy},e.prototype.checkAttack=function(){var t;this.isAttack=!0;var e=this.enemyTargetArr[0];if(!e||e&&!e.isValid)this.idle(this.isFront);else{e.node.y<this.node.y?(t=this.data.frontAttack,this.isFront=!0):(t=this.data.backAttack,this.isFront=!1);var o=e.node.x<this.node.x?s.DIRECTION.LEFT:s.DIRECTION.RIGHT;this.setDirection(o),a.default.prototype.playAnimation(this.anim,t),this.attack(e)}},e.prototype.clearEnemyTarget=function(){var t=this.enemyTargetArr.filter(function(t){if(null!==t.node)return t.node.parent;console.log(t)});this.enemyTargetArr=t},e.prototype.setDirection=function(t){var e=1;this.isFront?t==s.DIRECTION.LEFT?(e=this.data.frontDirection==s.DIRECTION.LEFT?1:-1,this.isLeftBullet=!1):(e=this.data.frontDirection==s.DIRECTION.LEFT?-1:1,this.isLeftBullet=!0):t==s.DIRECTION.LEFT?(e=this.data.backDirection==s.DIRECTION.LEFT?1:-1,this.isLeftBullet=!1):(e=this.data.backDirection==s.DIRECTION.LEFT?-1:1,this.isLeftBullet=!0),this.anim.node.scaleX=Math.abs(this.anim.node.scaleX)*e},e.prototype.setEnemyTarget=function(t){void 0===t&&(t=null),this.enemyTargetArr.push(t)},e.prototype.reload=function(t){var e=t?this.data.frontReload:this.data.backReload;a.default.prototype.playAnimation(this.anim,e)},e.prototype.setAnimPos=function(){},e.prototype.finish=function(){this.isSkill=!1,this.isAttack=!1,this.clearEnemyTargetArr(),this.checkNextAction()},e.prototype.attack=function(t){this.attackSchedule&&this.unschedule(this.attackSchedule),this.attackSchedule=this.scheduleOnce(function(){!t.isValid||t&&!t.node||t&&t.node&&!t.node.parent||this.attackCustom(t)}.bind(this),.3)},e.prototype.attackCustom=function(t){var e=cc.instantiate(this.bulletPrefab);this.node.addChild(e),e.getComponent(r.default).shoot(t,this)},e.prototype.stopAllAnim=function(){for(var t=this.node.children,e=0;e<t.length;e++){var o=t[e].getComponent(cc.Animation);o&&o.isValid&&(o.playOnLoad=!1)}},e.prototype.showEffectSummon=function(t,e,o){void 0===t&&(t=s.Constant.ANIMATION_SPEED),void 0===e&&(e=1),void 0===o&&(o=cc.v3(0,0));var n=cc.instantiate(this.effectPrefab);this.node.addChild(n,s.Constant.TOWER_FRONT_BULLET_ZINDEX),n.getComponent(l.default).playAnimationWithSpeed(this.data.effectSummon,this.data,!1,t),n.setScale(e),n.setPosition(n.position.add(o))},e.prototype.checkEnemyExistInTarget=function(t){for(var e=this.enemyTargetArr,o=0;o<e.length;o++)if(e[o]==t)return!0;return!1},e.prototype.excludeEnemyInTarget=function(t){for(var e=this.enemyTargetArr,o=0;o<e.length;o++)e[o]==t&&(e.splice(o,1),o--)},e.prototype.clearEnemyTargetArr=function(){var t=this.enemyTargetArr.filter(function(t){return t.isValid});this.enemyTargetArr=t},c([d(cc.Animation)],e.prototype,"anim",void 0),c([d(cc.Prefab)],e.prototype,"bulletPrefab",void 0),c([d(cc.Prefab)],e.prototype,"effectPrefab",void 0),c([d(cc.PolygonCollider)],e.prototype,"range",void 0),c([d(cc.Sprite)],e.prototype,"rangeSprite",void 0),c([d(cc.Node)],e.prototype,"body",void 0),c([u],e)}(cc.Component);o.default=h,cc._RF.pop()},{"./Constant_1_1":"Constant_1_1","./Effect":"Effect","./common/Utils":"Utils","./tower/Bullet":"Bullet"}],Troll:[function(t,e,o){"use strict";cc._RF.push(e,"d92e7TTzatK77403orHj2NZ","Troll");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../Enemy"),r=t("../EnemyData_1_1"),s=cc._decorator,l=s.ccclass,p=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onLoad=function(){this.setData(r.LIST_ENEMY.TROLL)},e.prototype.setAnimPos=function(t){var e=cc.v3(0,32);switch(t){case this.data.attack:e=cc.v3(-5,52);break;case this.data.die:e=cc.v3(-28,29)}this.icon.setPosition(e)},c([l],e)}(a.default));o.default=p,cc._RF.pop()},{"../Enemy":"Enemy","../EnemyData_1_1":"EnemyData_1_1"}],TweenEfx:[function(t,e){"use strict";cc._RF.push(e,"31450iP+rZBAbLnaLTMY9Ue","TweenEfx");var o=cc.tween;cc.Class({extends:cc.Component,properties:{nodes:[cc.Node]},start:function(){},runEffect:function(){for(var t=this.nodes,e=0;e<t.length;e++){var n=t[e];o(n).delay(.1*e).repeat(1,o().set({opacity:0,scale:10,x:0,rotation:0}).parallel(o().to(1,{opacity:255,scale:1},{easing:"quintInOut"}),o().to(2.5,{x:n.x},{easing:"backOut"}))).start()}}}),cc._RF.pop()},{}],Upgrade_txt:[function(t,e,o){"use strict";cc._RF.push(e,"e2e6bMO9sRNe78zVDzqtXKA","Upgrade_txt");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,r=a.ccclass,s=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon_text=null,e.failSpriteFrameArr=null,e.atkSpriteFrameArr=null,e.defSpriteFrameArr=null,e.spdSpriteFrameArr=null,e.skillSpriteFrameArr=null,e}return i(e,t),e.prototype.start=function(){},e.prototype.setUp=function(t){switch(t){case"fail":this.icon_text.spriteFrame=this.failSpriteFrameArr,this.runFail();break;case"atk":this.icon_text.spriteFrame=this.atkSpriteFrameArr,this.runIndex();break;case"def":this.icon_text.spriteFrame=this.defSpriteFrameArr,this.runIndex();break;case"spd":this.icon_text.spriteFrame=this.spdSpriteFrameArr,this.runIndex();break;case"skill":this.icon_text.spriteFrame=this.skillSpriteFrameArr,this.runIndex()}},e.prototype.runFail=function(){var t=this,e=cc.tween;this.node.scale=1.2,e(this.node).parallel(e().by(.5,{scale:.3,y:100}),e().delay(.5).to(.2,{opacity:0})).call(function(){t.node.destroy()}).start()},e.prototype.runIndex=function(){var t=this,e=cc.tween;this.node.scale=1.5,e(this.node).by(.2,{scale:-.7}).delay(.3).to(.5,{opacity:0}).call(function(){t.node.destroy()}).start()},c([s(cc.Sprite)],e.prototype,"icon_text",void 0),c([s(cc.SpriteFrame)],e.prototype,"failSpriteFrameArr",void 0),c([s(cc.SpriteFrame)],e.prototype,"atkSpriteFrameArr",void 0),c([s(cc.SpriteFrame)],e.prototype,"defSpriteFrameArr",void 0),c([s(cc.SpriteFrame)],e.prototype,"spdSpriteFrameArr",void 0),c([s(cc.SpriteFrame)],e.prototype,"skillSpriteFrameArr",void 0),c([r],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],Utils:[function(t,e,o){"use strict";cc._RF.push(e,"95c96YkqG1Aza8P3Tk31Mwu","Utils");var n=this&&this.__spreadArrays||function(){for(var t=0,e=0,o=arguments.length;e<o;e++)t+=arguments[e].length;var n=Array(t),i=0;for(e=0;e<o;e++)for(var c=arguments[e],a=0,r=c.length;a<r;a++,i++)n[i]=c[a];return n};Object.defineProperty(o,"__esModule",{value:!0});var i=t("../Constant_1_1"),c=function(){function t(){}return t.prototype.playAnimation=function(t,e,o){if(void 0===o&&(o=null),t){var n=this.getDataByName(t._clips,e);if(!n)return;o?(n.isWay=!0,n.speed=o):(this.stopAnimation(t),n.speed=i.Constant.ANIMATION_SPEED),t.playAdditive(e)}},t.prototype.playAnimationWithSpeed=function(t,e,o){if(void 0===o&&(o=1),t){var n=this.getDataByName(t._clips,e);this.stopAnimation(t),n.speed=o,t.playAdditive(e)}},t.prototype.playAnimationFromSecond=function(t,e,o,n){if(void 0===o&&(o=null),void 0===n&&(n=0),t){var c=this.getDataByName(t._clips,e);if(!c)return;o?(c.isWay=!0,c.speed=o):(this.stopAnimation(t),c.speed=i.Constant.ANIMATION_SPEED),t.playAdditive(e,n)}},t.prototype.stopAnimation=function(t){t.getClips().forEach(function(e){e&&!e.isWay&&t.stop(e.name)})},t.prototype.pauseAnimationWay=function(t){t.getClips().forEach(function(e){e&&e.isWay&&t.pause(e.name)})},t.prototype.resumeAnimationWay=function(t){t.getClips().forEach(function(e){e&&e.isWay&&t.resume(e.name)})},t.prototype.pauseAnimation=function(t){t.getClips().forEach(function(e){e&&t.pause(e.name)})},t.prototype.resumeAnimation=function(t,e){void 0===e&&(e=null),t.getClips().forEach(function(o){o&&(o.isWay||o.name==e)&&t.resume(o.name)})},t.prototype.getDataByName=function(t,e){for(var o=0;o<t.length;o++)if(t[o]&&t[o].name==e)return t[o];return null},t.prototype.changeSpeed=function(t,e){for(var o=0;o<t.length;o++)t[o].speed=t[o].speed*e},t.prototype.angle=function(t,e,o,n){var i=n-e,c=o-t;return Math.atan2(i,c)*(180/Math.PI)},t.prototype.angle360=function(t,e,o,n){var i=this.angle(t,e,o,n);return i<0&&(i=360+i),i},t.prototype.quickSort=function(t){if(t.length<2)return t;for(var e,o=t.length-1,i=t[o],c=[],a=[],r=0;r<o;r++)(e=t[r])<i?c.push(e):a.push(e);return n(this.quickSort(c),[i],this.quickSort(a))},t.prototype.randomMinMax=function(t,e,o){return o?Math.floor(Math.random()*(e-t+1))+t:Math.random()*(e-t)+t},t}();o.default=c,cc._RF.pop()},{"../Constant_1_1":"Constant_1_1"}],WK_3:[function(t,e,o){"use strict";cc._RF.push(e,"dd2d3oXVb5Lja8VThJ3/xsF","WK_3");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../EW_1_1/Enemy"),r=t("../../EW_1_1/common/Utils"),s=t("../../EW_1_1/Constant_1_1"),l=cc._decorator,p=l.ccclass,u=l.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.game=null,e.ui=null,e.enemyPrefab=null,e.iceTrollThrowerPrefab=null,e.trollPrefab=null,e.nadlugPrefab=null,e.marakkPrefab=null,e.bossPrefab=null,e.galeNode=null,e.godPrefab=null,e.asuraPrefab=null,e.golemAbyss=null,e.golemCeles=null,e.mageMystic=null,e.golemPrefab=null,e.golemBluePrefab=null,e.golem1Prefab=null,e.golem2Prefab=null,e.golem3Prefab=null,e.magePrefab=null,e.golemMinionPrefab=null,e.federycPrefab=null,e.arrynPrefab=null,e.minion5Prefab=null,e.summonToggle=null,e.hand=null,e.endGame=null,e.warning=null,e.popup=null,e.logo=null,e.moneyLabel=null,e.bg=null,e.click=null,e.victory=null,e.golem_impact=null,e.merge_eff=null,e.enemy_awake=null,e.pointPrefab=null,e.chooseTowerPrefab=null,e.camera=null,e.btnUpdate=null,e.shadow=null,e.guide=null,e.win=null,e.lose=null,e.process=null,e.bar=null,e.dangerous=null,e.warning_icon=null,e.upgrade=null,e.upgrade_txt_prefab=null,e.effect=null,e.hand_choose_hero=null,e.eff_click=null,e.choose_hero=null,e.btnSkill3=null,e.guidNode=[],e.shadowGame=null,e.appearAsuraAudio=null,e.summonAudio=null,e.jupiterAudio=null,e.jupiterThunderAudio=null,e.bgSoundId=null,e.endSoundId=null,e.boss=null,e.federyc=null,e.isEndGame=!1,e.totalEnemy=0,e.countEnemy=0,e.money=240,e.towerTarget=null,e.countTower=0,e.towerTargetPos=cc.v3(-80,210),e.countUpgrade=0,e.countFail=0,e.countProcess=0,e.player=null,e}return i(e,t),e.prototype.onLoad=function(){cc.Global.GAME=this,cc.Global.PLAYER=this.galeNode,cc.director.getCollisionManager().enabled=!0,cc.Canvas.instance.node.on(s.Constant.EVENT.END_GAME,this.onEndGame,this),cc.Canvas.instance.node.on(s.Constant.EVENT.CLICK,this.onClick,this),cc.Canvas.instance.node.on(s.Constant.EVENT.ENEMY_DIE,this.onEnemyDie,this),cc.Canvas.instance.node.on(s.Constant.EVENT.GOLEM_IMPACT,this.onGolemImpact,this),cc.Canvas.instance.node.on(s.Constant.EVENT.SET_MONEY,this.setMoney,this),cc.Canvas.instance.node.on(s.Constant.EVENT.IMPACT_CAMERA,this.onImpactCamera,this),cc.Canvas.instance.node.on(s.Constant.EVENT.ENEMY_FINISH,this.onEnemyDie,!1),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),this.onBackground(),this.mageMystic.zIndex=7,this.golemCeles.zIndex=3,this.golemAbyss.zIndex=3,this.galeNode.zIndex=5},e.prototype.onKeyDown=function(t){switch(t.keyCode){case cc.macro.KEY.a:this.onAttackGale();break;case cc.macro.KEY.s:this.onSkillGale(t,"1");break;case cc.macro.KEY.w:this.onSkillSummon(t)}},e.prototype.restartGame=function(){cc.audioEngine.stop(this.bgSoundId),cc.audioEngine.stop(this.endSoundId),cc.director.loadScene("WK_3")},e.prototype.start=function(){var t=this;this.scheduleOnce(function(){cc.audioEngine.play(t.enemy_awake,!1,1.1)},4.5),this.scheduleOnce(function(){t.guidNode[0].active=!1,t.guidNode[1].active=!0},1.5),this.scheduleOnce(function(){t.guidNode[1].active=!1,t.guidNode.forEach(function(t,e){e>1&&(t.active=!0)})},3),this.scheduleOnce(function(){t.guidNode.forEach(function(e){e.active=!1,t.shadowGame.active=!1})},4.5),this.scheduleOnce(function(){t.createEnemyWayEW6()},4.5)},e.prototype.changeAnimation=function(t,e,o,n){t.setAnimation(e,o,n)},e.prototype.resumeGame=function(){cc.Canvas.instance.node.emit(s.Constant.EVENT.PAUSE_ENEMY_ANIM_WAY,!1),cc.Canvas.instance.node.emit(s.Constant.EVENT.ENABLE_RANGE,!0)},e.prototype.onAttackGale=function(){cc.Canvas.instance.node.emit(s.Constant.EVENT.PLAYER_ATTACK)},e.prototype.onSkillGale=function(t,e){cc.Global.PLAYER.getComponent("Minion_1_1").isAttack||cc.Global.PLAYER.getComponent("Minion_1_1").isDie||cc.Global.PLAYER.getComponent("Minion_1_1").isSkill||("touchend"==t.type&&this.setCountDown(t.currentTarget,4),cc.Canvas.instance.node.emit(s.Constant.EVENT.PLAYER_SKILL,e))},e.prototype.onSkillSummon=function(t){var e=this;cc.Global.PLAYER.getComponent("Minion_1_1").isAttack||cc.Global.PLAYER.getComponent("Minion_1_1").isDie||cc.Global.PLAYER.getComponent("Minion_1_1").isSkill||("touchend"==t.type&&this.setCountDown(t.currentTarget,10),cc.Canvas.instance.node.emit(s.Constant.EVENT.PLAYER_SKILL,"3"),this.scheduleOnce(function(){cc.audioEngine.play(e.jupiterAudio,!1,2),e.schedule(function(){var t=cc.audioEngine.play(e.jupiterThunderAudio,!0,2);e.scheduleOnce(function(){cc.audioEngine.pause(t)},2)},.25,5);var t=cc.instantiate(e.godPrefab);t.setPosition(cc.Global.PLAYER.position.add(cc.v3(150,50))),t.zIndex=cc.Global.PLAYER.zIndex-1;var o=t.getComponent(sp.Skeleton);e.game.addChild(t),o.setAnimation(0,"powerup",!1),o.scheduleOnce(function(){t.children[0].getComponent(cc.CircleCollider).enabled=!0,cc.audioEngine.play(e.summonAudio,!1,1)},o.findAnimation("powerup").duration/1.5/4),o.scheduleOnce(function(){t.destroy()},o.findAnimation("powerup").duration/1.5)},.65))},e.prototype.onSkillTranForm=function(t){var e=this;cc.audioEngine.play(this.appearAsuraAudio,!1,.8),"touchend"==t.type&&this.setCountDown(t.currentTarget,60);var o=cc.instantiate(this.asuraPrefab);this.galeNode.getChildByName("eff_until_down").getComponent(cc.Animation).play("gale_until_eff_down"),this.galeNode.getChildByName("eff_until_up").getComponent(cc.Animation).play("gale_until_eff_up"),this.galeNode.getComponent("Gale").isSkill=!0,o.getComponent("Asura").isSkill=!0,this.scheduleOnce(function(){e.galeNode.active=!1,cc.Global.PLAYER=o,o.setPosition(e.galeNode.position),o.zIndex=e.galeNode.zIndex,o.getChildByName("icon").getComponent(sp.Skeleton).setAnimation(0,"appear",!1),e.game.addChild(o)},.4)},e.prototype.setCountDown=function(t,e){t.getComponent(cc.Button).enabled=!1;var o=t.parent.getChildByName("mask").getChildByName("icon").getComponent(cc.Sprite);cc.tween(o).set({fillRange:1}).to(e,{fillRange:0}).call(function(){t.getComponent(cc.Button).enabled=!0}).start()},e.prototype.setProcess=function(t){cc.tween(this.process).by(.5,{fillRange:t}).start()},e.prototype.createEnemyWayEW6=function(){var t=0,e=2;e=4;for(var o=0;o<e;o++)this.createEnemyEW6(this.enemyPrefab,"way",1.1-.2+.4*o,2);for(t+=e,e=2,o=0;o<e;o++)this.createEnemyEW6(this.trollPrefab,"way",0+.5*o,2);for(t+=e,e=4,o=0;o<e;o++)this.createEnemyEW6(this.enemyPrefab,"way1",.8+.4*o,2);for(t+=e,e=2,o=0;o<e;o++)this.createEnemyEW6(this.trollPrefab,"way1",.2+.5*o,2);for(t+=e,e=1,o=0;o<e;o++)this.createEnemyEW6(this.nadlugPrefab,"way1",0+.5*o,2);t+=e,this.totalEnemy+=t},e.prototype.createEnemyEW6=function(t,e,o,n){void 0===e&&(e="way");var i=cc.instantiate(t);i.zIndex=n,this.game.addChild(i),i.setPosition(cc.v3(9999,9999));var c=i.getComponent(a.default);c.data.setWay(e),r.default.prototype.playAnimationFromSecond(c.anim,e,c.data.speed,o);var s="way"==e||"way1"==e?1:0;return c.runSide(s),c},e.prototype.createEnemyWay=function(){for(var t=0,e=0;e<3;e++)this.scheduleOnce(function(){this.createEnemy(this.enemyPrefab,"way")}.bind(this),1*e);for(t+=3,e=0;e<3;e++)this.scheduleOnce(function(){this.createEnemy(this.enemyPrefab,"way1")}.bind(this),1*e+.5);t+=3;var o=2;for(e=0;e<o;e++)this.scheduleOnce(function(){this.createEnemy(this.trollPrefab,"way")}.bind(this),1.3*e+3.3);for(t+=o,o=1,e=0;e<o;e++)this.scheduleOnce(function(){this.createEnemy(this.trollPrefab,"way1")}.bind(this),1.3*e+3.8);for(t+=o,o=3,e=0;e<o;e++)this.scheduleOnce(function(){this.createEnemy(this.enemyPrefab,"way")}.bind(this),1*e+6);for(t+=o,o=3,e=0;e<o;e++)this.scheduleOnce(function(){this.createEnemy(this.enemyPrefab,"way1")}.bind(this),1*e+7);for(t+=o,o=1,e=0;e<o;e++)this.scheduleOnce(function(){this.createEnemy(this.nadlugPrefab,"way1")}.bind(this),1*e+5.5);t+=o,this.totalEnemy=t},e.prototype.onImpactCamera=function(){},e.prototype.setMoney=function(t){void 0===t&&(t=0),this.money+=t},e.prototype.onEnemyDie=function(){this.countEnemy++,!this.isEndGame&&this.countEnemy>=this.totalEnemy&&this.onEndGame(!0)},e.prototype.onBackground=function(){this.bgSoundId=cc.audioEngine.play(this.bg,!0,.9)},e.prototype.onClick=function(){cc.Canvas.instance.node.emit(s.Constant.EVENT.OFF_CHOOSE_TOWER),cc.audioEngine.play(this.click,!1,1.4)},e.prototype.onGolemImpact=function(){cc.audioEngine.play(this.golem_impact,!1,1)},e.prototype.onTouchStart=function(){},e.prototype.setZIndex=function(){this.game.zIndex=s.Constant.GAME_ZINDEX,this.ui.zIndex=s.Constant.UI_ZINDEX,this.endGame.zIndex=cc.macro.MAX_ZINDEX-1,this.logo.zIndex=cc.macro.MAX_ZINDEX},e.prototype.createEnemy=function(t,e){void 0===e&&(e="way");var o=cc.instantiate(t);this.game.addChild(o),o.getComponent(a.default).data.setWay(e)},e.prototype.createTower=function(t,e){var o=cc.instantiate(t);return o.setPosition(e),this.game.addChild(o),o},e.prototype.createMinion=function(t,e){var o=cc.instantiate(t);this.game.addChild(o),o.setPosition(e),t==this.federycPrefab&&(this.federyc=o)},e.prototype.onEndGame=function(t){var e=this;if(void 0===t&&(t=!1),!this.isEndGame){this.endSoundId=cc.audioEngine.play(this.victory,!1,1),this.win.active=t,this.lose.active=!t,this.isEndGame=!0,this.endGame.active=!0,this.endGame.opacity=0,this.endGame.runAction(cc.fadeIn(.5));var o=cc.v2(this.popup.position.x,this.popup.position.y);this.popup.setPosition(this.popup.position.add(cc.v3(0,400))),this.popup.runAction(cc.moveTo(.5,o)),this.scheduleOnce(function(){e.endGame.getComponent(cc.Button).enabled=t},.5)}},e.prototype.getPrefabByObj=function(){},e.prototype.showEffect=function(t,e){var o=cc.instantiate(this.effect);return e.addChild(o),o.getComponent("effect").play(t),o},c([u(cc.Node)],e.prototype,"game",void 0),c([u(cc.Node)],e.prototype,"ui",void 0),c([u(cc.Prefab)],e.prototype,"enemyPrefab",void 0),c([u(cc.Prefab)],e.prototype,"iceTrollThrowerPrefab",void 0),c([u(cc.Prefab)],e.prototype,"trollPrefab",void 0),c([u(cc.Prefab)],e.prototype,"nadlugPrefab",void 0),c([u(cc.Prefab)],e.prototype,"marakkPrefab",void 0),c([u(cc.Prefab)],e.prototype,"bossPrefab",void 0),c([u(cc.Node)],e.prototype,"galeNode",void 0),c([u(cc.Prefab)],e.prototype,"godPrefab",void 0),c([u(cc.Prefab)],e.prototype,"asuraPrefab",void 0),c([u(cc.Node)],e.prototype,"golemAbyss",void 0),c([u(cc.Node)],e.prototype,"golemCeles",void 0),c([u(cc.Node)],e.prototype,"mageMystic",void 0),c([u(cc.Prefab)],e.prototype,"golemPrefab",void 0),c([u(cc.Prefab)],e.prototype,"golemBluePrefab",void 0),c([u(cc.Prefab)],e.prototype,"golem1Prefab",void 0),c([u(cc.Prefab)],e.prototype,"golem2Prefab",void 0),c([u(cc.Prefab)],e.prototype,"golem3Prefab",void 0),c([u(cc.Prefab)],e.prototype,"magePrefab",void 0),c([u(cc.Prefab)],e.prototype,"golemMinionPrefab",void 0),c([u(cc.Prefab)],e.prototype,"federycPrefab",void 0),c([u(cc.Prefab)],e.prototype,"arrynPrefab",void 0),c([u(cc.Prefab)],e.prototype,"minion5Prefab",void 0),c([u(cc.Toggle)],e.prototype,"summonToggle",void 0),c([u(cc.Node)],e.prototype,"hand",void 0),c([u(cc.Node)],e.prototype,"endGame",void 0),c([u(cc.Node)],e.prototype,"warning",void 0),c([u(cc.Node)],e.prototype,"popup",void 0),c([u(cc.Node)],e.prototype,"logo",void 0),c([u(cc.Label)],e.prototype,"moneyLabel",void 0),c([u({type:cc.AudioClip})],e.prototype,"bg",void 0),c([u({type:cc.AudioClip})],e.prototype,"click",void 0),c([u({type:cc.AudioClip})],e.prototype,"victory",void 0),c([u({type:cc.AudioClip})],e.prototype,"golem_impact",void 0),c([u({type:cc.AudioClip})],e.prototype,"merge_eff",void 0),c([u({type:cc.AudioClip})],e.prototype,"enemy_awake",void 0),c([u(cc.Prefab)],e.prototype,"pointPrefab",void 0),c([u(cc.Prefab)],e.prototype,"chooseTowerPrefab",void 0),c([u(cc.Camera)],e.prototype,"camera",void 0),c([u(cc.Node)],e.prototype,"btnUpdate",void 0),c([u(cc.Node)],e.prototype,"shadow",void 0),c([u(cc.Node)],e.prototype,"guide",void 0),c([u(cc.Node)],e.prototype,"win",void 0),c([u(cc.Node)],e.prototype,"lose",void 0),c([u(cc.Sprite)],e.prototype,"process",void 0),c([u(cc.Node)],e.prototype,"bar",void 0),c([u(cc.Node)],e.prototype,"dangerous",void 0),c([u(cc.Node)],e.prototype,"warning_icon",void 0),c([u(cc.Node)],e.prototype,"upgrade",void 0),c([u(cc.Prefab)],e.prototype,"upgrade_txt_prefab",void 0),c([u(cc.Prefab)],e.prototype,"effect",void 0),c([u(cc.Node)],e.prototype,"hand_choose_hero",void 0),c([u(cc.Prefab)],e.prototype,"eff_click",void 0),c([u(cc.Node)],e.prototype,"choose_hero",void 0),c([u(cc.Node)],e.prototype,"btnSkill3",void 0),c([u(cc.Node)],e.prototype,"guidNode",void 0),c([u(cc.Node)],e.prototype,"shadowGame",void 0),c([u(cc.AudioClip)],e.prototype,"appearAsuraAudio",void 0),c([u(cc.AudioClip)],e.prototype,"summonAudio",void 0),c([u(cc.AudioClip)],e.prototype,"jupiterAudio",void 0),c([u(cc.AudioClip)],e.prototype,"jupiterThunderAudio",void 0),c([p],e)}(cc.Component);o.default=d,cc._RF.pop()},{"../../EW_1_1/Constant_1_1":"Constant_1_1","../../EW_1_1/Enemy":"Enemy","../../EW_1_1/common/Utils":"Utils"}],Warning:[function(t,e,o){"use strict";cc._RF.push(e,"8fec4UUIHVL7ZUadeeqnnJ7","Warning");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../EW_1_1/Constant_1_1"),r=cc._decorator,s=r.ccclass,l=r.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.circle=null,e.startPos=null,e}return i(e,t),e.prototype.start=function(){cc.Canvas.instance.node.on(a.Constant.EVENT.SET_WARNING,this.setAngleCircle,this)},e.prototype.setData=function(t){switch(this.startPos=t.pos,t.direction){case a.DIRECTION.RIGHT:this.node.setPosition(t.pos.add(cc.v3(-100)))}},e.prototype.onClick=function(){this.node.parent.active=!1,cc.Canvas.instance.node.emit(a.Constant.EVENT.START_WAY)},e.prototype.setAngleCircle=function(){var t=this.circle.parent.convertToWorldSpaceAR(this.circle.position),e=cc.Canvas.instance.node.convertToNodeSpaceAR(t),o=this.angle360(e.x,e.y,this.startPos.x,this.startPos.y);this.circle.angle=o},e.prototype.angle=function(t,e,o,n){var i=n-e,c=o-t;return Math.atan2(i,c)*(180/Math.PI)},e.prototype.angle360=function(t,e,o,n){var i=this.angle(t,e,o,n);return i<0&&(i=360+i),i},c([l(cc.Node)],e.prototype,"circle",void 0),c([s],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../EW_1_1/Constant_1_1":"Constant_1_1"}],effect:[function(t,e,o){"use strict";cc._RF.push(e,"212d9/70sRHEpe/fkAtPCSg","effect");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(c<3?i(a):c>3?i(e,o,a):i(e,o))||a);return c>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../EW_1_1/common/Utils"),r=cc._decorator,s=r.ccclass,l=r.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.anim=null,e.game=null,e}return i(e,t),e.prototype.start=function(){this.node.zIndex=cc.macro.MAX_ZINDEX},e.prototype.play=function(t){var e=a.default.prototype.getDataByName(this.anim._clips,t);if(e){switch(t){case"merge_eff":this.node.setScale(6),e.speed=.2,this.node.setPosition(this.node.position.add(cc.v3(0,30)));break;case"electric":this.node.setScale(3),e.speed=.5,this.node.setPosition(this.node.position.add(cc.v3(0,50)))}this.anim.play(t)}else this.node.destroy()},e.prototype.finish=function(){this.node.destroy()},c([l(cc.Animation)],e.prototype,"anim",void 0),c([s],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../EW_1_1/common/Utils":"Utils"}]},{},["Controller","EW_1","Circle","Constant_1_1","DestinationListener","EW_1_1","Effect","EffectListener","Enemy","EnemyData_1_1","EnemyListener","Hand","MinionData","MinionListener","Minion_1_1","Tower","TowerAnim","TowerData","TowerListener","Utils","GoblinAssassin1_1","IceTrollThrower","KingJuliusIII","Marakk","NadLug","Nazaral1_1","Orc","SwordMan","Troll","Arryn","ArrynBullet","Federyc","FederycBullet","Galio","Archer1","ArcherBullet","Barrack1","Minion1","Minion5","Bullet","Golem","Golem1","Golem2","Golem3","GolemBlue","GolemBullet","GolemMinion","Mage","Mage1","MageBullet","EW_3","ChooseTower_5","EW_5","EW_6","TweenEfx","Upgrade_txt","effect","CardButton","EW_9","ChooseTower","FB_INSTANT","Infor","MapData","Point","Warning","ButtonController","GlobalInfo","MainScene","Model","ModelUtils","CheckIn","LoadLevel","RewardDialog","SelectHero","SettingMenu","Shop","AdService","DataService","DialogService","GameService","SoundService","Bullet_WK","JoyStick","DestinationWKListener","EffectWKListener","EnemyWK","EnemyWKData","EnemyWKListener","MinionWK","MinionWKData","MinionWKListener","TowerWKListener","Tower_WK","Barduk","GoblinFighter","HobGoblin","WK_3","Asura","Gale","Lucius","MinionLV3","GolemAbyss","GolemAbyssBullet","GolemCelestial","GolemCelestialBullet","MageEnchantress","MageEnchantressBullet","MageMystic","MageMysticBullet","AdManager","CameraManager","Global","PlatformBrandIcon"]);